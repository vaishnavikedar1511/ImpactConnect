"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/opportunities/page",{

/***/ "(app-pages-browser)/./src/components/opportunities/OpportunitiesPageClient.tsx":
/*!******************************************************************!*\
  !*** ./src/components/opportunities/OpportunitiesPageClient.tsx ***!
  \******************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpportunitiesPageClient: function() { return /* binding */ OpportunitiesPageClient; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./src/lib/utils/index.ts\");\n/* harmony import */ var _lib_contentstack_personalize__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/contentstack/personalize */ \"(app-pages-browser)/./src/lib/contentstack/personalize.ts\");\n/* harmony import */ var _OpportunityFilters__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OpportunityFilters */ \"(app-pages-browser)/./src/components/opportunities/OpportunityFilters.tsx\");\n/* harmony import */ var _OpportunityList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./OpportunityList */ \"(app-pages-browser)/./src/components/opportunities/OpportunityList.tsx\");\n/* harmony import */ var _LocationFilter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./LocationFilter */ \"(app-pages-browser)/./src/components/opportunities/LocationFilter.tsx\");\n/* harmony import */ var _OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./OpportunitiesPage.module.css */ \"(app-pages-browser)/./src/components/opportunities/OpportunitiesPage.module.css\");\n/* harmony import */ var _OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8__);\n/* __next_internal_client_entry_do_not_use__ OpportunitiesPageClient,default auto */ \nvar _s = $RefreshSig$();\n/**\n * OpportunitiesPageClient Component\n * Client-side wrapper for the opportunities page with filter state management\n * Shows all opportunities by default, filters are optional\n * Includes smart search bar for filtering by text\n */ \n\n\n\n\n\n\n\nfunction OpportunitiesPageClient(param) {\n    let { initialOpportunities, initialTotal, initialPage, pageSize, initialHasMore, initialStatusFilter = \"active\", causes, locations, initialLocation, initialIsVirtual, hasActiveFilters, content } = param;\n    _s();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [isPending, startTransition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useTransition)();\n    const isInitialMount = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // State\n    const [selectedLocation, setSelectedLocation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialLocation);\n    const [isVirtual, setIsVirtual] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialIsVirtual);\n    const [opportunities, setOpportunities] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialOpportunities);\n    const [total, setTotal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialTotal);\n    const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialPage);\n    const [hasMore, setHasMore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialHasMore);\n    const [statusFilter, setStatusFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialStatusFilter);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Search state\n    const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [debouncedSearch, setDebouncedSearch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const searchInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        contributionTypes: [],\n        causes: [],\n        timeFilter: null\n    });\n    // Debounce search input\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setDebouncedSearch(searchQuery);\n        }, 300);\n        return ()=>clearTimeout(timer);\n    }, [\n        searchQuery\n    ]);\n    // Filter opportunities based on search query (client-side)\n    const filteredOpportunities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!debouncedSearch.trim()) {\n            return opportunities;\n        }\n        const query = debouncedSearch.toLowerCase().trim();\n        const searchTerms = query.split(/\\s+/).filter(Boolean);\n        return opportunities.filter((opp)=>{\n            // Build searchable text from opportunity fields\n            const searchableText = [\n                opp.title,\n                opp.summary,\n                opp.city,\n                opp.state,\n                opp.country,\n                opp.organizerName,\n                ...opp.causeSlugs || [],\n                ...opp.contributionTypes || []\n            ].filter(Boolean).join(\" \").toLowerCase();\n            // Check if all search terms are found\n            return searchTerms.every((term)=>searchableText.includes(term));\n        });\n    }, [\n        opportunities,\n        debouncedSearch\n    ]);\n    // Get filtered total\n    const filteredTotal = debouncedSearch.trim() ? filteredOpportunities.length : total;\n    // Check if any filters are active\n    const hasAnyFilters = !!(selectedLocation || isVirtual || filters.contributionTypes.length > 0 || filters.causes.length > 0 || filters.timeFilter || debouncedSearch.trim());\n    // Update URL when filters change\n    const updateUrl = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newLocation, newIsVirtual, newFilters, newPage, newStatusFilter)=>{\n        const params = new URLSearchParams();\n        if (newLocation) params.set(\"location\", newLocation);\n        if (newIsVirtual) params.set(\"virtual\", \"true\");\n        if (newFilters.contributionTypes.length > 0) {\n            params.set(\"types\", newFilters.contributionTypes.join(\",\"));\n        }\n        if (newFilters.causes.length > 0) {\n            params.set(\"causes\", newFilters.causes.join(\",\"));\n        }\n        if (newFilters.timeFilter) {\n            params.set(\"time\", newFilters.timeFilter);\n        }\n        if (newPage > 1) params.set(\"page\", newPage.toString());\n        if (newStatusFilter !== \"active\") params.set(\"status\", newStatusFilter);\n        const queryString = params.toString();\n        const newUrl = queryString ? \"?\".concat(queryString) : \"/opportunities\";\n        startTransition(()=>{\n            router.push(newUrl, {\n                scroll: false\n            });\n        });\n    }, [\n        router\n    ]);\n    // Fetch opportunities when filters change\n    const fetchOpportunities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        setIsLoading(true);\n        try {\n            // Get user attributes for personalization\n            // Priority: from registrations > from client storage > none\n            const registrationAttributes = (0,_lib_contentstack_personalize__WEBPACK_IMPORTED_MODULE_4__.getUserAttributesFromRegistrations)();\n            const clientAttributes = (0,_lib_contentstack_personalize__WEBPACK_IMPORTED_MODULE_4__.getUserAttributesFromClient)();\n            const userAttributes = {\n                ...clientAttributes,\n                ...registrationAttributes\n            };\n            // Build query params for API\n            const params = new URLSearchParams();\n            if (selectedLocation) params.set(\"location\", selectedLocation);\n            if (isVirtual) params.set(\"virtual\", \"true\");\n            if (filters.contributionTypes.length > 0) {\n                params.set(\"types\", filters.contributionTypes.join(\",\"));\n            }\n            if (filters.causes.length > 0) {\n                params.set(\"causes\", filters.causes.join(\",\"));\n            }\n            if (filters.timeFilter) {\n                const dateRange = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.getDateRangeForFilter)(filters.timeFilter);\n                params.set(\"startDate\", dateRange.startDate);\n                if (dateRange.endDate) params.set(\"endDate\", dateRange.endDate);\n            }\n            params.set(\"page\", page.toString());\n            params.set(\"pageSize\", pageSize.toString());\n            params.set(\"sort\", \"date_asc\"); // Always sort by date ascending\n            // Set status based on filter\n            if (statusFilter === \"active\") {\n                params.set(\"status\", \"upcoming,ongoing\");\n            } else {\n                params.set(\"status\", \"completed\");\n            }\n            // Add user attributes for personalization (if available)\n            if (Object.keys(userAttributes).length > 0) {\n                params.set(\"userAttributes\", JSON.stringify(userAttributes));\n            }\n            const response = await fetch(\"/api/opportunities?\".concat(params.toString()));\n            const data = await response.json();\n            setOpportunities(data.opportunities);\n            setTotal(data.total);\n            setHasMore(data.hasMore);\n        } catch (error) {\n            console.error(\"Failed to fetch opportunities:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        page,\n        pageSize,\n        statusFilter,\n        hasAnyFilters\n    ]);\n    // Fetch when dependencies change (but not on initial mount)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Skip initial fetch as we have server-rendered data\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n            // Only skip if all conditions match initial state\n            if (selectedLocation === initialLocation && isVirtual === initialIsVirtual && page === initialPage && statusFilter === initialStatusFilter && filters.contributionTypes.length === 0 && filters.causes.length === 0 && filters.timeFilter === null) {\n                return;\n            }\n        }\n        fetchOpportunities();\n    }, [\n        fetchOpportunities,\n        selectedLocation,\n        isVirtual,\n        initialLocation,\n        initialIsVirtual,\n        initialPage,\n        initialStatusFilter,\n        page,\n        filters,\n        statusFilter\n    ]);\n    // Handle location selection\n    const handleLocationSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(locationSlug) {\n        let virtual = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        setSelectedLocation(locationSlug);\n        setIsVirtual(virtual);\n        setPage(1);\n        updateUrl(locationSlug, virtual, filters, 1, statusFilter);\n    }, [\n        filters,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle filter changes\n    const handleFiltersChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newFilters)=>{\n        setFilters(newFilters);\n        setPage(1);\n        updateUrl(selectedLocation, isVirtual, newFilters, 1, statusFilter);\n    }, [\n        selectedLocation,\n        isVirtual,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle status filter change\n    const handleStatusFilterChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newStatusFilter)=>{\n        setStatusFilter(newStatusFilter);\n        setPage(1);\n        updateUrl(selectedLocation, isVirtual, filters, 1, newStatusFilter);\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        updateUrl\n    ]);\n    // Handle page change\n    const handlePageChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newPage)=>{\n        setPage(newPage);\n        updateUrl(selectedLocation, isVirtual, filters, newPage, statusFilter);\n        // Scroll to top of list\n        window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        });\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle clear filters\n    const handleClearFilters = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const clearedFilters = {\n            contributionTypes: [],\n            causes: [],\n            timeFilter: null\n        };\n        setFilters(clearedFilters);\n        setSelectedLocation(null);\n        setIsVirtual(false);\n        setSearchQuery(\"\");\n        setDebouncedSearch(\"\");\n        setPage(1);\n        updateUrl(null, false, clearedFilters, 1, statusFilter);\n    }, [\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle search input change\n    const handleSearchChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        setSearchQuery(e.target.value);\n    }, []);\n    // Handle search clear\n    const handleSearchClear = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        var _searchInputRef_current;\n        setSearchQuery(\"\");\n        setDebouncedSearch(\"\");\n        (_searchInputRef_current = searchInputRef.current) === null || _searchInputRef_current === void 0 ? void 0 : _searchInputRef_current.focus();\n    }, []);\n    // Get the title based on active filters\n    const getPageTitle = ()=>{\n        if (isVirtual) return \"Virtual Opportunities\";\n        if (selectedLocation) {\n            var _locations_find;\n            const locationName = ((_locations_find = locations.find((l)=>l.slug === selectedLocation)) === null || _locations_find === void 0 ? void 0 : _locations_find.name) || selectedLocation;\n            return \"Opportunities in \".concat(locationName);\n        }\n        return \"Discover Opportunities\";\n    };\n    // Get selected location name\n    const getSelectedLocationName = ()=>{\n        if (isVirtual) return \"Virtual / Remote\";\n        if (selectedLocation) {\n            const location = locations.find((l)=>l.slug === selectedLocation);\n            return (location === null || location === void 0 ? void 0 : location.name) || selectedLocation;\n        }\n        return null;\n    };\n    // Get subtitle/helper text\n    const getSubtitle = ()=>{\n        if (!hasAnyFilters) {\n            return content.subtitle_all || \"Showing all opportunities. Apply filters to narrow results.\";\n        }\n        const activeFilterCount = [\n            selectedLocation ? 1 : 0,\n            isVirtual ? 1 : 0,\n            filters.contributionTypes.length > 0 ? 1 : 0,\n            filters.causes.length > 0 ? 1 : 0,\n            filters.timeFilter ? 1 : 0\n        ].reduce((a, b)=>a + b, 0);\n        return \"\".concat(total, \" opportunity\").concat(total !== 1 ? \"ies\" : \"\", \" found with \").concat(activeFilterCount, \" filter\").concat(activeFilterCount !== 1 ? \"s\" : \"\", \" applied.\");\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().page),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().container),\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().header),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().headerContent),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().title),\n                                    children: getPageTitle()\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 359,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().subtitle),\n                                    children: getSubtitle()\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 360,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 358,\n                            columnNumber: 11\n                        }, this),\n                        hasAnyFilters && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().clearFiltersButton),\n                            onClick: handleClearFilters,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    width: \"18\",\n                                    height: \"18\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    \"aria-hidden\": \"true\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        d: \"M6 18L18 6M6 6l12 12\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 371,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 370,\n                                    columnNumber: 15\n                                }, this),\n                                content.clear_filters_text || \"Clear All Filters\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 365,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 357,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchSection),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchWrapper),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchIcon),\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    \"aria-hidden\": \"true\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                            cx: \"11\",\n                                            cy: \"11\",\n                                            r: \"8\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 392,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            d: \"m21 21-4.35-4.35\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 393,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 381,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    ref: searchInputRef,\n                                    type: \"search\",\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchInput),\n                                    placeholder: content.search_placeholder || \"Search opportunities...\",\n                                    value: searchQuery,\n                                    onChange: handleSearchChange,\n                                    \"aria-label\": \"Search opportunities\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 395,\n                                    columnNumber: 13\n                                }, this),\n                                searchQuery && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchClear),\n                                    onClick: handleSearchClear,\n                                    \"aria-label\": \"Clear search\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        viewBox: \"0 0 24 24\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"2\",\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M18 6 6 18\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                                lineNumber: 420,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"m6 6 12 12\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                                lineNumber: 421,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 411,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 405,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 380,\n                            columnNumber: 11\n                        }, this),\n                        debouncedSearch && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchResults),\n                            children: [\n                                \"Found \",\n                                filteredTotal,\n                                \" result\",\n                                filteredTotal !== 1 ? \"s\" : \"\",\n                                ' for \"',\n                                debouncedSearch,\n                                '\"'\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 427,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 379,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().content),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().sidebar),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().locationSection),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_LocationFilter__WEBPACK_IMPORTED_MODULE_7__.LocationFilter, {\n                                        locations: locations,\n                                        selectedLocation: selectedLocation,\n                                        isVirtual: isVirtual,\n                                        onLocationChange: handleLocationSelect\n                                    }, void 0, false, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 438,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 437,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().otherFilters),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().sidebarTitle),\n                                            children: content.filters_title || \"Filters\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 448,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_OpportunityFilters__WEBPACK_IMPORTED_MODULE_5__.OpportunityFilters, {\n                                            causes: causes,\n                                            filters: filters,\n                                            onFiltersChange: handleFiltersChange,\n                                            layout: \"vertical\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 449,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 447,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 435,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().main),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_OpportunityList__WEBPACK_IMPORTED_MODULE_6__.OpportunityList, {\n                                opportunities: filteredOpportunities,\n                                total: filteredTotal,\n                                page: page,\n                                pageSize: pageSize,\n                                hasMore: hasMore && !debouncedSearch.trim(),\n                                isLoading: isLoading || isPending,\n                                statusFilter: statusFilter,\n                                onStatusFilterChange: handleStatusFilterChange,\n                                onPageChange: handlePageChange,\n                                onClearFilters: handleClearFilters,\n                                showAllMessage: !hasAnyFilters,\n                                selectedLocationName: getSelectedLocationName(),\n                                content: content\n                            }, void 0, false, {\n                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                lineNumber: 460,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 459,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 433,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n            lineNumber: 355,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n        lineNumber: 354,\n        columnNumber: 5\n    }, this);\n}\n_s(OpportunitiesPageClient, \"h7XbT5nUHXTEa3cDYbE9j9HTrsY=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        react__WEBPACK_IMPORTED_MODULE_1__.useTransition\n    ];\n});\n_c = OpportunitiesPageClient;\n/* harmony default export */ __webpack_exports__[\"default\"] = (OpportunitiesPageClient);\nvar _c;\n$RefreshReg$(_c, \"OpportunitiesPageClient\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL29wcG9ydHVuaXRpZXMvT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7Ozs7O0NBS0MsR0FFd0Y7QUFDN0M7QUFTUTtBQUNrRjtBQUNqRTtBQUNqQjtBQUNGO0FBQ0U7QUF1QjdDLFNBQVNlLHdCQUF3QixLQWFUO1FBYlMsRUFDdENDLG9CQUFvQixFQUNwQkMsWUFBWSxFQUNaQyxXQUFXLEVBQ1hDLFFBQVEsRUFDUkMsY0FBYyxFQUNkQyxzQkFBc0IsUUFBUSxFQUM5QkMsTUFBTSxFQUNOQyxTQUFTLEVBQ1RDLGVBQWUsRUFDZkMsZ0JBQWdCLEVBQ2hCQyxnQkFBZ0IsRUFDaEJDLE9BQU8sRUFDc0IsR0FiUzs7SUFjdEMsTUFBTUMsU0FBU3RCLDBEQUFTQTtJQUN4QixNQUFNLENBQUN1QixXQUFXQyxnQkFBZ0IsR0FBRzNCLG9EQUFhQTtJQUNsRCxNQUFNNEIsaUJBQWlCMUIsNkNBQU1BLENBQUM7SUFFOUIsUUFBUTtJQUNSLE1BQU0sQ0FBQzJCLGtCQUFrQkMsb0JBQW9CLEdBQUdqQywrQ0FBUUEsQ0FBZ0J3QjtJQUN4RSxNQUFNLENBQUNVLFdBQVdDLGFBQWEsR0FBR25DLCtDQUFRQSxDQUFDeUI7SUFDM0MsTUFBTSxDQUFDVyxlQUFlQyxpQkFBaUIsR0FBR3JDLCtDQUFRQSxDQUFDZ0I7SUFDbkQsTUFBTSxDQUFDc0IsT0FBT0MsU0FBUyxHQUFHdkMsK0NBQVFBLENBQUNpQjtJQUNuQyxNQUFNLENBQUN1QixNQUFNQyxRQUFRLEdBQUd6QywrQ0FBUUEsQ0FBQ2tCO0lBQ2pDLE1BQU0sQ0FBQ3dCLFNBQVNDLFdBQVcsR0FBRzNDLCtDQUFRQSxDQUFDb0I7SUFDdkMsTUFBTSxDQUFDd0IsY0FBY0MsZ0JBQWdCLEdBQUc3QywrQ0FBUUEsQ0FBeUJxQjtJQUN6RSxNQUFNLENBQUN5QixXQUFXQyxhQUFhLEdBQUcvQywrQ0FBUUEsQ0FB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cnR1bml0aWVzL09wcG9ydHVuaXRpZXNQYWdlQ2xpZW50LnRzeD8zOTc3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuLyoqXG4gKiBPcHBvcnR1bml0aWVzUGFnZUNsaWVudCBDb21wb25lbnRcbiAqIENsaWVudC1zaWRlIHdyYXBwZXIgZm9yIHRoZSBvcHBvcnR1bml0aWVzIHBhZ2Ugd2l0aCBmaWx0ZXIgc3RhdGUgbWFuYWdlbWVudFxuICogU2hvd3MgYWxsIG9wcG9ydHVuaXRpZXMgYnkgZGVmYXVsdCwgZmlsdGVycyBhcmUgb3B0aW9uYWxcbiAqIEluY2x1ZGVzIHNtYXJ0IHNlYXJjaCBiYXIgZm9yIGZpbHRlcmluZyBieSB0ZXh0XG4gKi9cblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVRyYW5zaXRpb24sIHVzZU1lbW8sIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQgdHlwZSB7XG4gIE9wcG9ydHVuaXR5U3VtbWFyeSxcbiAgQ2F1c2VSZWZlcmVuY2UsXG4gIExvY2F0aW9uUmVmZXJlbmNlLFxuICBDb250cmlidXRpb25UeXBlLFxufSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgVGltZUZpbHRlciB9IGZyb20gJ0AvbGliL3V0aWxzJztcbmltcG9ydCB0eXBlIHsgRGlzY292ZXJQYWdlQ29udGVudCB9IGZyb20gJ0AvbGliL2NvbnRlbnRzdGFjayc7XG5pbXBvcnQgeyBnZXREYXRlUmFuZ2VGb3JGaWx0ZXIgfSBmcm9tICdAL2xpYi91dGlscyc7XG5pbXBvcnQgeyBnZXRVc2VyQXR0cmlidXRlc0Zyb21SZWdpc3RyYXRpb25zLCBnZXRVc2VyQXR0cmlidXRlc0Zyb21DbGllbnQsIHR5cGUgVXNlckF0dHJpYnV0ZXMgfSBmcm9tICdAL2xpYi9jb250ZW50c3RhY2svcGVyc29uYWxpemUnO1xuaW1wb3J0IHsgT3Bwb3J0dW5pdHlGaWx0ZXJzIGFzIEZpbHRlcnMgfSBmcm9tICcuL09wcG9ydHVuaXR5RmlsdGVycyc7XG5pbXBvcnQgeyBPcHBvcnR1bml0eUxpc3QgfSBmcm9tICcuL09wcG9ydHVuaXR5TGlzdCc7XG5pbXBvcnQgeyBMb2NhdGlvbkZpbHRlciB9IGZyb20gJy4vTG9jYXRpb25GaWx0ZXInO1xuaW1wb3J0IHN0eWxlcyBmcm9tICcuL09wcG9ydHVuaXRpZXNQYWdlLm1vZHVsZS5jc3MnO1xuXG5pbnRlcmZhY2UgRmlsdGVyU3RhdGUge1xuICBjb250cmlidXRpb25UeXBlczogQ29udHJpYnV0aW9uVHlwZVtdO1xuICBjYXVzZXM6IHN0cmluZ1tdO1xuICB0aW1lRmlsdGVyOiBUaW1lRmlsdGVyIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIE9wcG9ydHVuaXRpZXNQYWdlQ2xpZW50UHJvcHMge1xuICBpbml0aWFsT3Bwb3J0dW5pdGllczogT3Bwb3J0dW5pdHlTdW1tYXJ5W107XG4gIGluaXRpYWxUb3RhbDogbnVtYmVyO1xuICBpbml0aWFsUGFnZTogbnVtYmVyO1xuICBwYWdlU2l6ZTogbnVtYmVyO1xuICBpbml0aWFsSGFzTW9yZTogYm9vbGVhbjtcbiAgaW5pdGlhbFN0YXR1c0ZpbHRlcj86ICdhY3RpdmUnIHwgJ2NvbXBsZXRlZCc7XG4gIGNhdXNlczogQ2F1c2VSZWZlcmVuY2VbXTtcbiAgbG9jYXRpb25zOiBMb2NhdGlvblJlZmVyZW5jZVtdO1xuICBpbml0aWFsTG9jYXRpb246IHN0cmluZyB8IG51bGw7XG4gIGluaXRpYWxJc1ZpcnR1YWw6IGJvb2xlYW47XG4gIGhhc0FjdGl2ZUZpbHRlcnM6IGJvb2xlYW47XG4gIGNvbnRlbnQ6IERpc2NvdmVyUGFnZUNvbnRlbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBPcHBvcnR1bml0aWVzUGFnZUNsaWVudCh7XG4gIGluaXRpYWxPcHBvcnR1bml0aWVzLFxuICBpbml0aWFsVG90YWwsXG4gIGluaXRpYWxQYWdlLFxuICBwYWdlU2l6ZSxcbiAgaW5pdGlhbEhhc01vcmUsXG4gIGluaXRpYWxTdGF0dXNGaWx0ZXIgPSAnYWN0aXZlJyxcbiAgY2F1c2VzLFxuICBsb2NhdGlvbnMsXG4gIGluaXRpYWxMb2NhdGlvbixcbiAgaW5pdGlhbElzVmlydHVhbCxcbiAgaGFzQWN0aXZlRmlsdGVycyxcbiAgY29udGVudCxcbn06IE9wcG9ydHVuaXRpZXNQYWdlQ2xpZW50UHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IFtpc1BlbmRpbmcsIHN0YXJ0VHJhbnNpdGlvbl0gPSB1c2VUcmFuc2l0aW9uKCk7XG4gIGNvbnN0IGlzSW5pdGlhbE1vdW50ID0gdXNlUmVmKHRydWUpO1xuXG4gIC8vIFN0YXRlXG4gIGNvbnN0IFtzZWxlY3RlZExvY2F0aW9uLCBzZXRTZWxlY3RlZExvY2F0aW9uXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KGluaXRpYWxMb2NhdGlvbik7XG4gIGNvbnN0IFtpc1ZpcnR1YWwsIHNldElzVmlydHVhbF0gPSB1c2VTdGF0ZShpbml0aWFsSXNWaXJ0dWFsKTtcbiAgY29uc3QgW29wcG9ydHVuaXRpZXMsIHNldE9wcG9ydHVuaXRpZXNdID0gdXNlU3RhdGUoaW5pdGlhbE9wcG9ydHVuaXRpZXMpO1xuICBjb25zdCBbdG90YWwsIHNldFRvdGFsXSA9IHVzZVN0YXRlKGluaXRpYWxUb3RhbCk7XG4gIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IHVzZVN0YXRlKGluaXRpYWxQYWdlKTtcbiAgY29uc3QgW2hhc01vcmUsIHNldEhhc01vcmVdID0gdXNlU3RhdGUoaW5pdGlhbEhhc01vcmUpO1xuICBjb25zdCBbc3RhdHVzRmlsdGVyLCBzZXRTdGF0dXNGaWx0ZXJdID0gdXNlU3RhdGU8J2FjdGl2ZScgfCAnY29tcGxldGVkJz4oaW5pdGlhbFN0YXR1c0ZpbHRlcik7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gU2VhcmNoIHN0YXRlXG4gIGNvbnN0IFtzZWFyY2hRdWVyeSwgc2V0U2VhcmNoUXVlcnldID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZGVib3VuY2VkU2VhcmNoLCBzZXREZWJvdW5jZWRTZWFyY2hdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBzZWFyY2hJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcblxuICBjb25zdCBbZmlsdGVycywgc2V0RmlsdGVyc10gPSB1c2VTdGF0ZTxGaWx0ZXJTdGF0ZT4oe1xuICAgIGNvbnRyaWJ1dGlvblR5cGVzOiBbXSxcbiAgICBjYXVzZXM6IFtdLFxuICAgIHRpbWVGaWx0ZXI6IG51bGwsXG4gIH0pO1xuXG4gIC8vIERlYm91bmNlIHNlYXJjaCBpbnB1dFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXREZWJvdW5jZWRTZWFyY2goc2VhcmNoUXVlcnkpO1xuICAgIH0sIDMwMCk7XG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XG4gIH0sIFtzZWFyY2hRdWVyeV0pO1xuXG4gIC8vIEZpbHRlciBvcHBvcnR1bml0aWVzIGJhc2VkIG9uIHNlYXJjaCBxdWVyeSAoY2xpZW50LXNpZGUpXG4gIGNvbnN0IGZpbHRlcmVkT3Bwb3J0dW5pdGllcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghZGVib3VuY2VkU2VhcmNoLnRyaW0oKSkge1xuICAgICAgcmV0dXJuIG9wcG9ydHVuaXRpZXM7XG4gICAgfVxuXG4gICAgY29uc3QgcXVlcnkgPSBkZWJvdW5jZWRTZWFyY2gudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgY29uc3Qgc2VhcmNoVGVybXMgPSBxdWVyeS5zcGxpdCgvXFxzKy8pLmZpbHRlcihCb29sZWFuKTtcblxuICAgIHJldHVybiBvcHBvcnR1bml0aWVzLmZpbHRlcigob3BwKSA9PiB7XG4gICAgICAvLyBCdWlsZCBzZWFyY2hhYmxlIHRleHQgZnJvbSBvcHBvcnR1bml0eSBmaWVsZHNcbiAgICAgIGNvbnN0IHNlYXJjaGFibGVUZXh0ID0gW1xuICAgICAgICBvcHAudGl0bGUsXG4gICAgICAgIG9wcC5zdW1tYXJ5LFxuICAgICAgICBvcHAuY2l0eSxcbiAgICAgICAgb3BwLnN0YXRlLFxuICAgICAgICBvcHAuY291bnRyeSxcbiAgICAgICAgb3BwLm9yZ2FuaXplck5hbWUsXG4gICAgICAgIC4uLihvcHAuY2F1c2VTbHVncyB8fCBbXSksXG4gICAgICAgIC4uLihvcHAuY29udHJpYnV0aW9uVHlwZXMgfHwgW10pLFxuICAgICAgXVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgIC5qb2luKCcgJylcbiAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGFsbCBzZWFyY2ggdGVybXMgYXJlIGZvdW5kXG4gICAgICByZXR1cm4gc2VhcmNoVGVybXMuZXZlcnkoKHRlcm0pID0+IHNlYXJjaGFibGVUZXh0LmluY2x1ZGVzKHRlcm0pKTtcbiAgICB9KTtcbiAgfSwgW29wcG9ydHVuaXRpZXMsIGRlYm91bmNlZFNlYXJjaF0pO1xuXG4gIC8vIEdldCBmaWx0ZXJlZCB0b3RhbFxuICBjb25zdCBmaWx0ZXJlZFRvdGFsID0gZGVib3VuY2VkU2VhcmNoLnRyaW0oKSA/IGZpbHRlcmVkT3Bwb3J0dW5pdGllcy5sZW5ndGggOiB0b3RhbDtcblxuICAvLyBDaGVjayBpZiBhbnkgZmlsdGVycyBhcmUgYWN0aXZlXG4gIGNvbnN0IGhhc0FueUZpbHRlcnMgPSAhIShcbiAgICBzZWxlY3RlZExvY2F0aW9uIHx8XG4gICAgaXNWaXJ0dWFsIHx8XG4gICAgZmlsdGVycy5jb250cmlidXRpb25UeXBlcy5sZW5ndGggPiAwIHx8XG4gICAgZmlsdGVycy5jYXVzZXMubGVuZ3RoID4gMCB8fFxuICAgIGZpbHRlcnMudGltZUZpbHRlciB8fFxuICAgIGRlYm91bmNlZFNlYXJjaC50cmltKClcbiAgKTtcblxuICAvLyBVcGRhdGUgVVJMIHdoZW4gZmlsdGVycyBjaGFuZ2VcbiAgY29uc3QgdXBkYXRlVXJsID0gdXNlQ2FsbGJhY2soXG4gICAgKG5ld0xvY2F0aW9uOiBzdHJpbmcgfCBudWxsLCBuZXdJc1ZpcnR1YWw6IGJvb2xlYW4sIG5ld0ZpbHRlcnM6IEZpbHRlclN0YXRlLCBuZXdQYWdlOiBudW1iZXIsIG5ld1N0YXR1c0ZpbHRlcjogJ2FjdGl2ZScgfCAnY29tcGxldGVkJykgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXG4gICAgICBpZiAobmV3TG9jYXRpb24pIHBhcmFtcy5zZXQoJ2xvY2F0aW9uJywgbmV3TG9jYXRpb24pO1xuICAgICAgaWYgKG5ld0lzVmlydHVhbCkgcGFyYW1zLnNldCgndmlydHVhbCcsICd0cnVlJyk7XG4gICAgICBpZiAobmV3RmlsdGVycy5jb250cmlidXRpb25UeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3R5cGVzJywgbmV3RmlsdGVycy5jb250cmlidXRpb25UeXBlcy5qb2luKCcsJykpO1xuICAgICAgfVxuICAgICAgaWYgKG5ld0ZpbHRlcnMuY2F1c2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgnY2F1c2VzJywgbmV3RmlsdGVycy5jYXVzZXMuam9pbignLCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXdGaWx0ZXJzLnRpbWVGaWx0ZXIpIHtcbiAgICAgICAgcGFyYW1zLnNldCgndGltZScsIG5ld0ZpbHRlcnMudGltZUZpbHRlcik7XG4gICAgICB9XG4gICAgICBpZiAobmV3UGFnZSA+IDEpIHBhcmFtcy5zZXQoJ3BhZ2UnLCBuZXdQYWdlLnRvU3RyaW5nKCkpO1xuICAgICAgaWYgKG5ld1N0YXR1c0ZpbHRlciAhPT0gJ2FjdGl2ZScpIHBhcmFtcy5zZXQoJ3N0YXR1cycsIG5ld1N0YXR1c0ZpbHRlcik7XG5cbiAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgICBjb25zdCBuZXdVcmwgPSBxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogJy9vcHBvcnR1bml0aWVzJztcblxuICAgICAgc3RhcnRUcmFuc2l0aW9uKCgpID0+IHtcbiAgICAgICAgcm91dGVyLnB1c2gobmV3VXJsLCB7IHNjcm9sbDogZmFsc2UgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtyb3V0ZXJdXG4gICk7XG5cbiAgLy8gRmV0Y2ggb3Bwb3J0dW5pdGllcyB3aGVuIGZpbHRlcnMgY2hhbmdlXG4gIGNvbnN0IGZldGNoT3Bwb3J0dW5pdGllcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHVzZXIgYXR0cmlidXRlcyBmb3IgcGVyc29uYWxpemF0aW9uXG4gICAgICAvLyBQcmlvcml0eTogZnJvbSByZWdpc3RyYXRpb25zID4gZnJvbSBjbGllbnQgc3RvcmFnZSA+IG5vbmVcbiAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbkF0dHJpYnV0ZXMgPSBnZXRVc2VyQXR0cmlidXRlc0Zyb21SZWdpc3RyYXRpb25zKCk7XG4gICAgICBjb25zdCBjbGllbnRBdHRyaWJ1dGVzID0gZ2V0VXNlckF0dHJpYnV0ZXNGcm9tQ2xpZW50KCk7XG4gICAgICBjb25zdCB1c2VyQXR0cmlidXRlczogVXNlckF0dHJpYnV0ZXMgPSB7XG4gICAgICAgIC4uLmNsaWVudEF0dHJpYnV0ZXMsXG4gICAgICAgIC4uLnJlZ2lzdHJhdGlvbkF0dHJpYnV0ZXMsIC8vIFJlZ2lzdHJhdGlvbiBhdHRyaWJ1dGVzIHRha2UgcHJpb3JpdHlcbiAgICAgIH07XG5cbiAgICAgIC8vIEJ1aWxkIHF1ZXJ5IHBhcmFtcyBmb3IgQVBJXG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICBcbiAgICAgIGlmIChzZWxlY3RlZExvY2F0aW9uKSBwYXJhbXMuc2V0KCdsb2NhdGlvbicsIHNlbGVjdGVkTG9jYXRpb24pO1xuICAgICAgaWYgKGlzVmlydHVhbCkgcGFyYW1zLnNldCgndmlydHVhbCcsICd0cnVlJyk7XG4gICAgICBpZiAoZmlsdGVycy5jb250cmlidXRpb25UeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3R5cGVzJywgZmlsdGVycy5jb250cmlidXRpb25UeXBlcy5qb2luKCcsJykpO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMuY2F1c2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgnY2F1c2VzJywgZmlsdGVycy5jYXVzZXMuam9pbignLCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLnRpbWVGaWx0ZXIpIHtcbiAgICAgICAgY29uc3QgZGF0ZVJhbmdlID0gZ2V0RGF0ZVJhbmdlRm9yRmlsdGVyKGZpbHRlcnMudGltZUZpbHRlcik7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3N0YXJ0RGF0ZScsIGRhdGVSYW5nZS5zdGFydERhdGUpO1xuICAgICAgICBpZiAoZGF0ZVJhbmdlLmVuZERhdGUpIHBhcmFtcy5zZXQoJ2VuZERhdGUnLCBkYXRlUmFuZ2UuZW5kRGF0ZSk7XG4gICAgICB9XG4gICAgICBwYXJhbXMuc2V0KCdwYWdlJywgcGFnZS50b1N0cmluZygpKTtcbiAgICAgIHBhcmFtcy5zZXQoJ3BhZ2VTaXplJywgcGFnZVNpemUudG9TdHJpbmcoKSk7XG4gICAgICBwYXJhbXMuc2V0KCdzb3J0JywgJ2RhdGVfYXNjJyk7IC8vIEFsd2F5cyBzb3J0IGJ5IGRhdGUgYXNjZW5kaW5nXG4gICAgICAvLyBTZXQgc3RhdHVzIGJhc2VkIG9uIGZpbHRlclxuICAgICAgaWYgKHN0YXR1c0ZpbHRlciA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgcGFyYW1zLnNldCgnc3RhdHVzJywgJ3VwY29taW5nLG9uZ29pbmcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3N0YXR1cycsICdjb21wbGV0ZWQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHVzZXIgYXR0cmlidXRlcyBmb3IgcGVyc29uYWxpemF0aW9uIChpZiBhdmFpbGFibGUpXG4gICAgICBpZiAoT2JqZWN0LmtleXModXNlckF0dHJpYnV0ZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgndXNlckF0dHJpYnV0ZXMnLCBKU09OLnN0cmluZ2lmeSh1c2VyQXR0cmlidXRlcykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL29wcG9ydHVuaXRpZXM/JHtwYXJhbXMudG9TdHJpbmcoKX1gKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIHNldE9wcG9ydHVuaXRpZXMoZGF0YS5vcHBvcnR1bml0aWVzKTtcbiAgICAgIHNldFRvdGFsKGRhdGEudG90YWwpO1xuICAgICAgc2V0SGFzTW9yZShkYXRhLmhhc01vcmUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggb3Bwb3J0dW5pdGllczonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBmaWx0ZXJzLCBwYWdlLCBwYWdlU2l6ZSwgc3RhdHVzRmlsdGVyLCBoYXNBbnlGaWx0ZXJzXSk7XG5cbiAgLy8gRmV0Y2ggd2hlbiBkZXBlbmRlbmNpZXMgY2hhbmdlIChidXQgbm90IG9uIGluaXRpYWwgbW91bnQpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2tpcCBpbml0aWFsIGZldGNoIGFzIHdlIGhhdmUgc2VydmVyLXJlbmRlcmVkIGRhdGFcbiAgICBpZiAoaXNJbml0aWFsTW91bnQuY3VycmVudCkge1xuICAgICAgaXNJbml0aWFsTW91bnQuY3VycmVudCA9IGZhbHNlO1xuICAgICAgLy8gT25seSBza2lwIGlmIGFsbCBjb25kaXRpb25zIG1hdGNoIGluaXRpYWwgc3RhdGVcbiAgICAgIGlmIChcbiAgICAgICAgc2VsZWN0ZWRMb2NhdGlvbiA9PT0gaW5pdGlhbExvY2F0aW9uICYmXG4gICAgICAgIGlzVmlydHVhbCA9PT0gaW5pdGlhbElzVmlydHVhbCAmJlxuICAgICAgICBwYWdlID09PSBpbml0aWFsUGFnZSAmJlxuICAgICAgICBzdGF0dXNGaWx0ZXIgPT09IGluaXRpYWxTdGF0dXNGaWx0ZXIgJiZcbiAgICAgICAgZmlsdGVycy5jb250cmlidXRpb25UeXBlcy5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgZmlsdGVycy5jYXVzZXMubGVuZ3RoID09PSAwICYmXG4gICAgICAgIGZpbHRlcnMudGltZUZpbHRlciA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmZXRjaE9wcG9ydHVuaXRpZXMoKTtcbiAgfSwgW2ZldGNoT3Bwb3J0dW5pdGllcywgc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBpbml0aWFsTG9jYXRpb24sIGluaXRpYWxJc1ZpcnR1YWwsIGluaXRpYWxQYWdlLCBpbml0aWFsU3RhdHVzRmlsdGVyLCBwYWdlLCBmaWx0ZXJzLCBzdGF0dXNGaWx0ZXJdKTtcblxuICAvLyBIYW5kbGUgbG9jYXRpb24gc2VsZWN0aW9uXG4gIGNvbnN0IGhhbmRsZUxvY2F0aW9uU2VsZWN0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGxvY2F0aW9uU2x1Zzogc3RyaW5nIHwgbnVsbCwgdmlydHVhbDogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gICAgICBzZXRTZWxlY3RlZExvY2F0aW9uKGxvY2F0aW9uU2x1Zyk7XG4gICAgICBzZXRJc1ZpcnR1YWwodmlydHVhbCk7XG4gICAgICBzZXRQYWdlKDEpO1xuICAgICAgdXBkYXRlVXJsKGxvY2F0aW9uU2x1ZywgdmlydHVhbCwgZmlsdGVycywgMSwgc3RhdHVzRmlsdGVyKTtcbiAgICB9LFxuICAgIFtmaWx0ZXJzLCBzdGF0dXNGaWx0ZXIsIHVwZGF0ZVVybF1cbiAgKTtcblxuICAvLyBIYW5kbGUgZmlsdGVyIGNoYW5nZXNcbiAgY29uc3QgaGFuZGxlRmlsdGVyc0NoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChuZXdGaWx0ZXJzOiBGaWx0ZXJTdGF0ZSkgPT4ge1xuICAgICAgc2V0RmlsdGVycyhuZXdGaWx0ZXJzKTtcbiAgICAgIHNldFBhZ2UoMSk7XG4gICAgICB1cGRhdGVVcmwoc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBuZXdGaWx0ZXJzLCAxLCBzdGF0dXNGaWx0ZXIpO1xuICAgIH0sXG4gICAgW3NlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgc3RhdHVzRmlsdGVyLCB1cGRhdGVVcmxdXG4gICk7XG5cbiAgLy8gSGFuZGxlIHN0YXR1cyBmaWx0ZXIgY2hhbmdlXG4gIGNvbnN0IGhhbmRsZVN0YXR1c0ZpbHRlckNoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChuZXdTdGF0dXNGaWx0ZXI6ICdhY3RpdmUnIHwgJ2NvbXBsZXRlZCcpID0+IHtcbiAgICAgIHNldFN0YXR1c0ZpbHRlcihuZXdTdGF0dXNGaWx0ZXIpO1xuICAgICAgc2V0UGFnZSgxKTtcbiAgICAgIHVwZGF0ZVVybChzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIGZpbHRlcnMsIDEsIG5ld1N0YXR1c0ZpbHRlcik7XG4gICAgfSxcbiAgICBbc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBmaWx0ZXJzLCB1cGRhdGVVcmxdXG4gICk7XG5cbiAgLy8gSGFuZGxlIHBhZ2UgY2hhbmdlXG4gIGNvbnN0IGhhbmRsZVBhZ2VDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAobmV3UGFnZTogbnVtYmVyKSA9PiB7XG4gICAgICBzZXRQYWdlKG5ld1BhZ2UpO1xuICAgICAgdXBkYXRlVXJsKHNlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgZmlsdGVycywgbmV3UGFnZSwgc3RhdHVzRmlsdGVyKTtcbiAgICAgIC8vIFNjcm9sbCB0byB0b3Agb2YgbGlzdFxuICAgICAgd2luZG93LnNjcm9sbFRvKHsgdG9wOiAwLCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgfSxcbiAgICBbc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBmaWx0ZXJzLCBzdGF0dXNGaWx0ZXIsIHVwZGF0ZVVybF1cbiAgKTtcblxuICAvLyBIYW5kbGUgY2xlYXIgZmlsdGVyc1xuICBjb25zdCBoYW5kbGVDbGVhckZpbHRlcnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgY2xlYXJlZEZpbHRlcnM6IEZpbHRlclN0YXRlID0ge1xuICAgICAgY29udHJpYnV0aW9uVHlwZXM6IFtdLFxuICAgICAgY2F1c2VzOiBbXSxcbiAgICAgIHRpbWVGaWx0ZXI6IG51bGwsXG4gICAgfTtcbiAgICBzZXRGaWx0ZXJzKGNsZWFyZWRGaWx0ZXJzKTtcbiAgICBzZXRTZWxlY3RlZExvY2F0aW9uKG51bGwpO1xuICAgIHNldElzVmlydHVhbChmYWxzZSk7XG4gICAgc2V0U2VhcmNoUXVlcnkoJycpO1xuICAgIHNldERlYm91bmNlZFNlYXJjaCgnJyk7XG4gICAgc2V0UGFnZSgxKTtcbiAgICB1cGRhdGVVcmwobnVsbCwgZmFsc2UsIGNsZWFyZWRGaWx0ZXJzLCAxLCBzdGF0dXNGaWx0ZXIpO1xuICB9LCBbc3RhdHVzRmlsdGVyLCB1cGRhdGVVcmxdKTtcblxuICAvLyBIYW5kbGUgc2VhcmNoIGlucHV0IGNoYW5nZVxuICBjb25zdCBoYW5kbGVTZWFyY2hDaGFuZ2UgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBzZXRTZWFyY2hRdWVyeShlLnRhcmdldC52YWx1ZSk7XG4gIH0sIFtdKTtcblxuICAvLyBIYW5kbGUgc2VhcmNoIGNsZWFyXG4gIGNvbnN0IGhhbmRsZVNlYXJjaENsZWFyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNlYXJjaFF1ZXJ5KCcnKTtcbiAgICBzZXREZWJvdW5jZWRTZWFyY2goJycpO1xuICAgIHNlYXJjaElucHV0UmVmLmN1cnJlbnQ/LmZvY3VzKCk7XG4gIH0sIFtdKTtcblxuICAvLyBHZXQgdGhlIHRpdGxlIGJhc2VkIG9uIGFjdGl2ZSBmaWx0ZXJzXG4gIGNvbnN0IGdldFBhZ2VUaXRsZSA9ICgpID0+IHtcbiAgICBpZiAoaXNWaXJ0dWFsKSByZXR1cm4gJ1ZpcnR1YWwgT3Bwb3J0dW5pdGllcyc7XG4gICAgaWYgKHNlbGVjdGVkTG9jYXRpb24pIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uTmFtZSA9IGxvY2F0aW9ucy5maW5kKGwgPT4gbC5zbHVnID09PSBzZWxlY3RlZExvY2F0aW9uKT8ubmFtZSB8fCBzZWxlY3RlZExvY2F0aW9uO1xuICAgICAgcmV0dXJuIGBPcHBvcnR1bml0aWVzIGluICR7bG9jYXRpb25OYW1lfWA7XG4gICAgfVxuICAgIHJldHVybiAnRGlzY292ZXIgT3Bwb3J0dW5pdGllcyc7XG4gIH07XG5cbiAgLy8gR2V0IHNlbGVjdGVkIGxvY2F0aW9uIG5hbWVcbiAgY29uc3QgZ2V0U2VsZWN0ZWRMb2NhdGlvbk5hbWUgPSAoKSA9PiB7XG4gICAgaWYgKGlzVmlydHVhbCkgcmV0dXJuICdWaXJ0dWFsIC8gUmVtb3RlJztcbiAgICBpZiAoc2VsZWN0ZWRMb2NhdGlvbikge1xuICAgICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbnMuZmluZChsID0+IGwuc2x1ZyA9PT0gc2VsZWN0ZWRMb2NhdGlvbik7XG4gICAgICByZXR1cm4gbG9jYXRpb24/Lm5hbWUgfHwgc2VsZWN0ZWRMb2NhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gR2V0IHN1YnRpdGxlL2hlbHBlciB0ZXh0XG4gIGNvbnN0IGdldFN1YnRpdGxlID0gKCkgPT4ge1xuICAgIGlmICghaGFzQW55RmlsdGVycykge1xuICAgICAgcmV0dXJuIGNvbnRlbnQuc3VidGl0bGVfYWxsIHx8ICdTaG93aW5nIGFsbCBvcHBvcnR1bml0aWVzLiBBcHBseSBmaWx0ZXJzIHRvIG5hcnJvdyByZXN1bHRzLic7XG4gICAgfVxuICAgIGNvbnN0IGFjdGl2ZUZpbHRlckNvdW50ID0gW1xuICAgICAgc2VsZWN0ZWRMb2NhdGlvbiA/IDEgOiAwLFxuICAgICAgaXNWaXJ0dWFsID8gMSA6IDAsXG4gICAgICBmaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmxlbmd0aCA+IDAgPyAxIDogMCxcbiAgICAgIGZpbHRlcnMuY2F1c2VzLmxlbmd0aCA+IDAgPyAxIDogMCxcbiAgICAgIGZpbHRlcnMudGltZUZpbHRlciA/IDEgOiAwLFxuICAgIF0ucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gICAgXG4gICAgcmV0dXJuIGAke3RvdGFsfSBvcHBvcnR1bml0eSR7dG90YWwgIT09IDEgPyAnaWVzJyA6ICcnfSBmb3VuZCB3aXRoICR7YWN0aXZlRmlsdGVyQ291bnR9IGZpbHRlciR7YWN0aXZlRmlsdGVyQ291bnQgIT09IDEgPyAncycgOiAnJ30gYXBwbGllZC5gO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5wYWdlfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udGFpbmVyfT5cbiAgICAgICAgey8qIFBhZ2UgSGVhZGVyICovfVxuICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT17c3R5bGVzLmhlYWRlcn0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5oZWFkZXJDb250ZW50fT5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9e3N0eWxlcy50aXRsZX0+e2dldFBhZ2VUaXRsZSgpfTwvaDE+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9e3N0eWxlcy5zdWJ0aXRsZX0+e2dldFN1YnRpdGxlKCl9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIENsZWFyIEZpbHRlcnMgYnV0dG9uIChvbmx5IHNob3cgd2hlbiBmaWx0ZXJzIGFyZSBhY3RpdmUpICovfVxuICAgICAgICAgIHtoYXNBbnlGaWx0ZXJzICYmIChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLmNsZWFyRmlsdGVyc0J1dHRvbn1cbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xlYXJGaWx0ZXJzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZVdpZHRoPVwiMlwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICB7Y29udGVudC5jbGVhcl9maWx0ZXJzX3RleHQgfHwgJ0NsZWFyIEFsbCBGaWx0ZXJzJ31cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgIHsvKiBTZWFyY2ggQmFyICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnNlYXJjaFNlY3Rpb259PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc2VhcmNoV3JhcHBlcn0+XG4gICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnNlYXJjaEljb259XG4gICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjExXCIgY3k9XCIxMVwiIHI9XCI4XCIgLz5cbiAgICAgICAgICAgICAgPHBhdGggZD1cIm0yMSAyMS00LjM1LTQuMzVcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgcmVmPXtzZWFyY2hJbnB1dFJlZn1cbiAgICAgICAgICAgICAgdHlwZT1cInNlYXJjaFwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnNlYXJjaElucHV0fVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Y29udGVudC5zZWFyY2hfcGxhY2Vob2xkZXIgfHwgJ1NlYXJjaCBvcHBvcnR1bml0aWVzLi4uJ31cbiAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFF1ZXJ5fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU2VhcmNoQ2hhbmdlfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiU2VhcmNoIG9wcG9ydHVuaXRpZXNcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHtzZWFyY2hRdWVyeSAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zZWFyY2hDbGVhcn1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZWFyY2hDbGVhcn1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ2xlYXIgc2VhcmNoXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTE4IDYgNiAxOFwiIC8+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBkPVwibTYgNiAxMiAxMlwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7ZGVib3VuY2VkU2VhcmNoICYmIChcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17c3R5bGVzLnNlYXJjaFJlc3VsdHN9PlxuICAgICAgICAgICAgICBGb3VuZCB7ZmlsdGVyZWRUb3RhbH0gcmVzdWx0e2ZpbHRlcmVkVG90YWwgIT09IDEgPyAncycgOiAnJ30gZm9yIFwie2RlYm91bmNlZFNlYXJjaH1cIlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udGVudH0+XG4gICAgICAgICAgey8qIFNpZGViYXIgRmlsdGVycyAqL31cbiAgICAgICAgICA8YXNpZGUgY2xhc3NOYW1lPXtzdHlsZXMuc2lkZWJhcn0+XG4gICAgICAgICAgICB7LyogTG9jYXRpb24gRmlsdGVyIC0gUHJvbWluZW50IFNlY3Rpb24gKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmxvY2F0aW9uU2VjdGlvbn0+XG4gICAgICAgICAgICAgIDxMb2NhdGlvbkZpbHRlclxuICAgICAgICAgICAgICAgIGxvY2F0aW9ucz17bG9jYXRpb25zfVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTG9jYXRpb249e3NlbGVjdGVkTG9jYXRpb259XG4gICAgICAgICAgICAgICAgaXNWaXJ0dWFsPXtpc1ZpcnR1YWx9XG4gICAgICAgICAgICAgICAgb25Mb2NhdGlvbkNoYW5nZT17aGFuZGxlTG9jYXRpb25TZWxlY3R9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIE90aGVyIEZpbHRlcnMgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm90aGVyRmlsdGVyc30+XG4gICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9e3N0eWxlcy5zaWRlYmFyVGl0bGV9Pntjb250ZW50LmZpbHRlcnNfdGl0bGUgfHwgJ0ZpbHRlcnMnfTwvaDI+XG4gICAgICAgICAgICAgIDxGaWx0ZXJzXG4gICAgICAgICAgICAgICAgY2F1c2VzPXtjYXVzZXN9XG4gICAgICAgICAgICAgICAgZmlsdGVycz17ZmlsdGVyc31cbiAgICAgICAgICAgICAgICBvbkZpbHRlcnNDaGFuZ2U9e2hhbmRsZUZpbHRlcnNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9hc2lkZT5cblxuICAgICAgICAgIHsvKiBNYWluIENvbnRlbnQgKi99XG4gICAgICAgICAgPG1haW4gY2xhc3NOYW1lPXtzdHlsZXMubWFpbn0+XG4gICAgICAgICAgICA8T3Bwb3J0dW5pdHlMaXN0XG4gICAgICAgICAgICAgIG9wcG9ydHVuaXRpZXM9e2ZpbHRlcmVkT3Bwb3J0dW5pdGllc31cbiAgICAgICAgICAgICAgdG90YWw9e2ZpbHRlcmVkVG90YWx9XG4gICAgICAgICAgICAgIHBhZ2U9e3BhZ2V9XG4gICAgICAgICAgICAgIHBhZ2VTaXplPXtwYWdlU2l6ZX1cbiAgICAgICAgICAgICAgaGFzTW9yZT17aGFzTW9yZSAmJiAhZGVib3VuY2VkU2VhcmNoLnRyaW0oKX1cbiAgICAgICAgICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmcgfHwgaXNQZW5kaW5nfVxuICAgICAgICAgICAgICBzdGF0dXNGaWx0ZXI9e3N0YXR1c0ZpbHRlcn1cbiAgICAgICAgICAgICAgb25TdGF0dXNGaWx0ZXJDaGFuZ2U9e2hhbmRsZVN0YXR1c0ZpbHRlckNoYW5nZX1cbiAgICAgICAgICAgICAgb25QYWdlQ2hhbmdlPXtoYW5kbGVQYWdlQ2hhbmdlfVxuICAgICAgICAgICAgICBvbkNsZWFyRmlsdGVycz17aGFuZGxlQ2xlYXJGaWx0ZXJzfVxuICAgICAgICAgICAgICBzaG93QWxsTWVzc2FnZT17IWhhc0FueUZpbHRlcnN9XG4gICAgICAgICAgICAgIHNlbGVjdGVkTG9jYXRpb25OYW1lPXtnZXRTZWxlY3RlZExvY2F0aW9uTmFtZSgpfVxuICAgICAgICAgICAgICBjb250ZW50PXtjb250ZW50fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L21haW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE9wcG9ydHVuaXRpZXNQYWdlQ2xpZW50O1xuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VUcmFuc2l0aW9uIiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVJvdXRlciIsImdldERhdGVSYW5nZUZvckZpbHRlciIsImdldFVzZXJBdHRyaWJ1dGVzRnJvbVJlZ2lzdHJhdGlvbnMiLCJnZXRVc2VyQXR0cmlidXRlc0Zyb21DbGllbnQiLCJPcHBvcnR1bml0eUZpbHRlcnMiLCJGaWx0ZXJzIiwiT3Bwb3J0dW5pdHlMaXN0IiwiTG9jYXRpb25GaWx0ZXIiLCJzdHlsZXMiLCJPcHBvcnR1bml0aWVzUGFnZUNsaWVudCIsImluaXRpYWxPcHBvcnR1bml0aWVzIiwiaW5pdGlhbFRvdGFsIiwiaW5pdGlhbFBhZ2UiLCJwYWdlU2l6ZSIsImluaXRpYWxIYXNNb3JlIiwiaW5pdGlhbFN0YXR1c0ZpbHRlciIsImNhdXNlcyIsImxvY2F0aW9ucyIsImluaXRpYWxMb2NhdGlvbiIsImluaXRpYWxJc1ZpcnR1YWwiLCJoYXNBY3RpdmVGaWx0ZXJzIiwiY29udGVudCIsInJvdXRlciIsImlzUGVuZGluZyIsInN0YXJ0VHJhbnNpdGlvbiIsImlzSW5pdGlhbE1vdW50Iiwic2VsZWN0ZWRMb2NhdGlvbiIsInNldFNlbGVjdGVkTG9jYXRpb24iLCJpc1ZpcnR1YWwiLCJzZXRJc1ZpcnR1YWwiLCJvcHBvcnR1bml0aWVzIiwic2V0T3Bwb3J0dW5pdGllcyIsInRvdGFsIiwic2V0VG90YWwiLCJwYWdlIiwic2V0UGFnZSIsImhhc01vcmUiLCJzZXRIYXNNb3JlIiwic3RhdHVzRmlsdGVyIiwic2V0U3RhdHVzRmlsdGVyIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2VhcmNoUXVlcnkiLCJzZXRTZWFyY2hRdWVyeSIsImRlYm91bmNlZFNlYXJjaCIsInNldERlYm91bmNlZFNlYXJjaCIsInNlYXJjaElucHV0UmVmIiwiZmlsdGVycyIsInNldEZpbHRlcnMiLCJjb250cmlidXRpb25UeXBlcyIsInRpbWVGaWx0ZXIiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJmaWx0ZXJlZE9wcG9ydHVuaXRpZXMiLCJ0cmltIiwicXVlcnkiLCJ0b0xvd2VyQ2FzZSIsInNlYXJjaFRlcm1zIiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwib3BwIiwic2VhcmNoYWJsZVRleHQiLCJ0aXRsZSIsInN1bW1hcnkiLCJjaXR5Iiwic3RhdGUiLCJjb3VudHJ5Iiwib3JnYW5pemVyTmFtZSIsImNhdXNlU2x1Z3MiLCJqb2luIiwiZXZlcnkiLCJ0ZXJtIiwiaW5jbHVkZXMiLCJmaWx0ZXJlZFRvdGFsIiwibGVuZ3RoIiwiaGFzQW55RmlsdGVycyIsInVwZGF0ZVVybCIsIm5ld0xvY2F0aW9uIiwibmV3SXNWaXJ0dWFsIiwibmV3RmlsdGVycyIsIm5ld1BhZ2UiLCJuZXdTdGF0dXNGaWx0ZXIiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZXQiLCJ0b1N0cmluZyIsInF1ZXJ5U3RyaW5nIiwibmV3VXJsIiwicHVzaCIsInNjcm9sbCIsImZldGNoT3Bwb3J0dW5pdGllcyIsInJlZ2lzdHJhdGlvbkF0dHJpYnV0ZXMiLCJjbGllbnRBdHRyaWJ1dGVzIiwidXNlckF0dHJpYnV0ZXMiLCJkYXRlUmFuZ2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiT2JqZWN0Iiwia2V5cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJjdXJyZW50IiwiaGFuZGxlTG9jYXRpb25TZWxlY3QiLCJsb2NhdGlvblNsdWciLCJ2aXJ0dWFsIiwiaGFuZGxlRmlsdGVyc0NoYW5nZSIsImhhbmRsZVN0YXR1c0ZpbHRlckNoYW5nZSIsImhhbmRsZVBhZ2VDaGFuZ2UiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsInRvcCIsImJlaGF2aW9yIiwiaGFuZGxlQ2xlYXJGaWx0ZXJzIiwiY2xlYXJlZEZpbHRlcnMiLCJoYW5kbGVTZWFyY2hDaGFuZ2UiLCJlIiwidGFyZ2V0IiwidmFsdWUiLCJoYW5kbGVTZWFyY2hDbGVhciIsImZvY3VzIiwiZ2V0UGFnZVRpdGxlIiwibG9jYXRpb25OYW1lIiwiZmluZCIsImwiLCJzbHVnIiwibmFtZSIsImdldFNlbGVjdGVkTG9jYXRpb25OYW1lIiwibG9jYXRpb24iLCJnZXRTdWJ0aXRsZSIsInN1YnRpdGxlX2FsbCIsImFjdGl2ZUZpbHRlckNvdW50IiwicmVkdWNlIiwiYSIsImIiLCJkaXYiLCJjbGFzc05hbWUiLCJjb250YWluZXIiLCJoZWFkZXIiLCJoZWFkZXJDb250ZW50IiwiaDEiLCJwIiwic3VidGl0bGUiLCJidXR0b24iLCJ0eXBlIiwiY2xlYXJGaWx0ZXJzQnV0dG9uIiwib25DbGljayIsInN2ZyIsIndpZHRoIiwiaGVpZ2h0Iiwidmlld0JveCIsImZpbGwiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsImFyaWEtaGlkZGVuIiwicGF0aCIsImQiLCJjbGVhcl9maWx0ZXJzX3RleHQiLCJzZWFyY2hTZWN0aW9uIiwic2VhcmNoV3JhcHBlciIsInNlYXJjaEljb24iLCJ4bWxucyIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsImNpcmNsZSIsImN4IiwiY3kiLCJyIiwiaW5wdXQiLCJyZWYiLCJzZWFyY2hJbnB1dCIsInBsYWNlaG9sZGVyIiwic2VhcmNoX3BsYWNlaG9sZGVyIiwib25DaGFuZ2UiLCJhcmlhLWxhYmVsIiwic2VhcmNoQ2xlYXIiLCJzZWFyY2hSZXN1bHRzIiwiYXNpZGUiLCJzaWRlYmFyIiwibG9jYXRpb25TZWN0aW9uIiwib25Mb2NhdGlvbkNoYW5nZSIsIm90aGVyRmlsdGVycyIsImgyIiwic2lkZWJhclRpdGxlIiwiZmlsdGVyc190aXRsZSIsIm9uRmlsdGVyc0NoYW5nZSIsImxheW91dCIsIm1haW4iLCJvblN0YXR1c0ZpbHRlckNoYW5nZSIsIm9uUGFnZUNoYW5nZSIsIm9uQ2xlYXJGaWx0ZXJzIiwic2hvd0FsbE1lc3NhZ2UiLCJzZWxlY3RlZExvY2F0aW9uTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/opportunities/OpportunitiesPageClient.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/contentstack/config.ts":
/*!****************************************!*\
  !*** ./src/lib/contentstack/config.ts ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContentTypes: function() { return /* binding */ ContentTypes; },\n/* harmony export */   getApiBaseUrl: function() { return /* binding */ getApiBaseUrl; },\n/* harmony export */   getContentstackConfig: function() { return /* binding */ getContentstackConfig; }\n/* harmony export */ });\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/**\n * Contentstack Configuration\n * Reads environment variables and provides typed configuration\n */ /**\n * Get the base URL for Contentstack API based on region\n */ function getBaseUrl(region) {\n    const regionUrls = {\n        \"na\": \"https://cdn.contentstack.io\",\n        \"eu\": \"https://eu-cdn.contentstack.io\",\n        \"azure-na\": \"https://azure-na-cdn.contentstack.io\",\n        \"azure-eu\": \"https://azure-eu-cdn.contentstack.io\"\n    };\n    return regionUrls[region];\n}\n/**\n * Validate and retrieve Contentstack configuration from environment\n */ function getContentstackConfig() {\n    const apiKey = process.env.CONTENTSTACK_API_KEY;\n    const deliveryToken = process.env.CONTENTSTACK_DELIVERY_TOKEN;\n    const environment = process.env.CONTENTSTACK_ENVIRONMENT;\n    const region = process.env.CONTENTSTACK_REGION || \"na\";\n    const branch = process.env.CONTENTSTACK_BRANCH;\n    if (!apiKey) {\n        throw new Error(\"CONTENTSTACK_API_KEY environment variable is required\");\n    }\n    if (!deliveryToken) {\n        throw new Error(\"CONTENTSTACK_DELIVERY_TOKEN environment variable is required\");\n    }\n    if (!environment) {\n        throw new Error(\"CONTENTSTACK_ENVIRONMENT environment variable is required\");\n    }\n    return {\n        apiKey,\n        deliveryToken,\n        environment,\n        region,\n        branch\n    };\n}\n/**\n * Get the full API base URL for the configured region\n */ function getApiBaseUrl() {\n    const config = getContentstackConfig();\n    return getBaseUrl(config.region);\n}\n/**\n * Content type UIDs in Contentstack\n * These should match your Contentstack content type definitions\n */ const ContentTypes = {\n    OPPORTUNITY: \"opportunity\",\n    ORGANIZER: \"organizer\",\n    CAUSE: \"cause\",\n    LOCATION: \"location\"\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY29udGVudHN0YWNrL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7OztDQUdDLEdBWUQ7O0NBRUMsR0FDRCxTQUFTQSxXQUFXQyxNQUEwQjtJQUM1QyxNQUFNQyxhQUFpRDtRQUNyRCxNQUFNO1FBQ04sTUFBTTtRQUNOLFlBQVk7UUFDWixZQUFZO0lBQ2Q7SUFDQSxPQUFPQSxVQUFVLENBQUNELE9BQU87QUFDM0I7QUFFQTs7Q0FFQyxHQUNNLFNBQVNFO0lBQ2QsTUFBTUMsU0FBU0MsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxvQkFBb0I7SUFDL0MsTUFBTUMsZ0JBQWdCSCxPQUFPQSxDQUFDQyxHQUFHLENBQUNHLDJCQUEyQjtJQUM3RCxNQUFNQyxjQUFjTCxPQUFPQSxDQUFDQyxHQUFHLENBQUNLLHdCQUF3QjtJQUN4RCxNQUFNVixTQUFVSSxPQUFPQSxDQUFDQyxHQUFHLENBQUNNLG1CQUFtQixJQUFJO0lBQ25ELE1BQU1DLFNBQVNSLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ1EsbUJBQW1CO0lBRTlDLElBQUksQ0FBQ1YsUUFBUTtRQUNYLE1BQU0sSUFBSVcsTUFBTTtJQUNsQjtJQUVBLElBQUksQ0FBQ1AsZUFBZTtRQUNsQixNQUFNLElBQUlPLE1BQU07SUFDbEI7SUFFQSxJQUFJLENBQUNMLGFBQWE7UUFDaEIsTUFBTSxJQUFJSyxNQUFNO0lBQ2xCO0lBRUEsT0FBTztRQUNMWDtRQUNBSTtRQUNBRTtRQUNBVDtRQUNBWTtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNHO0lBQ2QsTUFBTUMsU0FBU2Q7SUFDZixPQUFPSCxXQUFXaUIsT0FBT2hCLE1BQU07QUFDakM7QUFFQTs7O0NBR0MsR0FDTSxNQUFNaUIsZUFBZTtJQUMxQkMsYUFBYTtJQUNiQyxXQUFXO0lBQ1hDLE9BQU87SUFDUEMsVUFBVTtBQUNaLEVBQVciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9jb250ZW50c3RhY2svY29uZmlnLnRzPzUzOGEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb250ZW50c3RhY2sgQ29uZmlndXJhdGlvblxuICogUmVhZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFuZCBwcm92aWRlcyB0eXBlZCBjb25maWd1cmF0aW9uXG4gKi9cblxuZXhwb3J0IHR5cGUgQ29udGVudHN0YWNrUmVnaW9uID0gJ25hJyB8ICdldScgfCAnYXp1cmUtbmEnIHwgJ2F6dXJlLWV1JztcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50c3RhY2tDb25maWcge1xuICBhcGlLZXk6IHN0cmluZztcbiAgZGVsaXZlcnlUb2tlbjogc3RyaW5nO1xuICBlbnZpcm9ubWVudDogc3RyaW5nO1xuICByZWdpb246IENvbnRlbnRzdGFja1JlZ2lvbjtcbiAgYnJhbmNoPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYmFzZSBVUkwgZm9yIENvbnRlbnRzdGFjayBBUEkgYmFzZWQgb24gcmVnaW9uXG4gKi9cbmZ1bmN0aW9uIGdldEJhc2VVcmwocmVnaW9uOiBDb250ZW50c3RhY2tSZWdpb24pOiBzdHJpbmcge1xuICBjb25zdCByZWdpb25VcmxzOiBSZWNvcmQ8Q29udGVudHN0YWNrUmVnaW9uLCBzdHJpbmc+ID0ge1xuICAgICduYSc6ICdodHRwczovL2Nkbi5jb250ZW50c3RhY2suaW8nLFxuICAgICdldSc6ICdodHRwczovL2V1LWNkbi5jb250ZW50c3RhY2suaW8nLFxuICAgICdhenVyZS1uYSc6ICdodHRwczovL2F6dXJlLW5hLWNkbi5jb250ZW50c3RhY2suaW8nLFxuICAgICdhenVyZS1ldSc6ICdodHRwczovL2F6dXJlLWV1LWNkbi5jb250ZW50c3RhY2suaW8nLFxuICB9O1xuICByZXR1cm4gcmVnaW9uVXJsc1tyZWdpb25dO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGFuZCByZXRyaWV2ZSBDb250ZW50c3RhY2sgY29uZmlndXJhdGlvbiBmcm9tIGVudmlyb25tZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50c3RhY2tDb25maWcoKTogQ29udGVudHN0YWNrQ29uZmlnIHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQ09OVEVOVFNUQUNLX0FQSV9LRVk7XG4gIGNvbnN0IGRlbGl2ZXJ5VG9rZW4gPSBwcm9jZXNzLmVudi5DT05URU5UU1RBQ0tfREVMSVZFUllfVE9LRU47XG4gIGNvbnN0IGVudmlyb25tZW50ID0gcHJvY2Vzcy5lbnYuQ09OVEVOVFNUQUNLX0VOVklST05NRU5UO1xuICBjb25zdCByZWdpb24gPSAocHJvY2Vzcy5lbnYuQ09OVEVOVFNUQUNLX1JFR0lPTiB8fCAnbmEnKSBhcyBDb250ZW50c3RhY2tSZWdpb247XG4gIGNvbnN0IGJyYW5jaCA9IHByb2Nlc3MuZW52LkNPTlRFTlRTVEFDS19CUkFOQ0g7XG5cbiAgaWYgKCFhcGlLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NPTlRFTlRTVEFDS19BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XG4gIH1cblxuICBpZiAoIWRlbGl2ZXJ5VG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NPTlRFTlRTVEFDS19ERUxJVkVSWV9UT0tFTiBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xuICB9XG5cbiAgaWYgKCFlbnZpcm9ubWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ09OVEVOVFNUQUNLX0VOVklST05NRU5UIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFwaUtleSxcbiAgICBkZWxpdmVyeVRva2VuLFxuICAgIGVudmlyb25tZW50LFxuICAgIHJlZ2lvbixcbiAgICBicmFuY2gsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IHRoZSBmdWxsIEFQSSBiYXNlIFVSTCBmb3IgdGhlIGNvbmZpZ3VyZWQgcmVnaW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcGlCYXNlVXJsKCk6IHN0cmluZyB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldENvbnRlbnRzdGFja0NvbmZpZygpO1xuICByZXR1cm4gZ2V0QmFzZVVybChjb25maWcucmVnaW9uKTtcbn1cblxuLyoqXG4gKiBDb250ZW50IHR5cGUgVUlEcyBpbiBDb250ZW50c3RhY2tcbiAqIFRoZXNlIHNob3VsZCBtYXRjaCB5b3VyIENvbnRlbnRzdGFjayBjb250ZW50IHR5cGUgZGVmaW5pdGlvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbnRlbnRUeXBlcyA9IHtcbiAgT1BQT1JUVU5JVFk6ICdvcHBvcnR1bml0eScsXG4gIE9SR0FOSVpFUjogJ29yZ2FuaXplcicsXG4gIENBVVNFOiAnY2F1c2UnLFxuICBMT0NBVElPTjogJ2xvY2F0aW9uJyxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRUeXBlVWlkID0gKHR5cGVvZiBDb250ZW50VHlwZXMpW2tleW9mIHR5cGVvZiBDb250ZW50VHlwZXNdO1xuIl0sIm5hbWVzIjpbImdldEJhc2VVcmwiLCJyZWdpb24iLCJyZWdpb25VcmxzIiwiZ2V0Q29udGVudHN0YWNrQ29uZmlnIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkNPTlRFTlRTVEFDS19BUElfS0VZIiwiZGVsaXZlcnlUb2tlbiIsIkNPTlRFTlRTVEFDS19ERUxJVkVSWV9UT0tFTiIsImVudmlyb25tZW50IiwiQ09OVEVOVFNUQUNLX0VOVklST05NRU5UIiwiQ09OVEVOVFNUQUNLX1JFR0lPTiIsImJyYW5jaCIsIkNPTlRFTlRTVEFDS19CUkFOQ0giLCJFcnJvciIsImdldEFwaUJhc2VVcmwiLCJjb25maWciLCJDb250ZW50VHlwZXMiLCJPUFBPUlRVTklUWSIsIk9SR0FOSVpFUiIsIkNBVVNFIiwiTE9DQVRJT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/contentstack/config.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/contentstack/personalize.ts":
/*!*********************************************!*\
  !*** ./src/lib/contentstack/personalize.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPersonalizedContent: function() { return /* binding */ getPersonalizedContent; },\n/* harmony export */   getPersonalizedOpportunities: function() { return /* binding */ getPersonalizedOpportunities; },\n/* harmony export */   getUserAttributesFromClient: function() { return /* binding */ getUserAttributesFromClient; },\n/* harmony export */   getUserAttributesFromRegistrations: function() { return /* binding */ getUserAttributesFromRegistrations; },\n/* harmony export */   personalizeOpportunityOrder: function() { return /* binding */ personalizeOpportunityOrder; },\n/* harmony export */   storeUserAttributes: function() { return /* binding */ storeUserAttributes; }\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(app-pages-browser)/./src/lib/contentstack/config.ts\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/**\n * Contentstack Personalize Integration\n * \n * Provides utilities for fetching personalized content based on user attributes\n * \n * Setup:\n * 1. Enable Personalize in your Contentstack stack\n * 2. Add CONTENTSTACK_PERSONALIZE_API_KEY to .env.local\n * 3. Create user segments in Contentstack Personalize\n * 4. Add Personalize fields to your content types\n */ \n/**\n * Get personalized content from Contentstack\n * \n * @param contentTypeUid - Content type UID (e.g., 'landing_page')\n * @param userAttributes - User attributes for personalization\n * @param options - Additional options\n * @returns Personalized content entry\n */ async function getPersonalizedContent(contentTypeUid, userAttributes) {\n    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n    const config = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getContentstackConfig)();\n    const baseUrl = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getApiBaseUrl)();\n    const environment = options.environment || config.environment;\n    const locale = options.locale || \"en-us\";\n    // Build Personalize API URL\n    const personalizeApiKey = process.env.CONTENTSTACK_PERSONALIZE_API_KEY;\n    if (!personalizeApiKey) {\n        console.warn(\"CONTENTSTACK_PERSONALIZE_API_KEY not set. Returning default content.\");\n        // Fallback to regular content fetch\n        return getDefaultContent(contentTypeUid, options.entryUid, environment, locale);\n    }\n    const endpoint = options.entryUid ? \"/content_types/\".concat(contentTypeUid, \"/entries/\").concat(options.entryUid) : \"/content_types/\".concat(contentTypeUid, \"/entries\");\n    const url = \"\".concat(baseUrl, \"/v3\").concat(endpoint, \"?environment=\").concat(environment, \"&locale=\").concat(locale);\n    // Build headers with Personalize API key\n    const headers = {\n        \"api_key\": config.apiKey,\n        \"access_token\": config.deliveryToken,\n        \"personalization_api_key\": personalizeApiKey,\n        \"Content-Type\": \"application/json\"\n    };\n    // Add user attributes as query parameters or headers\n    // Contentstack Personalize accepts user attributes in the request\n    const searchParams = new URLSearchParams();\n    if (userAttributes) {\n        // Add user attributes as query parameters\n        Object.entries(userAttributes).forEach((param)=>{\n            let [key, value] = param;\n            if (value !== undefined) {\n                if (Array.isArray(value)) {\n                    value.forEach((v)=>searchParams.append(\"user_attributes[\".concat(key, \"][]\"), String(v)));\n                } else {\n                    searchParams.append(\"user_attributes[\".concat(key, \"]\"), String(value));\n                }\n            }\n        });\n    }\n    const fullUrl = searchParams.toString() ? \"\".concat(url, \"&\").concat(searchParams.toString()) : url;\n    try {\n        var _data_entries;\n        const response = await fetch(fullUrl, {\n            headers,\n            next: {\n                revalidate: 60\n            }\n        });\n        if (!response.ok) {\n            console.warn(\"Personalize API error: \".concat(response.status, \". Falling back to default content.\"));\n            return getDefaultContent(contentTypeUid, options.entryUid, environment, locale);\n        }\n        const data = await response.json();\n        return (options.entryUid ? data.entry : (_data_entries = data.entries) === null || _data_entries === void 0 ? void 0 : _data_entries[0]) || data;\n    } catch (error) {\n        console.error(\"Error fetching personalized content:\", error);\n        // Fallback to default content\n        return getDefaultContent(contentTypeUid, options.entryUid, environment, locale);\n    }\n}\n/**\n * Fallback: Get default (non-personalized) content\n */ async function getDefaultContent(contentTypeUid, entryUid, environment, locale) {\n    var _data_entries;\n    const config = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getContentstackConfig)();\n    const baseUrl = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getApiBaseUrl)();\n    const endpoint = entryUid ? \"/content_types/\".concat(contentTypeUid, \"/entries/\").concat(entryUid) : \"/content_types/\".concat(contentTypeUid, \"/entries\");\n    const url = \"\".concat(baseUrl, \"/v3\").concat(endpoint, \"?environment=\").concat(environment, \"&locale=\").concat(locale);\n    const response = await fetch(url, {\n        headers: {\n            \"api_key\": config.apiKey,\n            \"access_token\": config.deliveryToken\n        },\n        next: {\n            revalidate: 60\n        }\n    });\n    if (!response.ok) {\n        throw new Error(\"Failed to fetch default content: \".concat(response.status));\n    }\n    const data = await response.json();\n    return (entryUid ? data.entry : (_data_entries = data.entries) === null || _data_entries === void 0 ? void 0 : _data_entries[0]) || data;\n}\n/**\n * Get user attributes from client-side storage (localStorage, cookies, etc.)\n * This is a helper function for client components\n */ function getUserAttributesFromClient() {\n    if (false) {}\n    const attributes = {};\n    // Get from localStorage\n    const storedCity = localStorage.getItem(\"userCity\");\n    const storedInterests = localStorage.getItem(\"userInterests\");\n    const storedUserType = localStorage.getItem(\"userType\");\n    if (storedCity) attributes.city = storedCity;\n    if (storedInterests) {\n        try {\n            attributes.interests = JSON.parse(storedInterests);\n        } catch (e) {\n        // Ignore parse errors\n        }\n    }\n    if (storedUserType) {\n        attributes.userType = storedUserType;\n    }\n    // Get from cookies (if using a cookie library)\n    // You can add cookie parsing here if needed\n    return attributes;\n}\n/**\n * Store user attributes in client-side storage\n */ function storeUserAttributes(attributes) {\n    if (false) {}\n    if (attributes.city) {\n        localStorage.setItem(\"userCity\", attributes.city);\n    }\n    if (attributes.interests) {\n        localStorage.setItem(\"userInterests\", JSON.stringify(attributes.interests));\n    }\n    if (attributes.userType) {\n        localStorage.setItem(\"userType\", attributes.userType);\n    }\n}\n/**\n * Personalize opportunity ordering based on user attributes\n * Priority:\n * 1. Location match (city, state, country)\n * 2. Cause match (causes user has registered for)\n * 3. Default order (date ascending)\n */ function personalizeOpportunityOrder(opportunities, userAttributes) {\n    var _userAttributes_city, _userAttributes_state, _userAttributes_country;\n    if (!userAttributes || opportunities.length === 0) {\n        return opportunities;\n    }\n    const userCity = (_userAttributes_city = userAttributes.city) === null || _userAttributes_city === void 0 ? void 0 : _userAttributes_city.toLowerCase();\n    const userState = (_userAttributes_state = userAttributes.state) === null || _userAttributes_state === void 0 ? void 0 : _userAttributes_state.toLowerCase();\n    const userCountry = (_userAttributes_country = userAttributes.country) === null || _userAttributes_country === void 0 ? void 0 : _userAttributes_country.toLowerCase();\n    const userPreferredCauses = (userAttributes.preferredCauses || userAttributes.interests || []).map((c)=>c.toLowerCase());\n    // Score each opportunity based on relevance\n    const scoredOpportunities = opportunities.map((opp)=>{\n        var _opp_city, _opp_state, _opp_country;\n        let score = 0;\n        // Location scoring (higher priority)\n        if (userCity && ((_opp_city = opp.city) === null || _opp_city === void 0 ? void 0 : _opp_city.toLowerCase()) === userCity) {\n            score += 100; // Exact city match\n        } else if (userState && ((_opp_state = opp.state) === null || _opp_state === void 0 ? void 0 : _opp_state.toLowerCase()) === userState) {\n            score += 50; // State match\n        } else if (userCountry && ((_opp_country = opp.country) === null || _opp_country === void 0 ? void 0 : _opp_country.toLowerCase()) === userCountry) {\n            score += 25; // Country match\n        }\n        // Cause scoring (secondary priority)\n        if (opp.causeSlugs && opp.causeSlugs.length > 0 && userPreferredCauses.length > 0) {\n            const matchingCauses = opp.causeSlugs.filter((causeSlug)=>userPreferredCauses.some((pref)=>causeSlug.toLowerCase().includes(pref) || pref.includes(causeSlug.toLowerCase())));\n            score += matchingCauses.length * 10; // 10 points per matching cause\n        }\n        return {\n            opportunity: opp,\n            score\n        };\n    });\n    // Sort by score (descending), then by date (ascending)\n    scoredOpportunities.sort((a, b)=>{\n        if (b.score !== a.score) {\n            return b.score - a.score; // Higher score first\n        }\n        // If scores are equal, sort by date (earlier dates first)\n        return new Date(a.opportunity.startDate).getTime() - new Date(b.opportunity.startDate).getTime();\n    });\n    return scoredOpportunities.map((item)=>item.opportunity);\n}\n/**\n * Extract user attributes from registrations\n * Gets location and preferred causes from user's registration history\n */ function getUserAttributesFromRegistrations() {\n    if (false) {}\n    try {\n        // Import dynamically to avoid SSR issues\n        const { getRegistrations } = __webpack_require__(/*! @/lib/user */ \"(app-pages-browser)/./src/lib/user/index.ts\");\n        const registrations = getRegistrations();\n        if (registrations.length === 0) {\n            return {};\n        }\n        const attributes = {};\n        // Extract most common location from registrations\n        const locations = registrations.map((r)=>r.opportunityLocation).filter(Boolean);\n        if (locations.length > 0) {\n            // Try to extract city from location string (format: \"City, State, Country\")\n            const mostCommonLocation = locations[0];\n            const parts = mostCommonLocation.split(\",\").map((p)=>p.trim());\n            if (parts.length >= 1) attributes.city = parts[0];\n            if (parts.length >= 2) attributes.state = parts[1];\n            if (parts.length >= 3) attributes.country = parts[2];\n        }\n        // Extract preferred causes from opportunity slugs/titles\n        // This is a simplified version - you might want to map opportunity slugs to cause slugs\n        const causeKeywords = [];\n        registrations.forEach((reg)=>{\n            const title = reg.opportunityTitle.toLowerCase();\n            const causes = [\n                \"education\",\n                \"environment\",\n                \"healthcare\",\n                \"animal\",\n                \"community\",\n                \"hunger\"\n            ];\n            causes.forEach((cause)=>{\n                if (title.includes(cause) && !causeKeywords.includes(cause)) {\n                    causeKeywords.push(cause);\n                }\n            });\n        });\n        if (causeKeywords.length > 0) {\n            attributes.preferredCauses = causeKeywords;\n            attributes.interests = causeKeywords;\n        }\n        // Set user type based on registration count\n        if (registrations.length >= 5) {\n            attributes.userType = \"active\";\n        } else if (registrations.length >= 1) {\n            attributes.userType = \"returning\";\n        }\n        attributes.registrationCount = registrations.length;\n        return attributes;\n    } catch (error) {\n        console.error(\"Error extracting user attributes from registrations:\", error);\n        return {};\n    }\n}\n/**\n * Get personalized opportunities based on user attributes\n * This combines regular opportunity fetching with personalization\n */ async function getPersonalizedOpportunities(userAttributes, filters) {\n    // First, get personalized content for opportunity recommendations\n    // Then fetch actual opportunities based on personalized preferences\n    // This is a placeholder - implement based on your Personalize setup\n    // You might want to:\n    // 1. Get personalized cause preferences\n    // 2. Get personalized location preferences\n    // 3. Fetch opportunities matching those preferences\n    return [];\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY29udGVudHN0YWNrL3BlcnNvbmFsaXplLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Q0FVQyxHQUUrRDtBQXVDaEU7Ozs7Ozs7Q0FPQyxHQUNNLGVBQWVFLHVCQUNwQkMsY0FBc0IsRUFDdEJDLGNBQStCO1FBQy9CQyxVQUFBQSxpRUFBeUUsQ0FBQztJQUUxRSxNQUFNQyxTQUFTTiw4REFBcUJBO0lBQ3BDLE1BQU1PLFVBQVVOLHNEQUFhQTtJQUM3QixNQUFNTyxjQUFjSCxRQUFRRyxXQUFXLElBQUlGLE9BQU9FLFdBQVc7SUFDN0QsTUFBTUMsU0FBU0osUUFBUUksTUFBTSxJQUFJO0lBRWpDLDRCQUE0QjtJQUM1QixNQUFNQyxvQkFBb0JDLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ0MsZ0NBQWdDO0lBRXRFLElBQUksQ0FBQ0gsbUJBQW1CO1FBQ3RCSSxRQUFRQyxJQUFJLENBQUM7UUFDYixvQ0FBb0M7UUFDcEMsT0FBT0Msa0JBQXFCYixnQkFBZ0JFLFFBQVFZLFFBQVEsRUFBRVQsYUFBYUM7SUFDN0U7SUFFQSxNQUFNUyxXQUFXYixRQUFRWSxRQUFRLEdBQzdCLGtCQUE0Q1osT0FBMUJGLGdCQUFlLGFBQTRCLE9BQWpCRSxRQUFRWSxRQUFRLElBQzVELGtCQUFpQyxPQUFmZCxnQkFBZTtJQUVyQyxNQUFNZ0IsTUFBTSxHQUFnQkQsT0FBYlgsU0FBUSxPQUE2QkMsT0FBeEJVLFVBQVMsaUJBQXFDVCxPQUF0QkQsYUFBWSxZQUFpQixPQUFQQztJQUUxRSx5Q0FBeUM7SUFDekMsTUFBTVcsVUFBdUI7UUFDM0IsV0FBV2QsT0FBT2UsTUFBTTtRQUN4QixnQkFBZ0JmLE9BQU9nQixhQUFhO1FBQ3BDLDJCQUEyQlo7UUFDM0IsZ0JBQWdCO0lBQ2xCO0lBRUEscURBQXFEO0lBQ3JELGtFQUFrRTtJQUNsRSxNQUFNYSxlQUFlLElBQUlDO0lBRXpCLElBQUlwQixnQkFBZ0I7UUFDbEIsMENBQTBDO1FBQzFDcUIsT0FBT0MsT0FBTyxDQUFDdEIsZ0JBQWdCdUIsT0FBTyxDQUFDO2dCQUFDLENBQUNDLEtBQUtDLE1BQU07WUFDbEQsSUFBSUEsVUFBVUMsV0FBVztnQkFDdkIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxRQUFRO29CQUN4QkEsTUFBTUYsT0FBTyxDQUFDTSxDQUFBQSxJQUFLVixhQUFhVyxNQUFNLENBQUMsbUJBQXVCLE9BQUpOLEtBQUksUUFBTU8sT0FBT0Y7Z0JBQzdFLE9BQU87b0JBQ0xWLGFBQWFXLE1BQU0sQ0FBQyxtQkFBdUIsT0FBSk4sS0FBSSxNQUFJTyxPQUFPTjtnQkFDeEQ7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxNQUFNTyxVQUFVYixhQUFhYyxRQUFRLEtBQUssR0FBVWQsT0FBUEosS0FBSSxLQUEyQixPQUF4QkksYUFBYWMsUUFBUSxNQUFPbEI7SUFFaEYsSUFBSTtZQVlzQ21CO1FBWHhDLE1BQU1DLFdBQVcsTUFBTUMsTUFBTUosU0FBUztZQUNwQ2hCO1lBQ0FxQixNQUFNO2dCQUFFQyxZQUFZO1lBQUc7UUFDekI7UUFFQSxJQUFJLENBQUNILFNBQVNJLEVBQUUsRUFBRTtZQUNoQjdCLFFBQVFDLElBQUksQ0FBQywwQkFBMEMsT0FBaEJ3QixTQUFTSyxNQUFNLEVBQUM7WUFDdkQsT0FBTzVCLGtCQUFxQmIsZ0JBQWdCRSxRQUFRWSxRQUFRLEVBQUVULGFBQWFDO1FBQzdFO1FBRUEsTUFBTTZCLE9BQU8sTUFBTUMsU0FBU00sSUFBSTtRQUNoQyxPQUFPLENBQUN4QyxRQUFRWSxRQUFRLEdBQUdxQixLQUFLUSxLQUFLLElBQUdSLGdCQUFBQSxLQUFLWixPQUFPLGNBQVpZLG9DQUFBQSxhQUFjLENBQUMsRUFBRSxLQUFLQTtJQUNoRSxFQUFFLE9BQU9TLE9BQU87UUFDZGpDLFFBQVFpQyxLQUFLLENBQUMsd0NBQXdDQTtRQUN0RCw4QkFBOEI7UUFDOUIsT0FBTy9CLGtCQUFxQmIsZ0JBQWdCRSxRQUFRWSxRQUFRLEVBQUVULGFBQWFDO0lBQzdFO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELGVBQWVPLGtCQUNiYixjQUFzQixFQUN0QmMsUUFBNEIsRUFDNUJULFdBQW1CLEVBQ25CQyxNQUFjO1FBd0JrQjZCO0lBdEJoQyxNQUFNaEMsU0FBU04sOERBQXFCQTtJQUNwQyxNQUFNTyxVQUFVTixzREFBYUE7SUFFN0IsTUFBTWlCLFdBQVdELFdBQ2Isa0JBQTRDQSxPQUExQmQsZ0JBQWUsYUFBb0IsT0FBVGMsWUFDNUMsa0JBQWlDLE9BQWZkLGdCQUFlO0lBRXJDLE1BQU1nQixNQUFNLEdBQWdCRCxPQUFiWCxTQUFRLE9BQTZCQyxPQUF4QlUsVUFBUyxpQkFBcUNULE9BQXRCRCxhQUFZLFlBQWlCLE9BQVBDO0lBRTFFLE1BQU04QixXQUFXLE1BQU1DLE1BQU1yQixLQUFLO1FBQ2hDQyxTQUFTO1lBQ1AsV0FBV2QsT0FBT2UsTUFBTTtZQUN4QixnQkFBZ0JmLE9BQU9nQixhQUFhO1FBQ3RDO1FBQ0FtQixNQUFNO1lBQUVDLFlBQVk7UUFBRztJQUN6QjtJQUVBLElBQUksQ0FBQ0gsU0FBU0ksRUFBRSxFQUFFO1FBQ2hCLE1BQU0sSUFBSUssTUFBTSxvQ0FBb0QsT0FBaEJULFNBQVNLLE1BQU07SUFDckU7SUFFQSxNQUFNTixPQUFPLE1BQU1DLFNBQVNNLElBQUk7SUFDaEMsT0FBTyxDQUFDNUIsV0FBV3FCLEtBQUtRLEtBQUssSUFBR1IsZ0JBQUFBLEtBQUtaLE9BQU8sY0FBWlksb0NBQUFBLGFBQWMsQ0FBQyxFQUFFLEtBQUtBO0FBQ3hEO0FBRUE7OztDQUdDLEdBQ00sU0FBU1c7SUFDZCxJQUFJLEtBQWtCLEVBQWEsRUFFbEM7SUFFRCxNQUFNQyxhQUE2QixDQUFDO0lBRXBDLHdCQUF3QjtJQUN4QixNQUFNQyxhQUFhQyxhQUFhQyxPQUFPLENBQUM7SUFDeEMsTUFBTUMsa0JBQWtCRixhQUFhQyxPQUFPLENBQUM7SUFDN0MsTUFBTUUsaUJBQWlCSCxhQUFhQyxPQUFPLENBQUM7SUFFNUMsSUFBSUYsWUFBWUQsV0FBV00sSUFBSSxHQUFHTDtJQUNsQyxJQUFJRyxpQkFBaUI7UUFDbkIsSUFBSTtZQUNGSixXQUFXTyxTQUFTLEdBQUdDLEtBQUtDLEtBQUssQ0FBQ0w7UUFDcEMsRUFBRSxVQUFNO1FBQ04sc0JBQXNCO1FBQ3hCO0lBQ0Y7SUFDQSxJQUFJQyxnQkFBZ0I7UUFDbEJMLFdBQVdVLFFBQVEsR0FBR0w7SUFDeEI7SUFFQSwrQ0FBK0M7SUFDL0MsNENBQTRDO0lBRTVDLE9BQU9MO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLFNBQVNXLG9CQUFvQlgsVUFBbUM7SUFDckUsSUFBSSxLQUFrQixFQUFhLEVBQU87SUFFMUMsSUFBSUEsV0FBV00sSUFBSSxFQUFFO1FBQ25CSixhQUFhVSxPQUFPLENBQUMsWUFBWVosV0FBV00sSUFBSTtJQUNsRDtJQUVBLElBQUlOLFdBQVdPLFNBQVMsRUFBRTtRQUN4QkwsYUFBYVUsT0FBTyxDQUFDLGlCQUFpQkosS0FBS0ssU0FBUyxDQUFDYixXQUFXTyxTQUFTO0lBQzNFO0lBRUEsSUFBSVAsV0FBV1UsUUFBUSxFQUFFO1FBQ3ZCUixhQUFhVSxPQUFPLENBQUMsWUFBWVosV0FBV1UsUUFBUTtJQUN0RDtBQUNGO0FBRUE7Ozs7OztDQU1DLEdBQ00sU0FBU0ksNEJBT2RDLGFBQWtCLEVBQ2xCN0QsY0FBK0I7UUFNZEEsc0JBQ0NBLHVCQUNFQTtJQU5wQixJQUFJLENBQUNBLGtCQUFrQjZELGNBQWNDLE1BQU0sS0FBSyxHQUFHO1FBQ2pELE9BQU9EO0lBQ1Q7SUFFQSxNQUFNRSxZQUFXL0QsdUJBQUFBLGVBQWVvRCxJQUFJLGNBQW5CcEQsMkNBQUFBLHFCQUFxQmdFLFdBQVc7SUFDakQsTUFBTUMsYUFBWWpFLHdCQUFBQSxlQUFla0UsS0FBSyxjQUFwQmxFLDRDQUFBQSxzQkFBc0JnRSxXQUFXO0lBQ25ELE1BQU1HLGVBQWNuRSwwQkFBQUEsZUFBZW9FLE9BQU8sY0FBdEJwRSw4Q0FBQUEsd0JBQXdCZ0UsV0FBVztJQUN2RCxNQUFNSyxzQkFBc0IsQ0FBQ3JFLGVBQWVzRSxlQUFlLElBQUl0RSxlQUFlcUQsU0FBUyxJQUFJLEVBQUUsRUFDMUZrQixHQUFHLENBQUNDLENBQUFBLElBQUtBLEVBQUVSLFdBQVc7SUFFekIsNENBQTRDO0lBQzVDLE1BQU1TLHNCQUFzQlosY0FBY1UsR0FBRyxDQUFDRyxDQUFBQTtZQUk1QkEsV0FFUUEsWUFFRUE7UUFQMUIsSUFBSUMsUUFBUTtRQUVaLHFDQUFxQztRQUNyQyxJQUFJWixZQUFZVyxFQUFBQSxZQUFBQSxJQUFJdEIsSUFBSSxjQUFSc0IsZ0NBQUFBLFVBQVVWLFdBQVcsUUFBT0QsVUFBVTtZQUNwRFksU0FBUyxLQUFLLG1CQUFtQjtRQUNuQyxPQUFPLElBQUlWLGFBQWFTLEVBQUFBLGFBQUFBLElBQUlSLEtBQUssY0FBVFEsaUNBQUFBLFdBQVdWLFdBQVcsUUFBT0MsV0FBVztZQUM5RFUsU0FBUyxJQUFJLGNBQWM7UUFDN0IsT0FBTyxJQUFJUixlQUFlTyxFQUFBQSxlQUFBQSxJQUFJTixPQUFPLGNBQVhNLG1DQUFBQSxhQUFhVixXQUFXLFFBQU9HLGFBQWE7WUFDcEVRLFNBQVMsSUFBSSxnQkFBZ0I7UUFDL0I7UUFFQSxxQ0FBcUM7UUFDckMsSUFBSUQsSUFBSUUsVUFBVSxJQUFJRixJQUFJRSxVQUFVLENBQUNkLE1BQU0sR0FBRyxLQUFLTyxvQkFBb0JQLE1BQU0sR0FBRyxHQUFHO1lBQ2pGLE1BQU1lLGlCQUFpQkgsSUFBSUUsVUFBVSxDQUFDRSxNQUFNLENBQUNDLENBQUFBLFlBQzNDVixvQkFBb0JXLElBQUksQ0FBQ0MsQ0FBQUEsT0FDdkJGLFVBQVVmLFdBQVcsR0FBR2tCLFFBQVEsQ0FBQ0QsU0FDakNBLEtBQUtDLFFBQVEsQ0FBQ0gsVUFBVWYsV0FBVztZQUd2Q1csU0FBU0UsZUFBZWYsTUFBTSxHQUFHLElBQUksK0JBQStCO1FBQ3RFO1FBRUEsT0FBTztZQUFFcUIsYUFBYVQ7WUFBS0M7UUFBTTtJQUNuQztJQUVBLHVEQUF1RDtJQUN2REYsb0JBQW9CVyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0M7UUFDM0IsSUFBSUEsRUFBRVgsS0FBSyxLQUFLVSxFQUFFVixLQUFLLEVBQUU7WUFDdkIsT0FBT1csRUFBRVgsS0FBSyxHQUFHVSxFQUFFVixLQUFLLEVBQUUscUJBQXFCO1FBQ2pEO1FBQ0EsMERBQTBEO1FBQzFELE9BQU8sSUFBSVksS0FBS0YsRUFBRUYsV0FBVyxDQUFDSyxTQUFTLEVBQUVDLE9BQU8sS0FDekMsSUFBSUYsS0FBS0QsRUFBRUgsV0FBVyxDQUFDSyxTQUFTLEVBQUVDLE9BQU87SUFDbEQ7SUFFQSxPQUFPaEIsb0JBQW9CRixHQUFHLENBQUNtQixDQUFBQSxPQUFRQSxLQUFLUCxXQUFXO0FBQ3pEO0FBRUE7OztDQUdDLEdBQ00sU0FBU1E7SUFDZCxJQUFJLEtBQWtCLEVBQWEsRUFFbEM7SUFFRCxJQUFJO1FBQ0YseUNBQXlDO1FBQ3pDLE1BQU0sRUFBRUMsZ0JBQWdCLEVBQUUsR0FBR0MsbUJBQU9BLENBQUM7UUFDckMsTUFBTUMsZ0JBQWdCRjtRQUV0QixJQUFJRSxjQUFjaEMsTUFBTSxLQUFLLEdBQUc7WUFDOUIsT0FBTyxDQUFDO1FBQ1Y7UUFFQSxNQUFNaEIsYUFBNkIsQ0FBQztRQUVwQyxrREFBa0Q7UUFDbEQsTUFBTWlELFlBQVlELGNBQ2Z2QixHQUFHLENBQUN5QixDQUFBQSxJQUFLQSxFQUFFQyxtQkFBbUIsRUFDOUJuQixNQUFNLENBQUNvQjtRQUVWLElBQUlILFVBQVVqQyxNQUFNLEdBQUcsR0FBRztZQUN4Qiw0RUFBNEU7WUFDNUUsTUFBTXFDLHFCQUFxQkosU0FBUyxDQUFDLEVBQUU7WUFDdkMsTUFBTUssUUFBUUQsbUJBQW1CRSxLQUFLLENBQUMsS0FBSzlCLEdBQUcsQ0FBQytCLENBQUFBLElBQUtBLEVBQUVDLElBQUk7WUFFM0QsSUFBSUgsTUFBTXRDLE1BQU0sSUFBSSxHQUFHaEIsV0FBV00sSUFBSSxHQUFHZ0QsS0FBSyxDQUFDLEVBQUU7WUFDakQsSUFBSUEsTUFBTXRDLE1BQU0sSUFBSSxHQUFHaEIsV0FBV29CLEtBQUssR0FBR2tDLEtBQUssQ0FBQyxFQUFFO1lBQ2xELElBQUlBLE1BQU10QyxNQUFNLElBQUksR0FBR2hCLFdBQVdzQixPQUFPLEdBQUdnQyxLQUFLLENBQUMsRUFBRTtRQUN0RDtRQUVBLHlEQUF5RDtRQUN6RCx3RkFBd0Y7UUFDeEYsTUFBTUksZ0JBQTBCLEVBQUU7UUFDbENWLGNBQWN2RSxPQUFPLENBQUNrRixDQUFBQTtZQUNwQixNQUFNQyxRQUFRRCxJQUFJRSxnQkFBZ0IsQ0FBQzNDLFdBQVc7WUFDOUMsTUFBTTRDLFNBQVM7Z0JBQUM7Z0JBQWE7Z0JBQWU7Z0JBQWM7Z0JBQVU7Z0JBQWE7YUFBUztZQUMxRkEsT0FBT3JGLE9BQU8sQ0FBQ3NGLENBQUFBO2dCQUNiLElBQUlILE1BQU14QixRQUFRLENBQUMyQixVQUFVLENBQUNMLGNBQWN0QixRQUFRLENBQUMyQixRQUFRO29CQUMzREwsY0FBY00sSUFBSSxDQUFDRDtnQkFDckI7WUFDRjtRQUNGO1FBRUEsSUFBSUwsY0FBYzFDLE1BQU0sR0FBRyxHQUFHO1lBQzVCaEIsV0FBV3dCLGVBQWUsR0FBR2tDO1lBQzdCMUQsV0FBV08sU0FBUyxHQUFHbUQ7UUFDekI7UUFFQSw0Q0FBNEM7UUFDNUMsSUFBSVYsY0FBY2hDLE1BQU0sSUFBSSxHQUFHO1lBQzdCaEIsV0FBV1UsUUFBUSxHQUFHO1FBQ3hCLE9BQU8sSUFBSXNDLGNBQWNoQyxNQUFNLElBQUksR0FBRztZQUNwQ2hCLFdBQVdVLFFBQVEsR0FBRztRQUN4QjtRQUVBVixXQUFXaUUsaUJBQWlCLEdBQUdqQixjQUFjaEMsTUFBTTtRQUVuRCxPQUFPaEI7SUFDVCxFQUFFLE9BQU9ILE9BQU87UUFDZGpDLFFBQVFpQyxLQUFLLENBQUMsd0RBQXdEQTtRQUN0RSxPQUFPLENBQUM7SUFDVjtBQUNGO0FBRUE7OztDQUdDLEdBQ00sZUFBZXFFLDZCQUNwQmhILGNBQStCLEVBQy9CaUgsT0FHQztJQUVELGtFQUFrRTtJQUNsRSxvRUFBb0U7SUFFcEUsb0VBQW9FO0lBQ3BFLHFCQUFxQjtJQUNyQix3Q0FBd0M7SUFDeEMsMkNBQTJDO0lBQzNDLG9EQUFvRDtJQUVwRCxPQUFPLEVBQUU7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2NvbnRlbnRzdGFjay9wZXJzb25hbGl6ZS50cz9mYzRhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGVudHN0YWNrIFBlcnNvbmFsaXplIEludGVncmF0aW9uXG4gKiBcbiAqIFByb3ZpZGVzIHV0aWxpdGllcyBmb3IgZmV0Y2hpbmcgcGVyc29uYWxpemVkIGNvbnRlbnQgYmFzZWQgb24gdXNlciBhdHRyaWJ1dGVzXG4gKiBcbiAqIFNldHVwOlxuICogMS4gRW5hYmxlIFBlcnNvbmFsaXplIGluIHlvdXIgQ29udGVudHN0YWNrIHN0YWNrXG4gKiAyLiBBZGQgQ09OVEVOVFNUQUNLX1BFUlNPTkFMSVpFX0FQSV9LRVkgdG8gLmVudi5sb2NhbFxuICogMy4gQ3JlYXRlIHVzZXIgc2VnbWVudHMgaW4gQ29udGVudHN0YWNrIFBlcnNvbmFsaXplXG4gKiA0LiBBZGQgUGVyc29uYWxpemUgZmllbGRzIHRvIHlvdXIgY29udGVudCB0eXBlc1xuICovXG5cbmltcG9ydCB7IGdldENvbnRlbnRzdGFja0NvbmZpZywgZ2V0QXBpQmFzZVVybCB9IGZyb20gJy4vY29uZmlnJztcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyQXR0cmlidXRlcyB7XG4gIC8vIExvY2F0aW9uXG4gIGNpdHk/OiBzdHJpbmc7XG4gIHN0YXRlPzogc3RyaW5nO1xuICBjb3VudHJ5Pzogc3RyaW5nO1xuICBcbiAgLy8gSW50ZXJlc3RzICYgUHJlZmVyZW5jZXNcbiAgaW50ZXJlc3RzPzogc3RyaW5nW107XG4gIHByZWZlcnJlZENhdXNlcz86IHN0cmluZ1tdO1xuICBjb250cmlidXRpb25UeXBlcz86IHN0cmluZ1tdO1xuICBcbiAgLy8gVXNlciBCZWhhdmlvclxuICB1c2VyVHlwZT86ICduZXcnIHwgJ3JldHVybmluZycgfCAnYWN0aXZlJztcbiAgcmVnaXN0cmF0aW9uQ291bnQ/OiBudW1iZXI7XG4gIGxhc3RWaXNpdERhdGU/OiBzdHJpbmc7XG4gIFxuICAvLyBEZW1vZ3JhcGhpY3MgKG9wdGlvbmFsKVxuICBhZ2U/OiBudW1iZXI7XG4gIGxhbmd1YWdlPzogc3RyaW5nO1xuICBcbiAgLy8gQ3VzdG9tIGF0dHJpYnV0ZXNcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgc3RyaW5nW10gfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyc29uYWxpemVPcHRpb25zIHtcbiAgLyoqIFVzZXIgYXR0cmlidXRlcyBmb3IgcGVyc29uYWxpemF0aW9uICovXG4gIHVzZXJBdHRyaWJ1dGVzPzogVXNlckF0dHJpYnV0ZXM7XG4gIC8qKiBDb250ZW50IHR5cGUgVUlEICovXG4gIGNvbnRlbnRUeXBlVWlkOiBzdHJpbmc7XG4gIC8qKiBFbnRyeSBVSUQgKG9wdGlvbmFsLCBmb3Igc3BlY2lmaWMgZW50cnkpICovXG4gIGVudHJ5VWlkPzogc3RyaW5nO1xuICAvKiogRW52aXJvbm1lbnQgKGRlZmF1bHRzIHRvIGNvbmZpZ3VyZWQgZW52aXJvbm1lbnQpICovXG4gIGVudmlyb25tZW50Pzogc3RyaW5nO1xuICAvKiogTG9jYWxlIChkZWZhdWx0cyB0byAnZW4tdXMnKSAqL1xuICBsb2NhbGU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2V0IHBlcnNvbmFsaXplZCBjb250ZW50IGZyb20gQ29udGVudHN0YWNrXG4gKiBcbiAqIEBwYXJhbSBjb250ZW50VHlwZVVpZCAtIENvbnRlbnQgdHlwZSBVSUQgKGUuZy4sICdsYW5kaW5nX3BhZ2UnKVxuICogQHBhcmFtIHVzZXJBdHRyaWJ1dGVzIC0gVXNlciBhdHRyaWJ1dGVzIGZvciBwZXJzb25hbGl6YXRpb25cbiAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zXG4gKiBAcmV0dXJucyBQZXJzb25hbGl6ZWQgY29udGVudCBlbnRyeVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGVyc29uYWxpemVkQ29udGVudDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBjb250ZW50VHlwZVVpZDogc3RyaW5nLFxuICB1c2VyQXR0cmlidXRlcz86IFVzZXJBdHRyaWJ1dGVzLFxuICBvcHRpb25zOiBPbWl0PFBlcnNvbmFsaXplT3B0aW9ucywgJ2NvbnRlbnRUeXBlVWlkJyB8ICd1c2VyQXR0cmlidXRlcyc+ID0ge31cbik6IFByb21pc2U8VD4ge1xuICBjb25zdCBjb25maWcgPSBnZXRDb250ZW50c3RhY2tDb25maWcoKTtcbiAgY29uc3QgYmFzZVVybCA9IGdldEFwaUJhc2VVcmwoKTtcbiAgY29uc3QgZW52aXJvbm1lbnQgPSBvcHRpb25zLmVudmlyb25tZW50IHx8IGNvbmZpZy5lbnZpcm9ubWVudDtcbiAgY29uc3QgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgJ2VuLXVzJztcbiAgXG4gIC8vIEJ1aWxkIFBlcnNvbmFsaXplIEFQSSBVUkxcbiAgY29uc3QgcGVyc29uYWxpemVBcGlLZXkgPSBwcm9jZXNzLmVudi5DT05URU5UU1RBQ0tfUEVSU09OQUxJWkVfQVBJX0tFWTtcbiAgXG4gIGlmICghcGVyc29uYWxpemVBcGlLZXkpIHtcbiAgICBjb25zb2xlLndhcm4oJ0NPTlRFTlRTVEFDS19QRVJTT05BTElaRV9BUElfS0VZIG5vdCBzZXQuIFJldHVybmluZyBkZWZhdWx0IGNvbnRlbnQuJyk7XG4gICAgLy8gRmFsbGJhY2sgdG8gcmVndWxhciBjb250ZW50IGZldGNoXG4gICAgcmV0dXJuIGdldERlZmF1bHRDb250ZW50PFQ+KGNvbnRlbnRUeXBlVWlkLCBvcHRpb25zLmVudHJ5VWlkLCBlbnZpcm9ubWVudCwgbG9jYWxlKTtcbiAgfVxuICBcbiAgY29uc3QgZW5kcG9pbnQgPSBvcHRpb25zLmVudHJ5VWlkXG4gICAgPyBgL2NvbnRlbnRfdHlwZXMvJHtjb250ZW50VHlwZVVpZH0vZW50cmllcy8ke29wdGlvbnMuZW50cnlVaWR9YFxuICAgIDogYC9jb250ZW50X3R5cGVzLyR7Y29udGVudFR5cGVVaWR9L2VudHJpZXNgO1xuICBcbiAgY29uc3QgdXJsID0gYCR7YmFzZVVybH0vdjMke2VuZHBvaW50fT9lbnZpcm9ubWVudD0ke2Vudmlyb25tZW50fSZsb2NhbGU9JHtsb2NhbGV9YDtcbiAgXG4gIC8vIEJ1aWxkIGhlYWRlcnMgd2l0aCBQZXJzb25hbGl6ZSBBUEkga2V5XG4gIGNvbnN0IGhlYWRlcnM6IEhlYWRlcnNJbml0ID0ge1xuICAgICdhcGlfa2V5JzogY29uZmlnLmFwaUtleSxcbiAgICAnYWNjZXNzX3Rva2VuJzogY29uZmlnLmRlbGl2ZXJ5VG9rZW4sXG4gICAgJ3BlcnNvbmFsaXphdGlvbl9hcGlfa2V5JzogcGVyc29uYWxpemVBcGlLZXksXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfTtcbiAgXG4gIC8vIEFkZCB1c2VyIGF0dHJpYnV0ZXMgYXMgcXVlcnkgcGFyYW1ldGVycyBvciBoZWFkZXJzXG4gIC8vIENvbnRlbnRzdGFjayBQZXJzb25hbGl6ZSBhY2NlcHRzIHVzZXIgYXR0cmlidXRlcyBpbiB0aGUgcmVxdWVzdFxuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIFxuICBpZiAodXNlckF0dHJpYnV0ZXMpIHtcbiAgICAvLyBBZGQgdXNlciBhdHRyaWJ1dGVzIGFzIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBPYmplY3QuZW50cmllcyh1c2VyQXR0cmlidXRlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZS5mb3JFYWNoKHYgPT4gc2VhcmNoUGFyYW1zLmFwcGVuZChgdXNlcl9hdHRyaWJ1dGVzWyR7a2V5fV1bXWAsIFN0cmluZyh2KSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoYHVzZXJfYXR0cmlidXRlc1ske2tleX1dYCwgU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgY29uc3QgZnVsbFVybCA9IHNlYXJjaFBhcmFtcy50b1N0cmluZygpID8gYCR7dXJsfSYke3NlYXJjaFBhcmFtcy50b1N0cmluZygpfWAgOiB1cmw7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZnVsbFVybCwge1xuICAgICAgaGVhZGVycyxcbiAgICAgIG5leHQ6IHsgcmV2YWxpZGF0ZTogNjAgfSwgLy8gQ2FjaGUgZm9yIDYwIHNlY29uZHNcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFBlcnNvbmFsaXplIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9LiBGYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBjb250ZW50LmApO1xuICAgICAgcmV0dXJuIGdldERlZmF1bHRDb250ZW50PFQ+KGNvbnRlbnRUeXBlVWlkLCBvcHRpb25zLmVudHJ5VWlkLCBlbnZpcm9ubWVudCwgbG9jYWxlKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gKG9wdGlvbnMuZW50cnlVaWQgPyBkYXRhLmVudHJ5IDogZGF0YS5lbnRyaWVzPy5bMF0pIHx8IGRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGVyc29uYWxpemVkIGNvbnRlbnQ6JywgZXJyb3IpO1xuICAgIC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgY29udGVudFxuICAgIHJldHVybiBnZXREZWZhdWx0Q29udGVudDxUPihjb250ZW50VHlwZVVpZCwgb3B0aW9ucy5lbnRyeVVpZCwgZW52aXJvbm1lbnQsIGxvY2FsZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGYWxsYmFjazogR2V0IGRlZmF1bHQgKG5vbi1wZXJzb25hbGl6ZWQpIGNvbnRlbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0RGVmYXVsdENvbnRlbnQ8VD4oXG4gIGNvbnRlbnRUeXBlVWlkOiBzdHJpbmcsXG4gIGVudHJ5VWlkOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIGVudmlyb25tZW50OiBzdHJpbmcsXG4gIGxvY2FsZTogc3RyaW5nXG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29udGVudHN0YWNrQ29uZmlnKCk7XG4gIGNvbnN0IGJhc2VVcmwgPSBnZXRBcGlCYXNlVXJsKCk7XG4gIFxuICBjb25zdCBlbmRwb2ludCA9IGVudHJ5VWlkXG4gICAgPyBgL2NvbnRlbnRfdHlwZXMvJHtjb250ZW50VHlwZVVpZH0vZW50cmllcy8ke2VudHJ5VWlkfWBcbiAgICA6IGAvY29udGVudF90eXBlcy8ke2NvbnRlbnRUeXBlVWlkfS9lbnRyaWVzYDtcbiAgXG4gIGNvbnN0IHVybCA9IGAke2Jhc2VVcmx9L3YzJHtlbmRwb2ludH0/ZW52aXJvbm1lbnQ9JHtlbnZpcm9ubWVudH0mbG9jYWxlPSR7bG9jYWxlfWA7XG4gIFxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICdhcGlfa2V5JzogY29uZmlnLmFwaUtleSxcbiAgICAgICdhY2Nlc3NfdG9rZW4nOiBjb25maWcuZGVsaXZlcnlUb2tlbixcbiAgICB9LFxuICAgIG5leHQ6IHsgcmV2YWxpZGF0ZTogNjAgfSxcbiAgfSk7XG4gIFxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZGVmYXVsdCBjb250ZW50OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgfVxuICBcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgcmV0dXJuIChlbnRyeVVpZCA/IGRhdGEuZW50cnkgOiBkYXRhLmVudHJpZXM/LlswXSkgfHwgZGF0YTtcbn1cblxuLyoqXG4gKiBHZXQgdXNlciBhdHRyaWJ1dGVzIGZyb20gY2xpZW50LXNpZGUgc3RvcmFnZSAobG9jYWxTdG9yYWdlLCBjb29raWVzLCBldGMuKVxuICogVGhpcyBpcyBhIGhlbHBlciBmdW5jdGlvbiBmb3IgY2xpZW50IGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJBdHRyaWJ1dGVzRnJvbUNsaWVudCgpOiBVc2VyQXR0cmlidXRlcyB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBcbiAgY29uc3QgYXR0cmlidXRlczogVXNlckF0dHJpYnV0ZXMgPSB7fTtcbiAgXG4gIC8vIEdldCBmcm9tIGxvY2FsU3RvcmFnZVxuICBjb25zdCBzdG9yZWRDaXR5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJDaXR5Jyk7XG4gIGNvbnN0IHN0b3JlZEludGVyZXN0cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySW50ZXJlc3RzJyk7XG4gIGNvbnN0IHN0b3JlZFVzZXJUeXBlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJUeXBlJyk7XG4gIFxuICBpZiAoc3RvcmVkQ2l0eSkgYXR0cmlidXRlcy5jaXR5ID0gc3RvcmVkQ2l0eTtcbiAgaWYgKHN0b3JlZEludGVyZXN0cykge1xuICAgIHRyeSB7XG4gICAgICBhdHRyaWJ1dGVzLmludGVyZXN0cyA9IEpTT04ucGFyc2Uoc3RvcmVkSW50ZXJlc3RzKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElnbm9yZSBwYXJzZSBlcnJvcnNcbiAgICB9XG4gIH1cbiAgaWYgKHN0b3JlZFVzZXJUeXBlKSB7XG4gICAgYXR0cmlidXRlcy51c2VyVHlwZSA9IHN0b3JlZFVzZXJUeXBlIGFzICduZXcnIHwgJ3JldHVybmluZycgfCAnYWN0aXZlJztcbiAgfVxuICBcbiAgLy8gR2V0IGZyb20gY29va2llcyAoaWYgdXNpbmcgYSBjb29raWUgbGlicmFyeSlcbiAgLy8gWW91IGNhbiBhZGQgY29va2llIHBhcnNpbmcgaGVyZSBpZiBuZWVkZWRcbiAgXG4gIHJldHVybiBhdHRyaWJ1dGVzO1xufVxuXG4vKipcbiAqIFN0b3JlIHVzZXIgYXR0cmlidXRlcyBpbiBjbGllbnQtc2lkZSBzdG9yYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVVzZXJBdHRyaWJ1dGVzKGF0dHJpYnV0ZXM6IFBhcnRpYWw8VXNlckF0dHJpYnV0ZXM+KTogdm9pZCB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICBcbiAgaWYgKGF0dHJpYnV0ZXMuY2l0eSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyQ2l0eScsIGF0dHJpYnV0ZXMuY2l0eSk7XG4gIH1cbiAgXG4gIGlmIChhdHRyaWJ1dGVzLmludGVyZXN0cykge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySW50ZXJlc3RzJywgSlNPTi5zdHJpbmdpZnkoYXR0cmlidXRlcy5pbnRlcmVzdHMpKTtcbiAgfVxuICBcbiAgaWYgKGF0dHJpYnV0ZXMudXNlclR5cGUpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclR5cGUnLCBhdHRyaWJ1dGVzLnVzZXJUeXBlKTtcbiAgfVxufVxuXG4vKipcbiAqIFBlcnNvbmFsaXplIG9wcG9ydHVuaXR5IG9yZGVyaW5nIGJhc2VkIG9uIHVzZXIgYXR0cmlidXRlc1xuICogUHJpb3JpdHk6XG4gKiAxLiBMb2NhdGlvbiBtYXRjaCAoY2l0eSwgc3RhdGUsIGNvdW50cnkpXG4gKiAyLiBDYXVzZSBtYXRjaCAoY2F1c2VzIHVzZXIgaGFzIHJlZ2lzdGVyZWQgZm9yKVxuICogMy4gRGVmYXVsdCBvcmRlciAoZGF0ZSBhc2NlbmRpbmcpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwZXJzb25hbGl6ZU9wcG9ydHVuaXR5T3JkZXI8VCBleHRlbmRzIHtcbiAgY2l0eT86IHN0cmluZztcbiAgc3RhdGU/OiBzdHJpbmc7XG4gIGNvdW50cnk/OiBzdHJpbmc7XG4gIGNhdXNlU2x1Z3M/OiBzdHJpbmdbXTtcbiAgc3RhcnREYXRlOiBzdHJpbmc7XG59PihcbiAgb3Bwb3J0dW5pdGllczogVFtdLFxuICB1c2VyQXR0cmlidXRlcz86IFVzZXJBdHRyaWJ1dGVzXG4pOiBUW10ge1xuICBpZiAoIXVzZXJBdHRyaWJ1dGVzIHx8IG9wcG9ydHVuaXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG9wcG9ydHVuaXRpZXM7XG4gIH1cblxuICBjb25zdCB1c2VyQ2l0eSA9IHVzZXJBdHRyaWJ1dGVzLmNpdHk/LnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHVzZXJTdGF0ZSA9IHVzZXJBdHRyaWJ1dGVzLnN0YXRlPy50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCB1c2VyQ291bnRyeSA9IHVzZXJBdHRyaWJ1dGVzLmNvdW50cnk/LnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHVzZXJQcmVmZXJyZWRDYXVzZXMgPSAodXNlckF0dHJpYnV0ZXMucHJlZmVycmVkQ2F1c2VzIHx8IHVzZXJBdHRyaWJ1dGVzLmludGVyZXN0cyB8fCBbXSlcbiAgICAubWFwKGMgPT4gYy50b0xvd2VyQ2FzZSgpKTtcblxuICAvLyBTY29yZSBlYWNoIG9wcG9ydHVuaXR5IGJhc2VkIG9uIHJlbGV2YW5jZVxuICBjb25zdCBzY29yZWRPcHBvcnR1bml0aWVzID0gb3Bwb3J0dW5pdGllcy5tYXAob3BwID0+IHtcbiAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgLy8gTG9jYXRpb24gc2NvcmluZyAoaGlnaGVyIHByaW9yaXR5KVxuICAgIGlmICh1c2VyQ2l0eSAmJiBvcHAuY2l0eT8udG9Mb3dlckNhc2UoKSA9PT0gdXNlckNpdHkpIHtcbiAgICAgIHNjb3JlICs9IDEwMDsgLy8gRXhhY3QgY2l0eSBtYXRjaFxuICAgIH0gZWxzZSBpZiAodXNlclN0YXRlICYmIG9wcC5zdGF0ZT8udG9Mb3dlckNhc2UoKSA9PT0gdXNlclN0YXRlKSB7XG4gICAgICBzY29yZSArPSA1MDsgLy8gU3RhdGUgbWF0Y2hcbiAgICB9IGVsc2UgaWYgKHVzZXJDb3VudHJ5ICYmIG9wcC5jb3VudHJ5Py50b0xvd2VyQ2FzZSgpID09PSB1c2VyQ291bnRyeSkge1xuICAgICAgc2NvcmUgKz0gMjU7IC8vIENvdW50cnkgbWF0Y2hcbiAgICB9XG5cbiAgICAvLyBDYXVzZSBzY29yaW5nIChzZWNvbmRhcnkgcHJpb3JpdHkpXG4gICAgaWYgKG9wcC5jYXVzZVNsdWdzICYmIG9wcC5jYXVzZVNsdWdzLmxlbmd0aCA+IDAgJiYgdXNlclByZWZlcnJlZENhdXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBtYXRjaGluZ0NhdXNlcyA9IG9wcC5jYXVzZVNsdWdzLmZpbHRlcihjYXVzZVNsdWcgPT5cbiAgICAgICAgdXNlclByZWZlcnJlZENhdXNlcy5zb21lKHByZWYgPT4gXG4gICAgICAgICAgY2F1c2VTbHVnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocHJlZikgfHwgXG4gICAgICAgICAgcHJlZi5pbmNsdWRlcyhjYXVzZVNsdWcudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHNjb3JlICs9IG1hdGNoaW5nQ2F1c2VzLmxlbmd0aCAqIDEwOyAvLyAxMCBwb2ludHMgcGVyIG1hdGNoaW5nIGNhdXNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgb3Bwb3J0dW5pdHk6IG9wcCwgc2NvcmUgfTtcbiAgfSk7XG5cbiAgLy8gU29ydCBieSBzY29yZSAoZGVzY2VuZGluZyksIHRoZW4gYnkgZGF0ZSAoYXNjZW5kaW5nKVxuICBzY29yZWRPcHBvcnR1bml0aWVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYi5zY29yZSAhPT0gYS5zY29yZSkge1xuICAgICAgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlOyAvLyBIaWdoZXIgc2NvcmUgZmlyc3RcbiAgICB9XG4gICAgLy8gSWYgc2NvcmVzIGFyZSBlcXVhbCwgc29ydCBieSBkYXRlIChlYXJsaWVyIGRhdGVzIGZpcnN0KVxuICAgIHJldHVybiBuZXcgRGF0ZShhLm9wcG9ydHVuaXR5LnN0YXJ0RGF0ZSkuZ2V0VGltZSgpIC0gXG4gICAgICAgICAgIG5ldyBEYXRlKGIub3Bwb3J0dW5pdHkuc3RhcnREYXRlKS5nZXRUaW1lKCk7XG4gIH0pO1xuXG4gIHJldHVybiBzY29yZWRPcHBvcnR1bml0aWVzLm1hcChpdGVtID0+IGl0ZW0ub3Bwb3J0dW5pdHkpO1xufVxuXG4vKipcbiAqIEV4dHJhY3QgdXNlciBhdHRyaWJ1dGVzIGZyb20gcmVnaXN0cmF0aW9uc1xuICogR2V0cyBsb2NhdGlvbiBhbmQgcHJlZmVycmVkIGNhdXNlcyBmcm9tIHVzZXIncyByZWdpc3RyYXRpb24gaGlzdG9yeVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckF0dHJpYnV0ZXNGcm9tUmVnaXN0cmF0aW9ucygpOiBVc2VyQXR0cmlidXRlcyB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gSW1wb3J0IGR5bmFtaWNhbGx5IHRvIGF2b2lkIFNTUiBpc3N1ZXNcbiAgICBjb25zdCB7IGdldFJlZ2lzdHJhdGlvbnMgfSA9IHJlcXVpcmUoJ0AvbGliL3VzZXInKTtcbiAgICBjb25zdCByZWdpc3RyYXRpb25zID0gZ2V0UmVnaXN0cmF0aW9ucygpO1xuXG4gICAgaWYgKHJlZ2lzdHJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgY29uc3QgYXR0cmlidXRlczogVXNlckF0dHJpYnV0ZXMgPSB7fTtcblxuICAgIC8vIEV4dHJhY3QgbW9zdCBjb21tb24gbG9jYXRpb24gZnJvbSByZWdpc3RyYXRpb25zXG4gICAgY29uc3QgbG9jYXRpb25zID0gcmVnaXN0cmF0aW9uc1xuICAgICAgLm1hcChyID0+IHIub3Bwb3J0dW5pdHlMb2NhdGlvbilcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBUcnkgdG8gZXh0cmFjdCBjaXR5IGZyb20gbG9jYXRpb24gc3RyaW5nIChmb3JtYXQ6IFwiQ2l0eSwgU3RhdGUsIENvdW50cnlcIilcbiAgICAgIGNvbnN0IG1vc3RDb21tb25Mb2NhdGlvbiA9IGxvY2F0aW9uc1swXTtcbiAgICAgIGNvbnN0IHBhcnRzID0gbW9zdENvbW1vbkxvY2F0aW9uLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpO1xuICAgICAgXG4gICAgICBpZiAocGFydHMubGVuZ3RoID49IDEpIGF0dHJpYnV0ZXMuY2l0eSA9IHBhcnRzWzBdO1xuICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAyKSBhdHRyaWJ1dGVzLnN0YXRlID0gcGFydHNbMV07XG4gICAgICBpZiAocGFydHMubGVuZ3RoID49IDMpIGF0dHJpYnV0ZXMuY291bnRyeSA9IHBhcnRzWzJdO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgcHJlZmVycmVkIGNhdXNlcyBmcm9tIG9wcG9ydHVuaXR5IHNsdWdzL3RpdGxlc1xuICAgIC8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gLSB5b3UgbWlnaHQgd2FudCB0byBtYXAgb3Bwb3J0dW5pdHkgc2x1Z3MgdG8gY2F1c2Ugc2x1Z3NcbiAgICBjb25zdCBjYXVzZUtleXdvcmRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHJlZ2lzdHJhdGlvbnMuZm9yRWFjaChyZWcgPT4ge1xuICAgICAgY29uc3QgdGl0bGUgPSByZWcub3Bwb3J0dW5pdHlUaXRsZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgY2F1c2VzID0gWydlZHVjYXRpb24nLCAnZW52aXJvbm1lbnQnLCAnaGVhbHRoY2FyZScsICdhbmltYWwnLCAnY29tbXVuaXR5JywgJ2h1bmdlciddO1xuICAgICAgY2F1c2VzLmZvckVhY2goY2F1c2UgPT4ge1xuICAgICAgICBpZiAodGl0bGUuaW5jbHVkZXMoY2F1c2UpICYmICFjYXVzZUtleXdvcmRzLmluY2x1ZGVzKGNhdXNlKSkge1xuICAgICAgICAgIGNhdXNlS2V5d29yZHMucHVzaChjYXVzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaWYgKGNhdXNlS2V5d29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgYXR0cmlidXRlcy5wcmVmZXJyZWRDYXVzZXMgPSBjYXVzZUtleXdvcmRzO1xuICAgICAgYXR0cmlidXRlcy5pbnRlcmVzdHMgPSBjYXVzZUtleXdvcmRzO1xuICAgIH1cblxuICAgIC8vIFNldCB1c2VyIHR5cGUgYmFzZWQgb24gcmVnaXN0cmF0aW9uIGNvdW50XG4gICAgaWYgKHJlZ2lzdHJhdGlvbnMubGVuZ3RoID49IDUpIHtcbiAgICAgIGF0dHJpYnV0ZXMudXNlclR5cGUgPSAnYWN0aXZlJztcbiAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbnMubGVuZ3RoID49IDEpIHtcbiAgICAgIGF0dHJpYnV0ZXMudXNlclR5cGUgPSAncmV0dXJuaW5nJztcbiAgICB9XG5cbiAgICBhdHRyaWJ1dGVzLnJlZ2lzdHJhdGlvbkNvdW50ID0gcmVnaXN0cmF0aW9ucy5sZW5ndGg7XG5cbiAgICByZXR1cm4gYXR0cmlidXRlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIHVzZXIgYXR0cmlidXRlcyBmcm9tIHJlZ2lzdHJhdGlvbnM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7fTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBwZXJzb25hbGl6ZWQgb3Bwb3J0dW5pdGllcyBiYXNlZCBvbiB1c2VyIGF0dHJpYnV0ZXNcbiAqIFRoaXMgY29tYmluZXMgcmVndWxhciBvcHBvcnR1bml0eSBmZXRjaGluZyB3aXRoIHBlcnNvbmFsaXphdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGVyc29uYWxpemVkT3Bwb3J0dW5pdGllcyhcbiAgdXNlckF0dHJpYnV0ZXM/OiBVc2VyQXR0cmlidXRlcyxcbiAgZmlsdGVycz86IHtcbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICBzdGF0dXM/OiBzdHJpbmdbXTtcbiAgfVxuKSB7XG4gIC8vIEZpcnN0LCBnZXQgcGVyc29uYWxpemVkIGNvbnRlbnQgZm9yIG9wcG9ydHVuaXR5IHJlY29tbWVuZGF0aW9uc1xuICAvLyBUaGVuIGZldGNoIGFjdHVhbCBvcHBvcnR1bml0aWVzIGJhc2VkIG9uIHBlcnNvbmFsaXplZCBwcmVmZXJlbmNlc1xuICBcbiAgLy8gVGhpcyBpcyBhIHBsYWNlaG9sZGVyIC0gaW1wbGVtZW50IGJhc2VkIG9uIHlvdXIgUGVyc29uYWxpemUgc2V0dXBcbiAgLy8gWW91IG1pZ2h0IHdhbnQgdG86XG4gIC8vIDEuIEdldCBwZXJzb25hbGl6ZWQgY2F1c2UgcHJlZmVyZW5jZXNcbiAgLy8gMi4gR2V0IHBlcnNvbmFsaXplZCBsb2NhdGlvbiBwcmVmZXJlbmNlc1xuICAvLyAzLiBGZXRjaCBvcHBvcnR1bml0aWVzIG1hdGNoaW5nIHRob3NlIHByZWZlcmVuY2VzXG4gIFxuICByZXR1cm4gW107XG59XG4iXSwibmFtZXMiOlsiZ2V0Q29udGVudHN0YWNrQ29uZmlnIiwiZ2V0QXBpQmFzZVVybCIsImdldFBlcnNvbmFsaXplZENvbnRlbnQiLCJjb250ZW50VHlwZVVpZCIsInVzZXJBdHRyaWJ1dGVzIiwib3B0aW9ucyIsImNvbmZpZyIsImJhc2VVcmwiLCJlbnZpcm9ubWVudCIsImxvY2FsZSIsInBlcnNvbmFsaXplQXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkNPTlRFTlRTVEFDS19QRVJTT05BTElaRV9BUElfS0VZIiwiY29uc29sZSIsIndhcm4iLCJnZXREZWZhdWx0Q29udGVudCIsImVudHJ5VWlkIiwiZW5kcG9pbnQiLCJ1cmwiLCJoZWFkZXJzIiwiYXBpS2V5IiwiZGVsaXZlcnlUb2tlbiIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJ2IiwiYXBwZW5kIiwiU3RyaW5nIiwiZnVsbFVybCIsInRvU3RyaW5nIiwiZGF0YSIsInJlc3BvbnNlIiwiZmV0Y2giLCJuZXh0IiwicmV2YWxpZGF0ZSIsIm9rIiwic3RhdHVzIiwianNvbiIsImVudHJ5IiwiZXJyb3IiLCJFcnJvciIsImdldFVzZXJBdHRyaWJ1dGVzRnJvbUNsaWVudCIsImF0dHJpYnV0ZXMiLCJzdG9yZWRDaXR5IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0b3JlZEludGVyZXN0cyIsInN0b3JlZFVzZXJUeXBlIiwiY2l0eSIsImludGVyZXN0cyIsIkpTT04iLCJwYXJzZSIsInVzZXJUeXBlIiwic3RvcmVVc2VyQXR0cmlidXRlcyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJwZXJzb25hbGl6ZU9wcG9ydHVuaXR5T3JkZXIiLCJvcHBvcnR1bml0aWVzIiwibGVuZ3RoIiwidXNlckNpdHkiLCJ0b0xvd2VyQ2FzZSIsInVzZXJTdGF0ZSIsInN0YXRlIiwidXNlckNvdW50cnkiLCJjb3VudHJ5IiwidXNlclByZWZlcnJlZENhdXNlcyIsInByZWZlcnJlZENhdXNlcyIsIm1hcCIsImMiLCJzY29yZWRPcHBvcnR1bml0aWVzIiwib3BwIiwic2NvcmUiLCJjYXVzZVNsdWdzIiwibWF0Y2hpbmdDYXVzZXMiLCJmaWx0ZXIiLCJjYXVzZVNsdWciLCJzb21lIiwicHJlZiIsImluY2x1ZGVzIiwib3Bwb3J0dW5pdHkiLCJzb3J0IiwiYSIsImIiLCJEYXRlIiwic3RhcnREYXRlIiwiZ2V0VGltZSIsIml0ZW0iLCJnZXRVc2VyQXR0cmlidXRlc0Zyb21SZWdpc3RyYXRpb25zIiwiZ2V0UmVnaXN0cmF0aW9ucyIsInJlcXVpcmUiLCJyZWdpc3RyYXRpb25zIiwibG9jYXRpb25zIiwiciIsIm9wcG9ydHVuaXR5TG9jYXRpb24iLCJCb29sZWFuIiwibW9zdENvbW1vbkxvY2F0aW9uIiwicGFydHMiLCJzcGxpdCIsInAiLCJ0cmltIiwiY2F1c2VLZXl3b3JkcyIsInJlZyIsInRpdGxlIiwib3Bwb3J0dW5pdHlUaXRsZSIsImNhdXNlcyIsImNhdXNlIiwicHVzaCIsInJlZ2lzdHJhdGlvbkNvdW50IiwiZ2V0UGVyc29uYWxpemVkT3Bwb3J0dW5pdGllcyIsImZpbHRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/contentstack/personalize.ts\n"));

/***/ })

});