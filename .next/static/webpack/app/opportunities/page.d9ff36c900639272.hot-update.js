"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/opportunities/page",{

/***/ "(app-pages-browser)/./src/components/opportunities/OpportunitiesPageClient.tsx":
/*!******************************************************************!*\
  !*** ./src/components/opportunities/OpportunitiesPageClient.tsx ***!
  \******************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpportunitiesPageClient: function() { return /* binding */ OpportunitiesPageClient; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./src/lib/utils/index.ts\");\n/* harmony import */ var _lib_utils_personalize_sort__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/utils/personalize-sort */ \"(app-pages-browser)/./src/lib/utils/personalize-sort.ts\");\n/* harmony import */ var _OpportunityFilters__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OpportunityFilters */ \"(app-pages-browser)/./src/components/opportunities/OpportunityFilters.tsx\");\n/* harmony import */ var _OpportunityList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./OpportunityList */ \"(app-pages-browser)/./src/components/opportunities/OpportunityList.tsx\");\n/* harmony import */ var _LocationFilter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./LocationFilter */ \"(app-pages-browser)/./src/components/opportunities/LocationFilter.tsx\");\n/* harmony import */ var _OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./OpportunitiesPage.module.css */ \"(app-pages-browser)/./src/components/opportunities/OpportunitiesPage.module.css\");\n/* harmony import */ var _OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8__);\n/* __next_internal_client_entry_do_not_use__ OpportunitiesPageClient,default auto */ \nvar _s = $RefreshSig$();\n/**\n * OpportunitiesPageClient Component\n * Client-side wrapper for the opportunities page with filter state management\n * Shows all opportunities by default, filters are optional\n * Includes smart search bar for filtering by text\n */ \n\n\n\n\n\n\n\nfunction OpportunitiesPageClient(param) {\n    let { initialOpportunities, initialTotal, initialPage, pageSize, initialHasMore, initialStatusFilter = \"active\", causes, locations, initialLocation, initialIsVirtual, hasActiveFilters, content } = param;\n    _s();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [isPending, startTransition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useTransition)();\n    const isInitialMount = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // State\n    const [selectedLocation, setSelectedLocation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialLocation);\n    const [isVirtual, setIsVirtual] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialIsVirtual);\n    const [opportunities, setOpportunities] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialOpportunities);\n    const [total, setTotal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialTotal);\n    const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialPage);\n    const [hasMore, setHasMore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialHasMore);\n    const [statusFilter, setStatusFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialStatusFilter);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Search state\n    const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [debouncedSearch, setDebouncedSearch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const searchInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        contributionTypes: [],\n        causes: [],\n        timeFilter: null\n    });\n    // Debounce search input\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setDebouncedSearch(searchQuery);\n        }, 300);\n        return ()=>clearTimeout(timer);\n    }, [\n        searchQuery\n    ]);\n    // Filter opportunities based on search query (client-side)\n    const filteredOpportunities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        let filtered = opportunities;\n        // Apply search filter if present\n        if (debouncedSearch.trim()) {\n            const query = debouncedSearch.toLowerCase().trim();\n            const searchTerms = query.split(/\\s+/).filter(Boolean);\n            filtered = opportunities.filter((opp)=>{\n                // Build searchable text from opportunity fields\n                const searchableText = [\n                    opp.title,\n                    opp.summary,\n                    opp.city,\n                    opp.state,\n                    opp.country,\n                    opp.organizerName,\n                    ...opp.causeSlugs || [],\n                    ...opp.contributionTypes || []\n                ].filter(Boolean).join(\" \").toLowerCase();\n                // Check if all search terms are found\n                return searchTerms.every((term)=>searchableText.includes(term));\n            });\n        }\n        // Apply personalized sorting (only if no active filters)\n        // Personalization is applied when user has no active filters\n        // to show most relevant opportunities first\n        if (!hasAnyFilters && filtered.length > 0) {\n            filtered = (0,_lib_utils_personalize_sort__WEBPACK_IMPORTED_MODULE_4__.sortOpportunitiesByRelevance)(filtered);\n        }\n        return filtered;\n    }, [\n        opportunities,\n        debouncedSearch,\n        hasAnyFilters\n    ]);\n    // Get filtered total\n    const filteredTotal = debouncedSearch.trim() ? filteredOpportunities.length : total;\n    // Check if any filters are active\n    const hasAnyFilters = !!(selectedLocation || isVirtual || filters.contributionTypes.length > 0 || filters.causes.length > 0 || filters.timeFilter || debouncedSearch.trim());\n    // Update URL when filters change\n    const updateUrl = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newLocation, newIsVirtual, newFilters, newPage, newStatusFilter)=>{\n        const params = new URLSearchParams();\n        if (newLocation) params.set(\"location\", newLocation);\n        if (newIsVirtual) params.set(\"virtual\", \"true\");\n        if (newFilters.contributionTypes.length > 0) {\n            params.set(\"types\", newFilters.contributionTypes.join(\",\"));\n        }\n        if (newFilters.causes.length > 0) {\n            params.set(\"causes\", newFilters.causes.join(\",\"));\n        }\n        if (newFilters.timeFilter) {\n            params.set(\"time\", newFilters.timeFilter);\n        }\n        if (newPage > 1) params.set(\"page\", newPage.toString());\n        if (newStatusFilter !== \"active\") params.set(\"status\", newStatusFilter);\n        const queryString = params.toString();\n        const newUrl = queryString ? \"?\".concat(queryString) : \"/opportunities\";\n        startTransition(()=>{\n            router.push(newUrl, {\n                scroll: false\n            });\n        });\n    }, [\n        router\n    ]);\n    // Fetch opportunities when filters change\n    const fetchOpportunities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        setIsLoading(true);\n        try {\n            // Build query params for API\n            const params = new URLSearchParams();\n            if (selectedLocation) params.set(\"location\", selectedLocation);\n            if (isVirtual) params.set(\"virtual\", \"true\");\n            if (filters.contributionTypes.length > 0) {\n                params.set(\"types\", filters.contributionTypes.join(\",\"));\n            }\n            if (filters.causes.length > 0) {\n                params.set(\"causes\", filters.causes.join(\",\"));\n            }\n            if (filters.timeFilter) {\n                const dateRange = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.getDateRangeForFilter)(filters.timeFilter);\n                params.set(\"startDate\", dateRange.startDate);\n                if (dateRange.endDate) params.set(\"endDate\", dateRange.endDate);\n            }\n            params.set(\"page\", page.toString());\n            params.set(\"pageSize\", pageSize.toString());\n            params.set(\"sort\", \"date_asc\"); // Always sort by date ascending\n            // Set status based on filter\n            if (statusFilter === \"active\") {\n                params.set(\"status\", \"upcoming,ongoing\");\n            } else {\n                params.set(\"status\", \"completed\");\n            }\n            const response = await fetch(\"/api/opportunities?\".concat(params.toString()));\n            const data = await response.json();\n            setOpportunities(data.opportunities);\n            setTotal(data.total);\n            setHasMore(data.hasMore);\n        } catch (error) {\n            console.error(\"Failed to fetch opportunities:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        page,\n        pageSize,\n        statusFilter,\n        hasAnyFilters\n    ]);\n    // Fetch when dependencies change (but not on initial mount)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Skip initial fetch as we have server-rendered data\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n            // Only skip if all conditions match initial state\n            if (selectedLocation === initialLocation && isVirtual === initialIsVirtual && page === initialPage && statusFilter === initialStatusFilter && filters.contributionTypes.length === 0 && filters.causes.length === 0 && filters.timeFilter === null) {\n                return;\n            }\n        }\n        fetchOpportunities();\n    }, [\n        fetchOpportunities,\n        selectedLocation,\n        isVirtual,\n        initialLocation,\n        initialIsVirtual,\n        initialPage,\n        initialStatusFilter,\n        page,\n        filters,\n        statusFilter\n    ]);\n    // Handle location selection\n    const handleLocationSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(locationSlug) {\n        let virtual = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        setSelectedLocation(locationSlug);\n        setIsVirtual(virtual);\n        setPage(1);\n        updateUrl(locationSlug, virtual, filters, 1, statusFilter);\n    }, [\n        filters,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle filter changes\n    const handleFiltersChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newFilters)=>{\n        setFilters(newFilters);\n        setPage(1);\n        updateUrl(selectedLocation, isVirtual, newFilters, 1, statusFilter);\n    }, [\n        selectedLocation,\n        isVirtual,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle status filter change\n    const handleStatusFilterChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newStatusFilter)=>{\n        setStatusFilter(newStatusFilter);\n        setPage(1);\n        updateUrl(selectedLocation, isVirtual, filters, 1, newStatusFilter);\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        updateUrl\n    ]);\n    // Handle page change\n    const handlePageChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newPage)=>{\n        setPage(newPage);\n        updateUrl(selectedLocation, isVirtual, filters, newPage, statusFilter);\n        // Scroll to top of list\n        window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        });\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle clear filters\n    const handleClearFilters = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const clearedFilters = {\n            contributionTypes: [],\n            causes: [],\n            timeFilter: null\n        };\n        setFilters(clearedFilters);\n        setSelectedLocation(null);\n        setIsVirtual(false);\n        setSearchQuery(\"\");\n        setDebouncedSearch(\"\");\n        setPage(1);\n        updateUrl(null, false, clearedFilters, 1, statusFilter);\n    }, [\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle search input change\n    const handleSearchChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        setSearchQuery(e.target.value);\n    }, []);\n    // Handle search clear\n    const handleSearchClear = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        var _searchInputRef_current;\n        setSearchQuery(\"\");\n        setDebouncedSearch(\"\");\n        (_searchInputRef_current = searchInputRef.current) === null || _searchInputRef_current === void 0 ? void 0 : _searchInputRef_current.focus();\n    }, []);\n    // Get the title based on active filters\n    const getPageTitle = ()=>{\n        if (isVirtual) return \"Virtual Opportunities\";\n        if (selectedLocation) {\n            var _locations_find;\n            const locationName = ((_locations_find = locations.find((l)=>l.slug === selectedLocation)) === null || _locations_find === void 0 ? void 0 : _locations_find.name) || selectedLocation;\n            return \"Opportunities in \".concat(locationName);\n        }\n        return \"Discover Opportunities\";\n    };\n    // Get selected location name\n    const getSelectedLocationName = ()=>{\n        if (isVirtual) return \"Virtual / Remote\";\n        if (selectedLocation) {\n            const location = locations.find((l)=>l.slug === selectedLocation);\n            return (location === null || location === void 0 ? void 0 : location.name) || selectedLocation;\n        }\n        return null;\n    };\n    // Get subtitle/helper text\n    const getSubtitle = ()=>{\n        if (!hasAnyFilters) {\n            return content.subtitle_all || \"Showing all opportunities. Apply filters to narrow results.\";\n        }\n        const activeFilterCount = [\n            selectedLocation ? 1 : 0,\n            isVirtual ? 1 : 0,\n            filters.contributionTypes.length > 0 ? 1 : 0,\n            filters.causes.length > 0 ? 1 : 0,\n            filters.timeFilter ? 1 : 0\n        ].reduce((a, b)=>a + b, 0);\n        return \"\".concat(total, \" opportunity\").concat(total !== 1 ? \"ies\" : \"\", \" found with \").concat(activeFilterCount, \" filter\").concat(activeFilterCount !== 1 ? \"s\" : \"\", \" applied.\");\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().page),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().container),\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().header),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().headerContent),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().title),\n                                    children: getPageTitle()\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 355,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().subtitle),\n                                    children: getSubtitle()\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 356,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 354,\n                            columnNumber: 11\n                        }, this),\n                        hasAnyFilters && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().clearFiltersButton),\n                            onClick: handleClearFilters,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    width: \"18\",\n                                    height: \"18\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    \"aria-hidden\": \"true\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        d: \"M6 18L18 6M6 6l12 12\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 367,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 366,\n                                    columnNumber: 15\n                                }, this),\n                                content.clear_filters_text || \"Clear All Filters\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 361,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 353,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchSection),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchWrapper),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchIcon),\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    \"aria-hidden\": \"true\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                            cx: \"11\",\n                                            cy: \"11\",\n                                            r: \"8\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 388,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            d: \"m21 21-4.35-4.35\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 389,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 377,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    ref: searchInputRef,\n                                    type: \"search\",\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchInput),\n                                    placeholder: content.search_placeholder || \"Search opportunities...\",\n                                    value: searchQuery,\n                                    onChange: handleSearchChange,\n                                    \"aria-label\": \"Search opportunities\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 391,\n                                    columnNumber: 13\n                                }, this),\n                                searchQuery && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchClear),\n                                    onClick: handleSearchClear,\n                                    \"aria-label\": \"Clear search\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        viewBox: \"0 0 24 24\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"2\",\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M18 6 6 18\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                                lineNumber: 416,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"m6 6 12 12\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                                lineNumber: 417,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 407,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 401,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 376,\n                            columnNumber: 11\n                        }, this),\n                        debouncedSearch && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchResults),\n                            children: [\n                                \"Found \",\n                                filteredTotal,\n                                \" result\",\n                                filteredTotal !== 1 ? \"s\" : \"\",\n                                ' for \"',\n                                debouncedSearch,\n                                '\"'\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 423,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 375,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().content),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().sidebar),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().locationSection),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_LocationFilter__WEBPACK_IMPORTED_MODULE_7__.LocationFilter, {\n                                        locations: locations,\n                                        selectedLocation: selectedLocation,\n                                        isVirtual: isVirtual,\n                                        onLocationChange: handleLocationSelect\n                                    }, void 0, false, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 434,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 433,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().otherFilters),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().sidebarTitle),\n                                            children: content.filters_title || \"Filters\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 444,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_OpportunityFilters__WEBPACK_IMPORTED_MODULE_5__.OpportunityFilters, {\n                                            causes: causes,\n                                            filters: filters,\n                                            onFiltersChange: handleFiltersChange,\n                                            layout: \"vertical\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 445,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 443,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 431,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().main),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_OpportunityList__WEBPACK_IMPORTED_MODULE_6__.OpportunityList, {\n                                opportunities: filteredOpportunities,\n                                total: filteredTotal,\n                                page: page,\n                                pageSize: pageSize,\n                                hasMore: hasMore && !debouncedSearch.trim(),\n                                isLoading: isLoading || isPending,\n                                statusFilter: statusFilter,\n                                onStatusFilterChange: handleStatusFilterChange,\n                                onPageChange: handlePageChange,\n                                onClearFilters: handleClearFilters,\n                                showAllMessage: !hasAnyFilters,\n                                selectedLocationName: getSelectedLocationName(),\n                                content: content\n                            }, void 0, false, {\n                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                lineNumber: 456,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 455,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 429,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n            lineNumber: 351,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n        lineNumber: 350,\n        columnNumber: 5\n    }, this);\n}\n_s(OpportunitiesPageClient, \"h7XbT5nUHXTEa3cDYbE9j9HTrsY=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        react__WEBPACK_IMPORTED_MODULE_1__.useTransition\n    ];\n});\n_c = OpportunitiesPageClient;\n/* harmony default export */ __webpack_exports__[\"default\"] = (OpportunitiesPageClient);\nvar _c;\n$RefreshReg$(_c, \"OpportunitiesPageClient\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL29wcG9ydHVuaXRpZXMvT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7Ozs7O0NBS0MsR0FFd0Y7QUFDN0M7QUFTUTtBQUN3QjtBQUNQO0FBQ2pCO0FBQ0Y7QUFDRTtBQXVCN0MsU0FBU2Msd0JBQXdCLEtBYVQ7UUFiUyxFQUN0Q0Msb0JBQW9CLEVBQ3BCQyxZQUFZLEVBQ1pDLFdBQVcsRUFDWEMsUUFBUSxFQUNSQyxjQUFjLEVBQ2RDLHNCQUFzQixRQUFRLEVBQzlCQyxNQUFNLEVBQ05DLFNBQVMsRUFDVEMsZUFBZSxFQUNmQyxnQkFBZ0IsRUFDaEJDLGdCQUFnQixFQUNoQkMsT0FBTyxFQUNzQixHQWJTOztJQWN0QyxNQUFNQyxTQUFTckIsMERBQVNBO0lBQ3hCLE1BQU0sQ0FBQ3NCLFdBQVdDLGdCQUFnQixHQUFHMUIsb0RBQWFBO0lBQ2xELE1BQU0yQixpQkFBaUJ6Qiw2Q0FBTUEsQ0FBQztJQUU5QixRQUFRO0lBQ1IsTUFBTSxDQUFDMEIsa0JBQWtCQyxvQkFBb0IsR0FBR2hDLCtDQUFRQSxDQUFnQnVCO0lBQ3hFLE1BQU0sQ0FBQ1UsV0FBV0MsYUFBYSxHQUFHbEMsK0NBQVFBLENBQUN3QjtJQUMzQyxNQUFNLENBQUNXLGVBQWVDLGlCQUFpQixHQUFHcEMsK0NBQVFBLENBQUNlO0lBQ25ELE1BQU0sQ0FBQ3NCLE9BQU9DLFNBQVMsR0FBR3RDLCtDQUFRQSxDQUFDZ0I7SUFDbkMsTUFBTSxDQUFDdUIsTUFBTUMsUUFBUSxHQUFHeEMsK0NBQVFBLENBQUNpQjtJQUNqQyxNQUFNLENBQUN3QixTQUFTQyxXQUFXLEdBQUcxQywrQ0FBUUEsQ0FBQ21CO0lBQ3ZDLE1BQU0sQ0FBQ3dCLGNBQWNDLGdCQUFnQixHQUFHNUMsK0NBQVFBLENBQXlCb0I7SUFDekUsTUFBTSxDQUFDeUIsV0FBV0MsYUFBYSxHQUFHOUMsK0NBQVFBLENBQUM7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QUFXakksOEVBQWM7OzhDQUU5Qiw4REFBQ2dJO29DQUFJQyxXQUFXakksc0ZBQXNCOzhDQUNwQyw0RUFBQ0QsMkRBQWNBO3dDQUNiVSxXQUFXQTt3Q0FDWFMsa0JBQWtCQTt3Q0FDbEJFLFdBQVdBO3dDQUNYeUosa0JBQWtCN0U7Ozs7Ozs7Ozs7OzhDQUt0Qiw4REFBQ2dDO29DQUFJQyxXQUFXakksbUZBQW1COztzREFDakMsOERBQUMrSzs0Q0FBRzlDLFdBQVdqSSxtRkFBbUI7c0RBQUdhLFFBQVFvSyxhQUFhLElBQUk7Ozs7OztzREFDOUQsOERBQUNwTCxtRUFBT0E7NENBQ05XLFFBQVFBOzRDQUNSK0IsU0FBU0E7NENBQ1QySSxpQkFBaUIvRTs0Q0FDakJnRixRQUFPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7c0NBTWIsOERBQUNDOzRCQUFLbkQsV0FBV2pJLDJFQUFXO3NDQUMxQiw0RUFBQ0YsNkRBQWVBO2dDQUNkd0IsZUFBZXdCO2dDQUNmdEIsT0FBTzhDO2dDQUNQNUMsTUFBTUE7Z0NBQ05yQixVQUFVQTtnQ0FDVnVCLFNBQVNBLFdBQVcsQ0FBQ1EsZ0JBQWdCWSxJQUFJO2dDQUN6Q2hCLFdBQVdBLGFBQWFqQjtnQ0FDeEJlLGNBQWNBO2dDQUNkdUosc0JBQXNCakY7Z0NBQ3RCa0YsY0FBY2pGO2dDQUNka0YsZ0JBQWdCN0U7Z0NBQ2hCOEUsZ0JBQWdCLENBQUNwSDtnQ0FDakJxSCxzQkFBc0JqRTtnQ0FDdEIzRyxTQUFTQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU92QjtHQTVhZ0JaOztRQWNDUixzREFBU0E7UUFDYUgsZ0RBQWFBOzs7S0FmcENXO0FBOGFoQiwrREFBZUEsdUJBQXVCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb21wb25lbnRzL29wcG9ydHVuaXRpZXMvT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQudHN4PzM5NzciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG4vKipcbiAqIE9wcG9ydHVuaXRpZXNQYWdlQ2xpZW50IENvbXBvbmVudFxuICogQ2xpZW50LXNpZGUgd3JhcHBlciBmb3IgdGhlIG9wcG9ydHVuaXRpZXMgcGFnZSB3aXRoIGZpbHRlciBzdGF0ZSBtYW5hZ2VtZW50XG4gKiBTaG93cyBhbGwgb3Bwb3J0dW5pdGllcyBieSBkZWZhdWx0LCBmaWx0ZXJzIGFyZSBvcHRpb25hbFxuICogSW5jbHVkZXMgc21hcnQgc2VhcmNoIGJhciBmb3IgZmlsdGVyaW5nIGJ5IHRleHRcbiAqL1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlVHJhbnNpdGlvbiwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCB0eXBlIHtcbiAgT3Bwb3J0dW5pdHlTdW1tYXJ5LFxuICBDYXVzZVJlZmVyZW5jZSxcbiAgTG9jYXRpb25SZWZlcmVuY2UsXG4gIENvbnRyaWJ1dGlvblR5cGUsXG59IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBUaW1lRmlsdGVyIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBEaXNjb3ZlclBhZ2VDb250ZW50IH0gZnJvbSAnQC9saWIvY29udGVudHN0YWNrJztcbmltcG9ydCB7IGdldERhdGVSYW5nZUZvckZpbHRlciB9IGZyb20gJ0AvbGliL3V0aWxzJztcbmltcG9ydCB7IHNvcnRPcHBvcnR1bml0aWVzQnlSZWxldmFuY2UgfSBmcm9tICdAL2xpYi91dGlscy9wZXJzb25hbGl6ZS1zb3J0JztcbmltcG9ydCB7IE9wcG9ydHVuaXR5RmlsdGVycyBhcyBGaWx0ZXJzIH0gZnJvbSAnLi9PcHBvcnR1bml0eUZpbHRlcnMnO1xuaW1wb3J0IHsgT3Bwb3J0dW5pdHlMaXN0IH0gZnJvbSAnLi9PcHBvcnR1bml0eUxpc3QnO1xuaW1wb3J0IHsgTG9jYXRpb25GaWx0ZXIgfSBmcm9tICcuL0xvY2F0aW9uRmlsdGVyJztcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9PcHBvcnR1bml0aWVzUGFnZS5tb2R1bGUuY3NzJztcblxuaW50ZXJmYWNlIEZpbHRlclN0YXRlIHtcbiAgY29udHJpYnV0aW9uVHlwZXM6IENvbnRyaWJ1dGlvblR5cGVbXTtcbiAgY2F1c2VzOiBzdHJpbmdbXTtcbiAgdGltZUZpbHRlcjogVGltZUZpbHRlciB8IG51bGw7XG59XG5cbmludGVyZmFjZSBPcHBvcnR1bml0aWVzUGFnZUNsaWVudFByb3BzIHtcbiAgaW5pdGlhbE9wcG9ydHVuaXRpZXM6IE9wcG9ydHVuaXR5U3VtbWFyeVtdO1xuICBpbml0aWFsVG90YWw6IG51bWJlcjtcbiAgaW5pdGlhbFBhZ2U6IG51bWJlcjtcbiAgcGFnZVNpemU6IG51bWJlcjtcbiAgaW5pdGlhbEhhc01vcmU6IGJvb2xlYW47XG4gIGluaXRpYWxTdGF0dXNGaWx0ZXI/OiAnYWN0aXZlJyB8ICdjb21wbGV0ZWQnO1xuICBjYXVzZXM6IENhdXNlUmVmZXJlbmNlW107XG4gIGxvY2F0aW9uczogTG9jYXRpb25SZWZlcmVuY2VbXTtcbiAgaW5pdGlhbExvY2F0aW9uOiBzdHJpbmcgfCBudWxsO1xuICBpbml0aWFsSXNWaXJ0dWFsOiBib29sZWFuO1xuICBoYXNBY3RpdmVGaWx0ZXJzOiBib29sZWFuO1xuICBjb250ZW50OiBEaXNjb3ZlclBhZ2VDb250ZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQoe1xuICBpbml0aWFsT3Bwb3J0dW5pdGllcyxcbiAgaW5pdGlhbFRvdGFsLFxuICBpbml0aWFsUGFnZSxcbiAgcGFnZVNpemUsXG4gIGluaXRpYWxIYXNNb3JlLFxuICBpbml0aWFsU3RhdHVzRmlsdGVyID0gJ2FjdGl2ZScsXG4gIGNhdXNlcyxcbiAgbG9jYXRpb25zLFxuICBpbml0aWFsTG9jYXRpb24sXG4gIGluaXRpYWxJc1ZpcnR1YWwsXG4gIGhhc0FjdGl2ZUZpbHRlcnMsXG4gIGNvbnRlbnQsXG59OiBPcHBvcnR1bml0aWVzUGFnZUNsaWVudFByb3BzKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBbaXNQZW5kaW5nLCBzdGFydFRyYW5zaXRpb25dID0gdXNlVHJhbnNpdGlvbigpO1xuICBjb25zdCBpc0luaXRpYWxNb3VudCA9IHVzZVJlZih0cnVlKTtcblxuICAvLyBTdGF0ZVxuICBjb25zdCBbc2VsZWN0ZWRMb2NhdGlvbiwgc2V0U2VsZWN0ZWRMb2NhdGlvbl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihpbml0aWFsTG9jYXRpb24pO1xuICBjb25zdCBbaXNWaXJ0dWFsLCBzZXRJc1ZpcnR1YWxdID0gdXNlU3RhdGUoaW5pdGlhbElzVmlydHVhbCk7XG4gIGNvbnN0IFtvcHBvcnR1bml0aWVzLCBzZXRPcHBvcnR1bml0aWVzXSA9IHVzZVN0YXRlKGluaXRpYWxPcHBvcnR1bml0aWVzKTtcbiAgY29uc3QgW3RvdGFsLCBzZXRUb3RhbF0gPSB1c2VTdGF0ZShpbml0aWFsVG90YWwpO1xuICBjb25zdCBbcGFnZSwgc2V0UGFnZV0gPSB1c2VTdGF0ZShpbml0aWFsUGFnZSk7XG4gIGNvbnN0IFtoYXNNb3JlLCBzZXRIYXNNb3JlXSA9IHVzZVN0YXRlKGluaXRpYWxIYXNNb3JlKTtcbiAgY29uc3QgW3N0YXR1c0ZpbHRlciwgc2V0U3RhdHVzRmlsdGVyXSA9IHVzZVN0YXRlPCdhY3RpdmUnIHwgJ2NvbXBsZXRlZCc+KGluaXRpYWxTdGF0dXNGaWx0ZXIpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIFNlYXJjaCBzdGF0ZVxuICBjb25zdCBbc2VhcmNoUXVlcnksIHNldFNlYXJjaFF1ZXJ5XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2RlYm91bmNlZFNlYXJjaCwgc2V0RGVib3VuY2VkU2VhcmNoXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3Qgc2VhcmNoSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XG5cbiAgY29uc3QgW2ZpbHRlcnMsIHNldEZpbHRlcnNdID0gdXNlU3RhdGU8RmlsdGVyU3RhdGU+KHtcbiAgICBjb250cmlidXRpb25UeXBlczogW10sXG4gICAgY2F1c2VzOiBbXSxcbiAgICB0aW1lRmlsdGVyOiBudWxsLFxuICB9KTtcblxuICAvLyBEZWJvdW5jZSBzZWFyY2ggaW5wdXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0RGVib3VuY2VkU2VhcmNoKHNlYXJjaFF1ZXJ5KTtcbiAgICB9LCAzMDApO1xuICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpO1xuICB9LCBbc2VhcmNoUXVlcnldKTtcblxuICAvLyBGaWx0ZXIgb3Bwb3J0dW5pdGllcyBiYXNlZCBvbiBzZWFyY2ggcXVlcnkgKGNsaWVudC1zaWRlKVxuICBjb25zdCBmaWx0ZXJlZE9wcG9ydHVuaXRpZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgZmlsdGVyZWQgPSBvcHBvcnR1bml0aWVzO1xuICAgIFxuICAgIC8vIEFwcGx5IHNlYXJjaCBmaWx0ZXIgaWYgcHJlc2VudFxuICAgIGlmIChkZWJvdW5jZWRTZWFyY2gudHJpbSgpKSB7XG4gICAgICBjb25zdCBxdWVyeSA9IGRlYm91bmNlZFNlYXJjaC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHNlYXJjaFRlcm1zID0gcXVlcnkuc3BsaXQoL1xccysvKS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgIGZpbHRlcmVkID0gb3Bwb3J0dW5pdGllcy5maWx0ZXIoKG9wcCkgPT4ge1xuICAgICAgICAvLyBCdWlsZCBzZWFyY2hhYmxlIHRleHQgZnJvbSBvcHBvcnR1bml0eSBmaWVsZHNcbiAgICAgICAgY29uc3Qgc2VhcmNoYWJsZVRleHQgPSBbXG4gICAgICAgICAgb3BwLnRpdGxlLFxuICAgICAgICAgIG9wcC5zdW1tYXJ5LFxuICAgICAgICAgIG9wcC5jaXR5LFxuICAgICAgICAgIG9wcC5zdGF0ZSxcbiAgICAgICAgICBvcHAuY291bnRyeSxcbiAgICAgICAgICBvcHAub3JnYW5pemVyTmFtZSxcbiAgICAgICAgICAuLi4ob3BwLmNhdXNlU2x1Z3MgfHwgW10pLFxuICAgICAgICAgIC4uLihvcHAuY29udHJpYnV0aW9uVHlwZXMgfHwgW10pLFxuICAgICAgICBdXG4gICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAgIC5qb2luKCcgJylcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyBDaGVjayBpZiBhbGwgc2VhcmNoIHRlcm1zIGFyZSBmb3VuZFxuICAgICAgICByZXR1cm4gc2VhcmNoVGVybXMuZXZlcnkoKHRlcm0pID0+IHNlYXJjaGFibGVUZXh0LmluY2x1ZGVzKHRlcm0pKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBcHBseSBwZXJzb25hbGl6ZWQgc29ydGluZyAob25seSBpZiBubyBhY3RpdmUgZmlsdGVycylcbiAgICAvLyBQZXJzb25hbGl6YXRpb24gaXMgYXBwbGllZCB3aGVuIHVzZXIgaGFzIG5vIGFjdGl2ZSBmaWx0ZXJzXG4gICAgLy8gdG8gc2hvdyBtb3N0IHJlbGV2YW50IG9wcG9ydHVuaXRpZXMgZmlyc3RcbiAgICBpZiAoIWhhc0FueUZpbHRlcnMgJiYgZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgZmlsdGVyZWQgPSBzb3J0T3Bwb3J0dW5pdGllc0J5UmVsZXZhbmNlKGZpbHRlcmVkKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZpbHRlcmVkO1xuICB9LCBbb3Bwb3J0dW5pdGllcywgZGVib3VuY2VkU2VhcmNoLCBoYXNBbnlGaWx0ZXJzXSk7XG5cbiAgLy8gR2V0IGZpbHRlcmVkIHRvdGFsXG4gIGNvbnN0IGZpbHRlcmVkVG90YWwgPSBkZWJvdW5jZWRTZWFyY2gudHJpbSgpID8gZmlsdGVyZWRPcHBvcnR1bml0aWVzLmxlbmd0aCA6IHRvdGFsO1xuXG4gIC8vIENoZWNrIGlmIGFueSBmaWx0ZXJzIGFyZSBhY3RpdmVcbiAgY29uc3QgaGFzQW55RmlsdGVycyA9ICEhKFxuICAgIHNlbGVjdGVkTG9jYXRpb24gfHxcbiAgICBpc1ZpcnR1YWwgfHxcbiAgICBmaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmxlbmd0aCA+IDAgfHxcbiAgICBmaWx0ZXJzLmNhdXNlcy5sZW5ndGggPiAwIHx8XG4gICAgZmlsdGVycy50aW1lRmlsdGVyIHx8XG4gICAgZGVib3VuY2VkU2VhcmNoLnRyaW0oKVxuICApO1xuXG4gIC8vIFVwZGF0ZSBVUkwgd2hlbiBmaWx0ZXJzIGNoYW5nZVxuICBjb25zdCB1cGRhdGVVcmwgPSB1c2VDYWxsYmFjayhcbiAgICAobmV3TG9jYXRpb246IHN0cmluZyB8IG51bGwsIG5ld0lzVmlydHVhbDogYm9vbGVhbiwgbmV3RmlsdGVyczogRmlsdGVyU3RhdGUsIG5ld1BhZ2U6IG51bWJlciwgbmV3U3RhdHVzRmlsdGVyOiAnYWN0aXZlJyB8ICdjb21wbGV0ZWQnKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cbiAgICAgIGlmIChuZXdMb2NhdGlvbikgcGFyYW1zLnNldCgnbG9jYXRpb24nLCBuZXdMb2NhdGlvbik7XG4gICAgICBpZiAobmV3SXNWaXJ0dWFsKSBwYXJhbXMuc2V0KCd2aXJ0dWFsJywgJ3RydWUnKTtcbiAgICAgIGlmIChuZXdGaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgndHlwZXMnLCBuZXdGaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmpvaW4oJywnKSk7XG4gICAgICB9XG4gICAgICBpZiAobmV3RmlsdGVycy5jYXVzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdjYXVzZXMnLCBuZXdGaWx0ZXJzLmNhdXNlcy5qb2luKCcsJykpO1xuICAgICAgfVxuICAgICAgaWYgKG5ld0ZpbHRlcnMudGltZUZpbHRlcikge1xuICAgICAgICBwYXJhbXMuc2V0KCd0aW1lJywgbmV3RmlsdGVycy50aW1lRmlsdGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXdQYWdlID4gMSkgcGFyYW1zLnNldCgncGFnZScsIG5ld1BhZ2UudG9TdHJpbmcoKSk7XG4gICAgICBpZiAobmV3U3RhdHVzRmlsdGVyICE9PSAnYWN0aXZlJykgcGFyYW1zLnNldCgnc3RhdHVzJywgbmV3U3RhdHVzRmlsdGVyKTtcblxuICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IG5ld1VybCA9IHF1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiAnL29wcG9ydHVuaXRpZXMnO1xuXG4gICAgICBzdGFydFRyYW5zaXRpb24oKCkgPT4ge1xuICAgICAgICByb3V0ZXIucHVzaChuZXdVcmwsIHsgc2Nyb2xsOiBmYWxzZSB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3JvdXRlcl1cbiAgKTtcblxuICAvLyBGZXRjaCBvcHBvcnR1bml0aWVzIHdoZW4gZmlsdGVycyBjaGFuZ2VcbiAgY29uc3QgZmV0Y2hPcHBvcnR1bml0aWVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHNldElzTG9hZGluZyh0cnVlKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBCdWlsZCBxdWVyeSBwYXJhbXMgZm9yIEFQSVxuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgXG4gICAgICBpZiAoc2VsZWN0ZWRMb2NhdGlvbikgcGFyYW1zLnNldCgnbG9jYXRpb24nLCBzZWxlY3RlZExvY2F0aW9uKTtcbiAgICAgIGlmIChpc1ZpcnR1YWwpIHBhcmFtcy5zZXQoJ3ZpcnR1YWwnLCAndHJ1ZScpO1xuICAgICAgaWYgKGZpbHRlcnMuY29udHJpYnV0aW9uVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCd0eXBlcycsIGZpbHRlcnMuY29udHJpYnV0aW9uVHlwZXMuam9pbignLCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLmNhdXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ2NhdXNlcycsIGZpbHRlcnMuY2F1c2VzLmpvaW4oJywnKSk7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVycy50aW1lRmlsdGVyKSB7XG4gICAgICAgIGNvbnN0IGRhdGVSYW5nZSA9IGdldERhdGVSYW5nZUZvckZpbHRlcihmaWx0ZXJzLnRpbWVGaWx0ZXIpO1xuICAgICAgICBwYXJhbXMuc2V0KCdzdGFydERhdGUnLCBkYXRlUmFuZ2Uuc3RhcnREYXRlKTtcbiAgICAgICAgaWYgKGRhdGVSYW5nZS5lbmREYXRlKSBwYXJhbXMuc2V0KCdlbmREYXRlJywgZGF0ZVJhbmdlLmVuZERhdGUpO1xuICAgICAgfVxuICAgICAgcGFyYW1zLnNldCgncGFnZScsIHBhZ2UudG9TdHJpbmcoKSk7XG4gICAgICBwYXJhbXMuc2V0KCdwYWdlU2l6ZScsIHBhZ2VTaXplLnRvU3RyaW5nKCkpO1xuICAgICAgcGFyYW1zLnNldCgnc29ydCcsICdkYXRlX2FzYycpOyAvLyBBbHdheXMgc29ydCBieSBkYXRlIGFzY2VuZGluZ1xuICAgICAgLy8gU2V0IHN0YXR1cyBiYXNlZCBvbiBmaWx0ZXJcbiAgICAgIGlmIChzdGF0dXNGaWx0ZXIgPT09ICdhY3RpdmUnKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3N0YXR1cycsICd1cGNvbWluZyxvbmdvaW5nJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMuc2V0KCdzdGF0dXMnLCAnY29tcGxldGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvb3Bwb3J0dW5pdGllcz8ke3BhcmFtcy50b1N0cmluZygpfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgc2V0T3Bwb3J0dW5pdGllcyhkYXRhLm9wcG9ydHVuaXRpZXMpO1xuICAgICAgc2V0VG90YWwoZGF0YS50b3RhbCk7XG4gICAgICBzZXRIYXNNb3JlKGRhdGEuaGFzTW9yZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBvcHBvcnR1bml0aWVzOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIGZpbHRlcnMsIHBhZ2UsIHBhZ2VTaXplLCBzdGF0dXNGaWx0ZXIsIGhhc0FueUZpbHRlcnNdKTtcblxuICAvLyBGZXRjaCB3aGVuIGRlcGVuZGVuY2llcyBjaGFuZ2UgKGJ1dCBub3Qgb24gaW5pdGlhbCBtb3VudClcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBTa2lwIGluaXRpYWwgZmV0Y2ggYXMgd2UgaGF2ZSBzZXJ2ZXItcmVuZGVyZWQgZGF0YVxuICAgIGlmIChpc0luaXRpYWxNb3VudC5jdXJyZW50KSB7XG4gICAgICBpc0luaXRpYWxNb3VudC5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAvLyBPbmx5IHNraXAgaWYgYWxsIGNvbmRpdGlvbnMgbWF0Y2ggaW5pdGlhbCBzdGF0ZVxuICAgICAgaWYgKFxuICAgICAgICBzZWxlY3RlZExvY2F0aW9uID09PSBpbml0aWFsTG9jYXRpb24gJiZcbiAgICAgICAgaXNWaXJ0dWFsID09PSBpbml0aWFsSXNWaXJ0dWFsICYmXG4gICAgICAgIHBhZ2UgPT09IGluaXRpYWxQYWdlICYmXG4gICAgICAgIHN0YXR1c0ZpbHRlciA9PT0gaW5pdGlhbFN0YXR1c0ZpbHRlciAmJlxuICAgICAgICBmaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICBmaWx0ZXJzLmNhdXNlcy5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgZmlsdGVycy50aW1lRmlsdGVyID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZldGNoT3Bwb3J0dW5pdGllcygpO1xuICB9LCBbZmV0Y2hPcHBvcnR1bml0aWVzLCBzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIGluaXRpYWxMb2NhdGlvbiwgaW5pdGlhbElzVmlydHVhbCwgaW5pdGlhbFBhZ2UsIGluaXRpYWxTdGF0dXNGaWx0ZXIsIHBhZ2UsIGZpbHRlcnMsIHN0YXR1c0ZpbHRlcl0pO1xuXG4gIC8vIEhhbmRsZSBsb2NhdGlvbiBzZWxlY3Rpb25cbiAgY29uc3QgaGFuZGxlTG9jYXRpb25TZWxlY3QgPSB1c2VDYWxsYmFjayhcbiAgICAobG9jYXRpb25TbHVnOiBzdHJpbmcgfCBudWxsLCB2aXJ0dWFsOiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICAgIHNldFNlbGVjdGVkTG9jYXRpb24obG9jYXRpb25TbHVnKTtcbiAgICAgIHNldElzVmlydHVhbCh2aXJ0dWFsKTtcbiAgICAgIHNldFBhZ2UoMSk7XG4gICAgICB1cGRhdGVVcmwobG9jYXRpb25TbHVnLCB2aXJ0dWFsLCBmaWx0ZXJzLCAxLCBzdGF0dXNGaWx0ZXIpO1xuICAgIH0sXG4gICAgW2ZpbHRlcnMsIHN0YXR1c0ZpbHRlciwgdXBkYXRlVXJsXVxuICApO1xuXG4gIC8vIEhhbmRsZSBmaWx0ZXIgY2hhbmdlc1xuICBjb25zdCBoYW5kbGVGaWx0ZXJzQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKG5ld0ZpbHRlcnM6IEZpbHRlclN0YXRlKSA9PiB7XG4gICAgICBzZXRGaWx0ZXJzKG5ld0ZpbHRlcnMpO1xuICAgICAgc2V0UGFnZSgxKTtcbiAgICAgIHVwZGF0ZVVybChzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIG5ld0ZpbHRlcnMsIDEsIHN0YXR1c0ZpbHRlcik7XG4gICAgfSxcbiAgICBbc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBzdGF0dXNGaWx0ZXIsIHVwZGF0ZVVybF1cbiAgKTtcblxuICAvLyBIYW5kbGUgc3RhdHVzIGZpbHRlciBjaGFuZ2VcbiAgY29uc3QgaGFuZGxlU3RhdHVzRmlsdGVyQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKG5ld1N0YXR1c0ZpbHRlcjogJ2FjdGl2ZScgfCAnY29tcGxldGVkJykgPT4ge1xuICAgICAgc2V0U3RhdHVzRmlsdGVyKG5ld1N0YXR1c0ZpbHRlcik7XG4gICAgICBzZXRQYWdlKDEpO1xuICAgICAgdXBkYXRlVXJsKHNlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgZmlsdGVycywgMSwgbmV3U3RhdHVzRmlsdGVyKTtcbiAgICB9LFxuICAgIFtzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIGZpbHRlcnMsIHVwZGF0ZVVybF1cbiAgKTtcblxuICAvLyBIYW5kbGUgcGFnZSBjaGFuZ2VcbiAgY29uc3QgaGFuZGxlUGFnZUNoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChuZXdQYWdlOiBudW1iZXIpID0+IHtcbiAgICAgIHNldFBhZ2UobmV3UGFnZSk7XG4gICAgICB1cGRhdGVVcmwoc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBmaWx0ZXJzLCBuZXdQYWdlLCBzdGF0dXNGaWx0ZXIpO1xuICAgICAgLy8gU2Nyb2xsIHRvIHRvcCBvZiBsaXN0XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IDAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9LFxuICAgIFtzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIGZpbHRlcnMsIHN0YXR1c0ZpbHRlciwgdXBkYXRlVXJsXVxuICApO1xuXG4gIC8vIEhhbmRsZSBjbGVhciBmaWx0ZXJzXG4gIGNvbnN0IGhhbmRsZUNsZWFyRmlsdGVycyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBjbGVhcmVkRmlsdGVyczogRmlsdGVyU3RhdGUgPSB7XG4gICAgICBjb250cmlidXRpb25UeXBlczogW10sXG4gICAgICBjYXVzZXM6IFtdLFxuICAgICAgdGltZUZpbHRlcjogbnVsbCxcbiAgICB9O1xuICAgIHNldEZpbHRlcnMoY2xlYXJlZEZpbHRlcnMpO1xuICAgIHNldFNlbGVjdGVkTG9jYXRpb24obnVsbCk7XG4gICAgc2V0SXNWaXJ0dWFsKGZhbHNlKTtcbiAgICBzZXRTZWFyY2hRdWVyeSgnJyk7XG4gICAgc2V0RGVib3VuY2VkU2VhcmNoKCcnKTtcbiAgICBzZXRQYWdlKDEpO1xuICAgIHVwZGF0ZVVybChudWxsLCBmYWxzZSwgY2xlYXJlZEZpbHRlcnMsIDEsIHN0YXR1c0ZpbHRlcik7XG4gIH0sIFtzdGF0dXNGaWx0ZXIsIHVwZGF0ZVVybF0pO1xuXG4gIC8vIEhhbmRsZSBzZWFyY2ggaW5wdXQgY2hhbmdlXG4gIGNvbnN0IGhhbmRsZVNlYXJjaENoYW5nZSA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIHNldFNlYXJjaFF1ZXJ5KGUudGFyZ2V0LnZhbHVlKTtcbiAgfSwgW10pO1xuXG4gIC8vIEhhbmRsZSBzZWFyY2ggY2xlYXJcbiAgY29uc3QgaGFuZGxlU2VhcmNoQ2xlYXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2VhcmNoUXVlcnkoJycpO1xuICAgIHNldERlYm91bmNlZFNlYXJjaCgnJyk7XG4gICAgc2VhcmNoSW5wdXRSZWYuY3VycmVudD8uZm9jdXMoKTtcbiAgfSwgW10pO1xuXG4gIC8vIEdldCB0aGUgdGl0bGUgYmFzZWQgb24gYWN0aXZlIGZpbHRlcnNcbiAgY29uc3QgZ2V0UGFnZVRpdGxlID0gKCkgPT4ge1xuICAgIGlmIChpc1ZpcnR1YWwpIHJldHVybiAnVmlydHVhbCBPcHBvcnR1bml0aWVzJztcbiAgICBpZiAoc2VsZWN0ZWRMb2NhdGlvbikge1xuICAgICAgY29uc3QgbG9jYXRpb25OYW1lID0gbG9jYXRpb25zLmZpbmQobCA9PiBsLnNsdWcgPT09IHNlbGVjdGVkTG9jYXRpb24pPy5uYW1lIHx8IHNlbGVjdGVkTG9jYXRpb247XG4gICAgICByZXR1cm4gYE9wcG9ydHVuaXRpZXMgaW4gJHtsb2NhdGlvbk5hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuICdEaXNjb3ZlciBPcHBvcnR1bml0aWVzJztcbiAgfTtcblxuICAvLyBHZXQgc2VsZWN0ZWQgbG9jYXRpb24gbmFtZVxuICBjb25zdCBnZXRTZWxlY3RlZExvY2F0aW9uTmFtZSA9ICgpID0+IHtcbiAgICBpZiAoaXNWaXJ0dWFsKSByZXR1cm4gJ1ZpcnR1YWwgLyBSZW1vdGUnO1xuICAgIGlmIChzZWxlY3RlZExvY2F0aW9uKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4gbC5zbHVnID09PSBzZWxlY3RlZExvY2F0aW9uKTtcbiAgICAgIHJldHVybiBsb2NhdGlvbj8ubmFtZSB8fCBzZWxlY3RlZExvY2F0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBHZXQgc3VidGl0bGUvaGVscGVyIHRleHRcbiAgY29uc3QgZ2V0U3VidGl0bGUgPSAoKSA9PiB7XG4gICAgaWYgKCFoYXNBbnlGaWx0ZXJzKSB7XG4gICAgICByZXR1cm4gY29udGVudC5zdWJ0aXRsZV9hbGwgfHwgJ1Nob3dpbmcgYWxsIG9wcG9ydHVuaXRpZXMuIEFwcGx5IGZpbHRlcnMgdG8gbmFycm93IHJlc3VsdHMuJztcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlRmlsdGVyQ291bnQgPSBbXG4gICAgICBzZWxlY3RlZExvY2F0aW9uID8gMSA6IDAsXG4gICAgICBpc1ZpcnR1YWwgPyAxIDogMCxcbiAgICAgIGZpbHRlcnMuY29udHJpYnV0aW9uVHlwZXMubGVuZ3RoID4gMCA/IDEgOiAwLFxuICAgICAgZmlsdGVycy5jYXVzZXMubGVuZ3RoID4gMCA/IDEgOiAwLFxuICAgICAgZmlsdGVycy50aW1lRmlsdGVyID8gMSA6IDAsXG4gICAgXS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICBcbiAgICByZXR1cm4gYCR7dG90YWx9IG9wcG9ydHVuaXR5JHt0b3RhbCAhPT0gMSA/ICdpZXMnIDogJyd9IGZvdW5kIHdpdGggJHthY3RpdmVGaWx0ZXJDb3VudH0gZmlsdGVyJHthY3RpdmVGaWx0ZXJDb3VudCAhPT0gMSA/ICdzJyA6ICcnfSBhcHBsaWVkLmA7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnBhZ2V9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAgICB7LyogUGFnZSBIZWFkZXIgKi99XG4gICAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPXtzdHlsZXMuaGVhZGVyfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmhlYWRlckNvbnRlbnR9PlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT17c3R5bGVzLnRpdGxlfT57Z2V0UGFnZVRpdGxlKCl9PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17c3R5bGVzLnN1YnRpdGxlfT57Z2V0U3VidGl0bGUoKX08L3A+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogQ2xlYXIgRmlsdGVycyBidXR0b24gKG9ubHkgc2hvdyB3aGVuIGZpbHRlcnMgYXJlIGFjdGl2ZSkgKi99XG4gICAgICAgICAge2hhc0FueUZpbHRlcnMgJiYgKFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuY2xlYXJGaWx0ZXJzQnV0dG9ufVxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDbGVhckZpbHRlcnN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlV2lkdGg9XCIyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIHtjb250ZW50LmNsZWFyX2ZpbHRlcnNfdGV4dCB8fCAnQ2xlYXIgQWxsIEZpbHRlcnMnfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9oZWFkZXI+XG5cbiAgICAgICAgey8qIFNlYXJjaCBCYXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc2VhcmNoU2VjdGlvbn0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5zZWFyY2hXcmFwcGVyfT5cbiAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VhcmNoSWNvbn1cbiAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMTFcIiBjeT1cIjExXCIgcj1cIjhcIiAvPlxuICAgICAgICAgICAgICA8cGF0aCBkPVwibTIxIDIxLTQuMzUtNC4zNVwiIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICByZWY9e3NlYXJjaElucHV0UmVmfVxuICAgICAgICAgICAgICB0eXBlPVwic2VhcmNoXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VhcmNoSW5wdXR9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtjb250ZW50LnNlYXJjaF9wbGFjZWhvbGRlciB8fCAnU2VhcmNoIG9wcG9ydHVuaXRpZXMuLi4nfVxuICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoUXVlcnl9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTZWFyY2hDaGFuZ2V9XG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTZWFyY2ggb3Bwb3J0dW5pdGllc1wiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge3NlYXJjaFF1ZXJ5ICYmIChcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnNlYXJjaENsZWFyfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlYXJjaENsZWFyfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJDbGVhciBzZWFyY2hcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTggNiA2IDE4XCIgLz5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJtNiA2IDEyIDEyXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkZWJvdW5jZWRTZWFyY2ggJiYgKFxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtzdHlsZXMuc2VhcmNoUmVzdWx0c30+XG4gICAgICAgICAgICAgIEZvdW5kIHtmaWx0ZXJlZFRvdGFsfSByZXN1bHR7ZmlsdGVyZWRUb3RhbCAhPT0gMSA/ICdzJyA6ICcnfSBmb3IgXCJ7ZGVib3VuY2VkU2VhcmNofVwiXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jb250ZW50fT5cbiAgICAgICAgICB7LyogU2lkZWJhciBGaWx0ZXJzICovfVxuICAgICAgICAgIDxhc2lkZSBjbGFzc05hbWU9e3N0eWxlcy5zaWRlYmFyfT5cbiAgICAgICAgICAgIHsvKiBMb2NhdGlvbiBGaWx0ZXIgLSBQcm9taW5lbnQgU2VjdGlvbiAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubG9jYXRpb25TZWN0aW9ufT5cbiAgICAgICAgICAgICAgPExvY2F0aW9uRmlsdGVyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25zPXtsb2NhdGlvbnN9XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRMb2NhdGlvbj17c2VsZWN0ZWRMb2NhdGlvbn1cbiAgICAgICAgICAgICAgICBpc1ZpcnR1YWw9e2lzVmlydHVhbH1cbiAgICAgICAgICAgICAgICBvbkxvY2F0aW9uQ2hhbmdlPXtoYW5kbGVMb2NhdGlvblNlbGVjdH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogT3RoZXIgRmlsdGVycyAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMub3RoZXJGaWx0ZXJzfT5cbiAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT17c3R5bGVzLnNpZGViYXJUaXRsZX0+e2NvbnRlbnQuZmlsdGVyc190aXRsZSB8fCAnRmlsdGVycyd9PC9oMj5cbiAgICAgICAgICAgICAgPEZpbHRlcnNcbiAgICAgICAgICAgICAgICBjYXVzZXM9e2NhdXNlc31cbiAgICAgICAgICAgICAgICBmaWx0ZXJzPXtmaWx0ZXJzfVxuICAgICAgICAgICAgICAgIG9uRmlsdGVyc0NoYW5nZT17aGFuZGxlRmlsdGVyc0NoYW5nZX1cbiAgICAgICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2FzaWRlPlxuXG4gICAgICAgICAgey8qIE1haW4gQ29udGVudCAqL31cbiAgICAgICAgICA8bWFpbiBjbGFzc05hbWU9e3N0eWxlcy5tYWlufT5cbiAgICAgICAgICAgIDxPcHBvcnR1bml0eUxpc3RcbiAgICAgICAgICAgICAgb3Bwb3J0dW5pdGllcz17ZmlsdGVyZWRPcHBvcnR1bml0aWVzfVxuICAgICAgICAgICAgICB0b3RhbD17ZmlsdGVyZWRUb3RhbH1cbiAgICAgICAgICAgICAgcGFnZT17cGFnZX1cbiAgICAgICAgICAgICAgcGFnZVNpemU9e3BhZ2VTaXplfVxuICAgICAgICAgICAgICBoYXNNb3JlPXtoYXNNb3JlICYmICFkZWJvdW5jZWRTZWFyY2gudHJpbSgpfVxuICAgICAgICAgICAgICBpc0xvYWRpbmc9e2lzTG9hZGluZyB8fCBpc1BlbmRpbmd9XG4gICAgICAgICAgICAgIHN0YXR1c0ZpbHRlcj17c3RhdHVzRmlsdGVyfVxuICAgICAgICAgICAgICBvblN0YXR1c0ZpbHRlckNoYW5nZT17aGFuZGxlU3RhdHVzRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICBvblBhZ2VDaGFuZ2U9e2hhbmRsZVBhZ2VDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uQ2xlYXJGaWx0ZXJzPXtoYW5kbGVDbGVhckZpbHRlcnN9XG4gICAgICAgICAgICAgIHNob3dBbGxNZXNzYWdlPXshaGFzQW55RmlsdGVyc31cbiAgICAgICAgICAgICAgc2VsZWN0ZWRMb2NhdGlvbk5hbWU9e2dldFNlbGVjdGVkTG9jYXRpb25OYW1lKCl9XG4gICAgICAgICAgICAgIGNvbnRlbnQ9e2NvbnRlbnR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvbWFpbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQ7XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVRyYW5zaXRpb24iLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlUm91dGVyIiwiZ2V0RGF0ZVJhbmdlRm9yRmlsdGVyIiwic29ydE9wcG9ydHVuaXRpZXNCeVJlbGV2YW5jZSIsIk9wcG9ydHVuaXR5RmlsdGVycyIsIkZpbHRlcnMiLCJPcHBvcnR1bml0eUxpc3QiLCJMb2NhdGlvbkZpbHRlciIsInN0eWxlcyIsIk9wcG9ydHVuaXRpZXNQYWdlQ2xpZW50IiwiaW5pdGlhbE9wcG9ydHVuaXRpZXMiLCJpbml0aWFsVG90YWwiLCJpbml0aWFsUGFnZSIsInBhZ2VTaXplIiwiaW5pdGlhbEhhc01vcmUiLCJpbml0aWFsU3RhdHVzRmlsdGVyIiwiY2F1c2VzIiwibG9jYXRpb25zIiwiaW5pdGlhbExvY2F0aW9uIiwiaW5pdGlhbElzVmlydHVhbCIsImhhc0FjdGl2ZUZpbHRlcnMiLCJjb250ZW50Iiwicm91dGVyIiwiaXNQZW5kaW5nIiwic3RhcnRUcmFuc2l0aW9uIiwiaXNJbml0aWFsTW91bnQiLCJzZWxlY3RlZExvY2F0aW9uIiwic2V0U2VsZWN0ZWRMb2NhdGlvbiIsImlzVmlydHVhbCIsInNldElzVmlydHVhbCIsIm9wcG9ydHVuaXRpZXMiLCJzZXRPcHBvcnR1bml0aWVzIiwidG90YWwiLCJzZXRUb3RhbCIsInBhZ2UiLCJzZXRQYWdlIiwiaGFzTW9yZSIsInNldEhhc01vcmUiLCJzdGF0dXNGaWx0ZXIiLCJzZXRTdGF0dXNGaWx0ZXIiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzZWFyY2hRdWVyeSIsInNldFNlYXJjaFF1ZXJ5IiwiZGVib3VuY2VkU2VhcmNoIiwic2V0RGVib3VuY2VkU2VhcmNoIiwic2VhcmNoSW5wdXRSZWYiLCJmaWx0ZXJzIiwic2V0RmlsdGVycyIsImNvbnRyaWJ1dGlvblR5cGVzIiwidGltZUZpbHRlciIsInRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsImZpbHRlcmVkT3Bwb3J0dW5pdGllcyIsImZpbHRlcmVkIiwidHJpbSIsInF1ZXJ5IiwidG9Mb3dlckNhc2UiLCJzZWFyY2hUZXJtcyIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsIm9wcCIsInNlYXJjaGFibGVUZXh0IiwidGl0bGUiLCJzdW1tYXJ5IiwiY2l0eSIsInN0YXRlIiwiY291bnRyeSIsIm9yZ2FuaXplck5hbWUiLCJjYXVzZVNsdWdzIiwiam9pbiIsImV2ZXJ5IiwidGVybSIsImluY2x1ZGVzIiwiaGFzQW55RmlsdGVycyIsImxlbmd0aCIsImZpbHRlcmVkVG90YWwiLCJ1cGRhdGVVcmwiLCJuZXdMb2NhdGlvbiIsIm5ld0lzVmlydHVhbCIsIm5ld0ZpbHRlcnMiLCJuZXdQYWdlIiwibmV3U3RhdHVzRmlsdGVyIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwic2V0IiwidG9TdHJpbmciLCJxdWVyeVN0cmluZyIsIm5ld1VybCIsInB1c2giLCJzY3JvbGwiLCJmZXRjaE9wcG9ydHVuaXRpZXMiLCJkYXRlUmFuZ2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiY3VycmVudCIsImhhbmRsZUxvY2F0aW9uU2VsZWN0IiwibG9jYXRpb25TbHVnIiwidmlydHVhbCIsImhhbmRsZUZpbHRlcnNDaGFuZ2UiLCJoYW5kbGVTdGF0dXNGaWx0ZXJDaGFuZ2UiLCJoYW5kbGVQYWdlQ2hhbmdlIiwid2luZG93Iiwic2Nyb2xsVG8iLCJ0b3AiLCJiZWhhdmlvciIsImhhbmRsZUNsZWFyRmlsdGVycyIsImNsZWFyZWRGaWx0ZXJzIiwiaGFuZGxlU2VhcmNoQ2hhbmdlIiwiZSIsInRhcmdldCIsInZhbHVlIiwiaGFuZGxlU2VhcmNoQ2xlYXIiLCJmb2N1cyIsImdldFBhZ2VUaXRsZSIsImxvY2F0aW9uTmFtZSIsImZpbmQiLCJsIiwic2x1ZyIsIm5hbWUiLCJnZXRTZWxlY3RlZExvY2F0aW9uTmFtZSIsImxvY2F0aW9uIiwiZ2V0U3VidGl0bGUiLCJzdWJ0aXRsZV9hbGwiLCJhY3RpdmVGaWx0ZXJDb3VudCIsInJlZHVjZSIsImEiLCJiIiwiZGl2IiwiY2xhc3NOYW1lIiwiY29udGFpbmVyIiwiaGVhZGVyIiwiaGVhZGVyQ29udGVudCIsImgxIiwicCIsInN1YnRpdGxlIiwiYnV0dG9uIiwidHlwZSIsImNsZWFyRmlsdGVyc0J1dHRvbiIsIm9uQ2xpY2siLCJzdmciLCJ3aWR0aCIsImhlaWdodCIsInZpZXdCb3giLCJmaWxsIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJhcmlhLWhpZGRlbiIsInBhdGgiLCJkIiwiY2xlYXJfZmlsdGVyc190ZXh0Iiwic2VhcmNoU2VjdGlvbiIsInNlYXJjaFdyYXBwZXIiLCJzZWFyY2hJY29uIiwieG1sbnMiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJjaXJjbGUiLCJjeCIsImN5IiwiciIsImlucHV0IiwicmVmIiwic2VhcmNoSW5wdXQiLCJwbGFjZWhvbGRlciIsInNlYXJjaF9wbGFjZWhvbGRlciIsIm9uQ2hhbmdlIiwiYXJpYS1sYWJlbCIsInNlYXJjaENsZWFyIiwic2VhcmNoUmVzdWx0cyIsImFzaWRlIiwic2lkZWJhciIsImxvY2F0aW9uU2VjdGlvbiIsIm9uTG9jYXRpb25DaGFuZ2UiLCJvdGhlckZpbHRlcnMiLCJoMiIsInNpZGViYXJUaXRsZSIsImZpbHRlcnNfdGl0bGUiLCJvbkZpbHRlcnNDaGFuZ2UiLCJsYXlvdXQiLCJtYWluIiwib25TdGF0dXNGaWx0ZXJDaGFuZ2UiLCJvblBhZ2VDaGFuZ2UiLCJvbkNsZWFyRmlsdGVycyIsInNob3dBbGxNZXNzYWdlIiwic2VsZWN0ZWRMb2NhdGlvbk5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/opportunities/OpportunitiesPageClient.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/utils/personalize-sort.ts":
/*!*******************************************!*\
  !*** ./src/lib/utils/personalize-sort.ts ***!
  \*******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserPreferences: function() { return /* binding */ getUserPreferences; },\n/* harmony export */   getUserPreferredCauses: function() { return /* binding */ getUserPreferredCauses; },\n/* harmony export */   getUserPreferredLocation: function() { return /* binding */ getUserPreferredLocation; },\n/* harmony export */   sortOpportunitiesByRelevance: function() { return /* binding */ sortOpportunitiesByRelevance; }\n/* harmony export */ });\n/* harmony import */ var _lib_user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/user */ \"(app-pages-browser)/./src/lib/user/index.ts\");\n/**\n * Personalized Opportunity Sorting\n * \n * Sorts opportunities based on user preferences:\n * 1. Location match (city, state, country)\n * 2. Cause match (from previous registrations)\n * 3. Default order (date ascending)\n */ \n/**\n * Extract user preferences from localStorage\n */ function getUserPreferences() {\n    var _Object_entries_sort_;\n    const preferences = {};\n    // Get user email\n    const userEmail = (0,_lib_user__WEBPACK_IMPORTED_MODULE_0__.getUserEmail)();\n    if (!userEmail) {\n        return preferences;\n    }\n    // Get user's registrations\n    const registrations = (0,_lib_user__WEBPACK_IMPORTED_MODULE_0__.getRegistrations)();\n    const userRegistrations = registrations.filter((r)=>r.email.toLowerCase() === userEmail.toLowerCase());\n    if (userRegistrations.length === 0) {\n        return preferences;\n    }\n    // Extract location preferences from registrations\n    // Use the most common location from registrations\n    const locationCounts = {};\n    const causeSet = new Set();\n    userRegistrations.forEach((reg)=>{\n        // Parse location (format: \"City, State, Country\" or \"Virtual / Online\")\n        if (reg.opportunityLocation && !reg.opportunityLocation.includes(\"Virtual\")) {\n            const parts = reg.opportunityLocation.split(\",\").map((p)=>p.trim());\n            if (parts.length >= 1) {\n                const city = parts[0];\n                locationCounts[city] = (locationCounts[city] || 0) + 1;\n            }\n        }\n    // Extract cause from opportunity slug or title (if available)\n    // Note: This is a simplified extraction - you may need to enhance this\n    // based on how causes are stored in your registration data\n    });\n    // Get most common city\n    const mostCommonCity = (_Object_entries_sort_ = Object.entries(locationCounts).sort((param, param1)=>{\n        let [, a] = param, [, b] = param1;\n        return b - a;\n    })[0]) === null || _Object_entries_sort_ === void 0 ? void 0 : _Object_entries_sort_[0];\n    if (mostCommonCity) {\n        preferences.city = mostCommonCity;\n    }\n    // Get causes from opportunity slugs/titles\n    // This is a simplified approach - you may want to enhance this\n    // by storing cause slugs directly in registration data\n    const commonCauses = [\n        \"education\",\n        \"environment\",\n        \"healthcare\",\n        \"animal-welfare\",\n        \"community-development\",\n        \"hunger-relief\"\n    ];\n    const causeMatches = {};\n    userRegistrations.forEach((reg)=>{\n        var _reg_opportunitySlug, _reg_opportunityTitle;\n        const slug = ((_reg_opportunitySlug = reg.opportunitySlug) === null || _reg_opportunitySlug === void 0 ? void 0 : _reg_opportunitySlug.toLowerCase()) || \"\";\n        const title = ((_reg_opportunityTitle = reg.opportunityTitle) === null || _reg_opportunityTitle === void 0 ? void 0 : _reg_opportunityTitle.toLowerCase()) || \"\";\n        const text = \"\".concat(slug, \" \").concat(title);\n        commonCauses.forEach((cause)=>{\n            if (text.includes(cause)) {\n                causeMatches[cause] = (causeMatches[cause] || 0) + 1;\n            }\n        });\n    });\n    preferences.preferredCauses = Object.entries(causeMatches).sort((param, param1)=>{\n        let [, a] = param, [, b] = param1;\n        return b - a;\n    }).slice(0, 3).map((param)=>{\n        let [cause] = param;\n        return cause;\n    });\n    return preferences;\n}\n/**\n * Calculate relevance score for an opportunity based on user preferences\n * Higher score = more relevant\n */ function calculateRelevanceScore(opportunity, preferences) {\n    let score = 0;\n    // Location matching (highest priority)\n    if (preferences.city && opportunity.city) {\n        const oppCity = opportunity.city.toLowerCase();\n        const prefCity = preferences.city.toLowerCase();\n        if (oppCity === prefCity) {\n            score += 100; // Exact city match\n        } else if (oppCity.includes(prefCity) || prefCity.includes(oppCity)) {\n            score += 50; // Partial city match\n        }\n    }\n    if (preferences.state && opportunity.state) {\n        const oppState = opportunity.state.toLowerCase();\n        const prefState = preferences.state.toLowerCase();\n        if (oppState === prefState) {\n            score += 30; // State match\n        }\n    }\n    if (preferences.country && opportunity.country) {\n        const oppCountry = opportunity.country.toLowerCase();\n        const prefCountry = preferences.country.toLowerCase();\n        if (oppCountry === prefCountry) {\n            score += 10; // Country match\n        }\n    }\n    // Cause matching (second priority)\n    if (preferences.preferredCauses && preferences.preferredCauses.length > 0) {\n        const oppCauses = (opportunity.causeSlugs || []).map((c)=>c.toLowerCase());\n        const prefCauses = preferences.preferredCauses.map((c)=>c.toLowerCase());\n        prefCauses.forEach((prefCause, index)=>{\n            if (oppCauses.includes(prefCause)) {\n                // Higher score for causes registered more frequently\n                score += 40 - index * 5;\n            }\n        });\n    }\n    return score;\n}\n/**\n * Sort opportunities by relevance to user preferences\n * \n * Order:\n * 1. Location match (city > state > country)\n * 2. Cause match (from previous registrations)\n * 3. Default order (by date ascending)\n */ function sortOpportunitiesByRelevance(opportunities) {\n    // Get user preferences\n    const preferences = getUserPreferences();\n    // If no preferences, return original order\n    if (!preferences.city && !preferences.state && !preferences.country && (!preferences.preferredCauses || preferences.preferredCauses.length === 0)) {\n        return opportunities;\n    }\n    // Calculate relevance scores\n    const opportunitiesWithScores = opportunities.map((opp)=>({\n            opportunity: opp,\n            score: calculateRelevanceScore(opp, preferences)\n        }));\n    // Sort by score (descending), then by date (ascending) for same score\n    opportunitiesWithScores.sort((a, b)=>{\n        // First sort by relevance score (higher = more relevant)\n        if (b.score !== a.score) {\n            return b.score - a.score;\n        }\n        // If scores are equal, sort by date (earlier dates first)\n        const dateA = new Date(a.opportunity.startDate).getTime();\n        const dateB = new Date(b.opportunity.startDate).getTime();\n        return dateA - dateB;\n    });\n    return opportunitiesWithScores.map((item)=>item.opportunity);\n}\n/**\n * Get user's preferred location from registrations\n * Returns the most common city from user's registrations\n */ function getUserPreferredLocation() {\n    var _Object_entries_sort_;\n    const userEmail = (0,_lib_user__WEBPACK_IMPORTED_MODULE_0__.getUserEmail)();\n    if (!userEmail) {\n        return {};\n    }\n    const registrations = (0,_lib_user__WEBPACK_IMPORTED_MODULE_0__.getRegistrations)();\n    const userRegistrations = registrations.filter((r)=>r.email.toLowerCase() === userEmail.toLowerCase());\n    if (userRegistrations.length === 0) {\n        return {};\n    }\n    // Extract location from registrations\n    const locationCounts = {};\n    userRegistrations.forEach((reg)=>{\n        if (reg.opportunityLocation && !reg.opportunityLocation.includes(\"Virtual\")) {\n            const parts = reg.opportunityLocation.split(\",\").map((p)=>p.trim());\n            if (parts.length >= 1) {\n                const city = parts[0];\n                locationCounts[city] = (locationCounts[city] || 0) + 1;\n            }\n        }\n    });\n    const mostCommonCity = (_Object_entries_sort_ = Object.entries(locationCounts).sort((param, param1)=>{\n        let [, a] = param, [, b] = param1;\n        return b - a;\n    })[0]) === null || _Object_entries_sort_ === void 0 ? void 0 : _Object_entries_sort_[0];\n    return mostCommonCity ? {\n        city: mostCommonCity\n    } : {};\n}\n/**\n * Get user's preferred causes from registrations\n * Returns causes user has registered for, sorted by frequency\n */ function getUserPreferredCauses() {\n    const userEmail = (0,_lib_user__WEBPACK_IMPORTED_MODULE_0__.getUserEmail)();\n    if (!userEmail) {\n        return [];\n    }\n    const registrations = (0,_lib_user__WEBPACK_IMPORTED_MODULE_0__.getRegistrations)();\n    const userRegistrations = registrations.filter((r)=>r.email.toLowerCase() === userEmail.toLowerCase());\n    if (userRegistrations.length === 0) {\n        return [];\n    }\n    // Common cause slugs to match against\n    const commonCauses = [\n        \"education\",\n        \"environment\",\n        \"healthcare\",\n        \"animal-welfare\",\n        \"community-development\",\n        \"hunger-relief\"\n    ];\n    const causeMatches = {};\n    userRegistrations.forEach((reg)=>{\n        var _reg_opportunitySlug, _reg_opportunityTitle;\n        const slug = ((_reg_opportunitySlug = reg.opportunitySlug) === null || _reg_opportunitySlug === void 0 ? void 0 : _reg_opportunitySlug.toLowerCase()) || \"\";\n        const title = ((_reg_opportunityTitle = reg.opportunityTitle) === null || _reg_opportunityTitle === void 0 ? void 0 : _reg_opportunityTitle.toLowerCase()) || \"\";\n        const text = \"\".concat(slug, \" \").concat(title);\n        commonCauses.forEach((cause)=>{\n            if (text.includes(cause) || text.includes(cause.replace(\"-\", \" \"))) {\n                causeMatches[cause] = (causeMatches[cause] || 0) + 1;\n            }\n        });\n    });\n    return Object.entries(causeMatches).sort((param, param1)=>{\n        let [, a] = param, [, b] = param1;\n        return b - a;\n    }).map((param)=>{\n        let [cause] = param;\n        return cause;\n    });\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvdXRpbHMvcGVyc29uYWxpemUtc29ydC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7Ozs7O0NBT0MsR0FHMkQ7QUFhNUQ7O0NBRUMsR0FDTSxTQUFTRTtRQXdDU0M7SUF2Q3ZCLE1BQU1DLGNBQStCLENBQUM7SUFFdEMsaUJBQWlCO0lBQ2pCLE1BQU1DLFlBQVlKLHVEQUFZQTtJQUM5QixJQUFJLENBQUNJLFdBQVc7UUFDZCxPQUFPRDtJQUNUO0lBRUEsMkJBQTJCO0lBQzNCLE1BQU1FLGdCQUFnQk4sMkRBQWdCQTtJQUN0QyxNQUFNTyxvQkFBb0JELGNBQWNFLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFDN0NBLEVBQUVDLEtBQUssQ0FBQ0MsV0FBVyxPQUFPTixVQUFVTSxXQUFXO0lBR2pELElBQUlKLGtCQUFrQkssTUFBTSxLQUFLLEdBQUc7UUFDbEMsT0FBT1I7SUFDVDtJQUVBLGtEQUFrRDtJQUNsRCxrREFBa0Q7SUFDbEQsTUFBTVMsaUJBQXlDLENBQUM7SUFDaEQsTUFBTUMsV0FBVyxJQUFJQztJQUVyQlIsa0JBQWtCUyxPQUFPLENBQUNDLENBQUFBO1FBQ3hCLHdFQUF3RTtRQUN4RSxJQUFJQSxJQUFJQyxtQkFBbUIsSUFBSSxDQUFDRCxJQUFJQyxtQkFBbUIsQ0FBQ0MsUUFBUSxDQUFDLFlBQVk7WUFDM0UsTUFBTUMsUUFBUUgsSUFBSUMsbUJBQW1CLENBQUNHLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLElBQUk7WUFDaEUsSUFBSUosTUFBTVIsTUFBTSxJQUFJLEdBQUc7Z0JBQ3JCLE1BQU1hLE9BQU9MLEtBQUssQ0FBQyxFQUFFO2dCQUNyQlAsY0FBYyxDQUFDWSxLQUFLLEdBQUcsQ0FBQ1osY0FBYyxDQUFDWSxLQUFLLElBQUksS0FBSztZQUN2RDtRQUNGO0lBRUEsOERBQThEO0lBQzlELHVFQUF1RTtJQUN2RSwyREFBMkQ7SUFDN0Q7SUFFQSx1QkFBdUI7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QzNCUCxHQUFHLENBQUM7WUFBQyxDQUFDZ0IsTUFBTTtlQUFLQTs7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi91dGlscy9wZXJzb25hbGl6ZS1zb3J0LnRzPzJjYzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQZXJzb25hbGl6ZWQgT3Bwb3J0dW5pdHkgU29ydGluZ1xuICogXG4gKiBTb3J0cyBvcHBvcnR1bml0aWVzIGJhc2VkIG9uIHVzZXIgcHJlZmVyZW5jZXM6XG4gKiAxLiBMb2NhdGlvbiBtYXRjaCAoY2l0eSwgc3RhdGUsIGNvdW50cnkpXG4gKiAyLiBDYXVzZSBtYXRjaCAoZnJvbSBwcmV2aW91cyByZWdpc3RyYXRpb25zKVxuICogMy4gRGVmYXVsdCBvcmRlciAoZGF0ZSBhc2NlbmRpbmcpXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBPcHBvcnR1bml0eVN1bW1hcnkgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IGdldFJlZ2lzdHJhdGlvbnMsIGdldFVzZXJFbWFpbCB9IGZyb20gJ0AvbGliL3VzZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQcmVmZXJlbmNlcyB7XG4gIC8qKiBVc2VyJ3MgcHJlZmVycmVkIGxvY2F0aW9uIChjaXR5KSAqL1xuICBjaXR5Pzogc3RyaW5nO1xuICAvKiogVXNlcidzIHByZWZlcnJlZCBzdGF0ZSAqL1xuICBzdGF0ZT86IHN0cmluZztcbiAgLyoqIFVzZXIncyBwcmVmZXJyZWQgY291bnRyeSAqL1xuICBjb3VudHJ5Pzogc3RyaW5nO1xuICAvKiogQ2F1c2VzIHVzZXIgaGFzIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBmb3IgKi9cbiAgcHJlZmVycmVkQ2F1c2VzPzogc3RyaW5nW107XG59XG5cbi8qKlxuICogRXh0cmFjdCB1c2VyIHByZWZlcmVuY2VzIGZyb20gbG9jYWxTdG9yYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyUHJlZmVyZW5jZXMoKTogVXNlclByZWZlcmVuY2VzIHtcbiAgY29uc3QgcHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlcyA9IHt9O1xuICBcbiAgLy8gR2V0IHVzZXIgZW1haWxcbiAgY29uc3QgdXNlckVtYWlsID0gZ2V0VXNlckVtYWlsKCk7XG4gIGlmICghdXNlckVtYWlsKSB7XG4gICAgcmV0dXJuIHByZWZlcmVuY2VzO1xuICB9XG4gIFxuICAvLyBHZXQgdXNlcidzIHJlZ2lzdHJhdGlvbnNcbiAgY29uc3QgcmVnaXN0cmF0aW9ucyA9IGdldFJlZ2lzdHJhdGlvbnMoKTtcbiAgY29uc3QgdXNlclJlZ2lzdHJhdGlvbnMgPSByZWdpc3RyYXRpb25zLmZpbHRlcihyID0+IFxuICAgIHIuZW1haWwudG9Mb3dlckNhc2UoKSA9PT0gdXNlckVtYWlsLnRvTG93ZXJDYXNlKClcbiAgKTtcbiAgXG4gIGlmICh1c2VyUmVnaXN0cmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gcHJlZmVyZW5jZXM7XG4gIH1cbiAgXG4gIC8vIEV4dHJhY3QgbG9jYXRpb24gcHJlZmVyZW5jZXMgZnJvbSByZWdpc3RyYXRpb25zXG4gIC8vIFVzZSB0aGUgbW9zdCBjb21tb24gbG9jYXRpb24gZnJvbSByZWdpc3RyYXRpb25zXG4gIGNvbnN0IGxvY2F0aW9uQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIGNvbnN0IGNhdXNlU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIFxuICB1c2VyUmVnaXN0cmF0aW9ucy5mb3JFYWNoKHJlZyA9PiB7XG4gICAgLy8gUGFyc2UgbG9jYXRpb24gKGZvcm1hdDogXCJDaXR5LCBTdGF0ZSwgQ291bnRyeVwiIG9yIFwiVmlydHVhbCAvIE9ubGluZVwiKVxuICAgIGlmIChyZWcub3Bwb3J0dW5pdHlMb2NhdGlvbiAmJiAhcmVnLm9wcG9ydHVuaXR5TG9jYXRpb24uaW5jbHVkZXMoJ1ZpcnR1YWwnKSkge1xuICAgICAgY29uc3QgcGFydHMgPSByZWcub3Bwb3J0dW5pdHlMb2NhdGlvbi5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKTtcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMSkge1xuICAgICAgICBjb25zdCBjaXR5ID0gcGFydHNbMF07XG4gICAgICAgIGxvY2F0aW9uQ291bnRzW2NpdHldID0gKGxvY2F0aW9uQ291bnRzW2NpdHldIHx8IDApICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCBjYXVzZSBmcm9tIG9wcG9ydHVuaXR5IHNsdWcgb3IgdGl0bGUgKGlmIGF2YWlsYWJsZSlcbiAgICAvLyBOb3RlOiBUaGlzIGlzIGEgc2ltcGxpZmllZCBleHRyYWN0aW9uIC0geW91IG1heSBuZWVkIHRvIGVuaGFuY2UgdGhpc1xuICAgIC8vIGJhc2VkIG9uIGhvdyBjYXVzZXMgYXJlIHN0b3JlZCBpbiB5b3VyIHJlZ2lzdHJhdGlvbiBkYXRhXG4gIH0pO1xuICBcbiAgLy8gR2V0IG1vc3QgY29tbW9uIGNpdHlcbiAgY29uc3QgbW9zdENvbW1vbkNpdHkgPSBPYmplY3QuZW50cmllcyhsb2NhdGlvbkNvdW50cylcbiAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlbMF0/LlswXTtcbiAgXG4gIGlmIChtb3N0Q29tbW9uQ2l0eSkge1xuICAgIHByZWZlcmVuY2VzLmNpdHkgPSBtb3N0Q29tbW9uQ2l0eTtcbiAgfVxuICBcbiAgLy8gR2V0IGNhdXNlcyBmcm9tIG9wcG9ydHVuaXR5IHNsdWdzL3RpdGxlc1xuICAvLyBUaGlzIGlzIGEgc2ltcGxpZmllZCBhcHByb2FjaCAtIHlvdSBtYXkgd2FudCB0byBlbmhhbmNlIHRoaXNcbiAgLy8gYnkgc3RvcmluZyBjYXVzZSBzbHVncyBkaXJlY3RseSBpbiByZWdpc3RyYXRpb24gZGF0YVxuICBjb25zdCBjb21tb25DYXVzZXMgPSBbJ2VkdWNhdGlvbicsICdlbnZpcm9ubWVudCcsICdoZWFsdGhjYXJlJywgJ2FuaW1hbC13ZWxmYXJlJywgJ2NvbW11bml0eS1kZXZlbG9wbWVudCcsICdodW5nZXItcmVsaWVmJ107XG4gIGNvbnN0IGNhdXNlTWF0Y2hlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICBcbiAgdXNlclJlZ2lzdHJhdGlvbnMuZm9yRWFjaChyZWcgPT4ge1xuICAgIGNvbnN0IHNsdWcgPSByZWcub3Bwb3J0dW5pdHlTbHVnPy50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICAgIGNvbnN0IHRpdGxlID0gcmVnLm9wcG9ydHVuaXR5VGl0bGU/LnRvTG93ZXJDYXNlKCkgfHwgJyc7XG4gICAgY29uc3QgdGV4dCA9IGAke3NsdWd9ICR7dGl0bGV9YDtcbiAgICBcbiAgICBjb21tb25DYXVzZXMuZm9yRWFjaChjYXVzZSA9PiB7XG4gICAgICBpZiAodGV4dC5pbmNsdWRlcyhjYXVzZSkpIHtcbiAgICAgICAgY2F1c2VNYXRjaGVzW2NhdXNlXSA9IChjYXVzZU1hdGNoZXNbY2F1c2VdIHx8IDApICsgMTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFxuICBwcmVmZXJlbmNlcy5wcmVmZXJyZWRDYXVzZXMgPSBPYmplY3QuZW50cmllcyhjYXVzZU1hdGNoZXMpXG4gICAgLnNvcnQoKFssIGFdLCBbLCBiXSkgPT4gYiAtIGEpXG4gICAgLnNsaWNlKDAsIDMpXG4gICAgLm1hcCgoW2NhdXNlXSkgPT4gY2F1c2UpO1xuICBcbiAgcmV0dXJuIHByZWZlcmVuY2VzO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSByZWxldmFuY2Ugc2NvcmUgZm9yIGFuIG9wcG9ydHVuaXR5IGJhc2VkIG9uIHVzZXIgcHJlZmVyZW5jZXNcbiAqIEhpZ2hlciBzY29yZSA9IG1vcmUgcmVsZXZhbnRcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlUmVsZXZhbmNlU2NvcmUoXG4gIG9wcG9ydHVuaXR5OiBPcHBvcnR1bml0eVN1bW1hcnksXG4gIHByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZXNcbik6IG51bWJlciB7XG4gIGxldCBzY29yZSA9IDA7XG4gIFxuICAvLyBMb2NhdGlvbiBtYXRjaGluZyAoaGlnaGVzdCBwcmlvcml0eSlcbiAgaWYgKHByZWZlcmVuY2VzLmNpdHkgJiYgb3Bwb3J0dW5pdHkuY2l0eSkge1xuICAgIGNvbnN0IG9wcENpdHkgPSBvcHBvcnR1bml0eS5jaXR5LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgcHJlZkNpdHkgPSBwcmVmZXJlbmNlcy5jaXR5LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgaWYgKG9wcENpdHkgPT09IHByZWZDaXR5KSB7XG4gICAgICBzY29yZSArPSAxMDA7IC8vIEV4YWN0IGNpdHkgbWF0Y2hcbiAgICB9IGVsc2UgaWYgKG9wcENpdHkuaW5jbHVkZXMocHJlZkNpdHkpIHx8IHByZWZDaXR5LmluY2x1ZGVzKG9wcENpdHkpKSB7XG4gICAgICBzY29yZSArPSA1MDsgLy8gUGFydGlhbCBjaXR5IG1hdGNoXG4gICAgfVxuICB9XG4gIFxuICBpZiAocHJlZmVyZW5jZXMuc3RhdGUgJiYgb3Bwb3J0dW5pdHkuc3RhdGUpIHtcbiAgICBjb25zdCBvcHBTdGF0ZSA9IG9wcG9ydHVuaXR5LnN0YXRlLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgcHJlZlN0YXRlID0gcHJlZmVyZW5jZXMuc3RhdGUudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICBpZiAob3BwU3RhdGUgPT09IHByZWZTdGF0ZSkge1xuICAgICAgc2NvcmUgKz0gMzA7IC8vIFN0YXRlIG1hdGNoXG4gICAgfVxuICB9XG4gIFxuICBpZiAocHJlZmVyZW5jZXMuY291bnRyeSAmJiBvcHBvcnR1bml0eS5jb3VudHJ5KSB7XG4gICAgY29uc3Qgb3BwQ291bnRyeSA9IG9wcG9ydHVuaXR5LmNvdW50cnkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBwcmVmQ291bnRyeSA9IHByZWZlcmVuY2VzLmNvdW50cnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICBpZiAob3BwQ291bnRyeSA9PT0gcHJlZkNvdW50cnkpIHtcbiAgICAgIHNjb3JlICs9IDEwOyAvLyBDb3VudHJ5IG1hdGNoXG4gICAgfVxuICB9XG4gIFxuICAvLyBDYXVzZSBtYXRjaGluZyAoc2Vjb25kIHByaW9yaXR5KVxuICBpZiAocHJlZmVyZW5jZXMucHJlZmVycmVkQ2F1c2VzICYmIHByZWZlcmVuY2VzLnByZWZlcnJlZENhdXNlcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3Qgb3BwQ2F1c2VzID0gKG9wcG9ydHVuaXR5LmNhdXNlU2x1Z3MgfHwgW10pLm1hcChjID0+IGMudG9Mb3dlckNhc2UoKSk7XG4gICAgY29uc3QgcHJlZkNhdXNlcyA9IHByZWZlcmVuY2VzLnByZWZlcnJlZENhdXNlcy5tYXAoYyA9PiBjLnRvTG93ZXJDYXNlKCkpO1xuICAgIFxuICAgIHByZWZDYXVzZXMuZm9yRWFjaCgocHJlZkNhdXNlLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKG9wcENhdXNlcy5pbmNsdWRlcyhwcmVmQ2F1c2UpKSB7XG4gICAgICAgIC8vIEhpZ2hlciBzY29yZSBmb3IgY2F1c2VzIHJlZ2lzdGVyZWQgbW9yZSBmcmVxdWVudGx5XG4gICAgICAgIHNjb3JlICs9IDQwIC0gKGluZGV4ICogNSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiBzY29yZTtcbn1cblxuLyoqXG4gKiBTb3J0IG9wcG9ydHVuaXRpZXMgYnkgcmVsZXZhbmNlIHRvIHVzZXIgcHJlZmVyZW5jZXNcbiAqIFxuICogT3JkZXI6XG4gKiAxLiBMb2NhdGlvbiBtYXRjaCAoY2l0eSA+IHN0YXRlID4gY291bnRyeSlcbiAqIDIuIENhdXNlIG1hdGNoIChmcm9tIHByZXZpb3VzIHJlZ2lzdHJhdGlvbnMpXG4gKiAzLiBEZWZhdWx0IG9yZGVyIChieSBkYXRlIGFzY2VuZGluZylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRPcHBvcnR1bml0aWVzQnlSZWxldmFuY2UoXG4gIG9wcG9ydHVuaXRpZXM6IE9wcG9ydHVuaXR5U3VtbWFyeVtdXG4pOiBPcHBvcnR1bml0eVN1bW1hcnlbXSB7XG4gIC8vIEdldCB1c2VyIHByZWZlcmVuY2VzXG4gIGNvbnN0IHByZWZlcmVuY2VzID0gZ2V0VXNlclByZWZlcmVuY2VzKCk7XG4gIFxuICAvLyBJZiBubyBwcmVmZXJlbmNlcywgcmV0dXJuIG9yaWdpbmFsIG9yZGVyXG4gIGlmIChcbiAgICAhcHJlZmVyZW5jZXMuY2l0eSAmJlxuICAgICFwcmVmZXJlbmNlcy5zdGF0ZSAmJlxuICAgICFwcmVmZXJlbmNlcy5jb3VudHJ5ICYmXG4gICAgKCFwcmVmZXJlbmNlcy5wcmVmZXJyZWRDYXVzZXMgfHwgcHJlZmVyZW5jZXMucHJlZmVycmVkQ2F1c2VzLmxlbmd0aCA9PT0gMClcbiAgKSB7XG4gICAgcmV0dXJuIG9wcG9ydHVuaXRpZXM7XG4gIH1cbiAgXG4gIC8vIENhbGN1bGF0ZSByZWxldmFuY2Ugc2NvcmVzXG4gIGNvbnN0IG9wcG9ydHVuaXRpZXNXaXRoU2NvcmVzID0gb3Bwb3J0dW5pdGllcy5tYXAob3BwID0+ICh7XG4gICAgb3Bwb3J0dW5pdHk6IG9wcCxcbiAgICBzY29yZTogY2FsY3VsYXRlUmVsZXZhbmNlU2NvcmUob3BwLCBwcmVmZXJlbmNlcyksXG4gIH0pKTtcbiAgXG4gIC8vIFNvcnQgYnkgc2NvcmUgKGRlc2NlbmRpbmcpLCB0aGVuIGJ5IGRhdGUgKGFzY2VuZGluZykgZm9yIHNhbWUgc2NvcmVcbiAgb3Bwb3J0dW5pdGllc1dpdGhTY29yZXMuc29ydCgoYSwgYikgPT4ge1xuICAgIC8vIEZpcnN0IHNvcnQgYnkgcmVsZXZhbmNlIHNjb3JlIChoaWdoZXIgPSBtb3JlIHJlbGV2YW50KVxuICAgIGlmIChiLnNjb3JlICE9PSBhLnNjb3JlKSB7XG4gICAgICByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIHNjb3JlcyBhcmUgZXF1YWwsIHNvcnQgYnkgZGF0ZSAoZWFybGllciBkYXRlcyBmaXJzdClcbiAgICBjb25zdCBkYXRlQSA9IG5ldyBEYXRlKGEub3Bwb3J0dW5pdHkuc3RhcnREYXRlKS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZGF0ZUIgPSBuZXcgRGF0ZShiLm9wcG9ydHVuaXR5LnN0YXJ0RGF0ZSkuZ2V0VGltZSgpO1xuICAgIHJldHVybiBkYXRlQSAtIGRhdGVCO1xuICB9KTtcbiAgXG4gIHJldHVybiBvcHBvcnR1bml0aWVzV2l0aFNjb3Jlcy5tYXAoaXRlbSA9PiBpdGVtLm9wcG9ydHVuaXR5KTtcbn1cblxuLyoqXG4gKiBHZXQgdXNlcidzIHByZWZlcnJlZCBsb2NhdGlvbiBmcm9tIHJlZ2lzdHJhdGlvbnNcbiAqIFJldHVybnMgdGhlIG1vc3QgY29tbW9uIGNpdHkgZnJvbSB1c2VyJ3MgcmVnaXN0cmF0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlclByZWZlcnJlZExvY2F0aW9uKCk6IHsgY2l0eT86IHN0cmluZzsgc3RhdGU/OiBzdHJpbmc7IGNvdW50cnk/OiBzdHJpbmcgfSB7XG4gIGNvbnN0IHVzZXJFbWFpbCA9IGdldFVzZXJFbWFpbCgpO1xuICBpZiAoIXVzZXJFbWFpbCkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBcbiAgY29uc3QgcmVnaXN0cmF0aW9ucyA9IGdldFJlZ2lzdHJhdGlvbnMoKTtcbiAgY29uc3QgdXNlclJlZ2lzdHJhdGlvbnMgPSByZWdpc3RyYXRpb25zLmZpbHRlcihyID0+IFxuICAgIHIuZW1haWwudG9Mb3dlckNhc2UoKSA9PT0gdXNlckVtYWlsLnRvTG93ZXJDYXNlKClcbiAgKTtcbiAgXG4gIGlmICh1c2VyUmVnaXN0cmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgXG4gIC8vIEV4dHJhY3QgbG9jYXRpb24gZnJvbSByZWdpc3RyYXRpb25zXG4gIGNvbnN0IGxvY2F0aW9uQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIFxuICB1c2VyUmVnaXN0cmF0aW9ucy5mb3JFYWNoKHJlZyA9PiB7XG4gICAgaWYgKHJlZy5vcHBvcnR1bml0eUxvY2F0aW9uICYmICFyZWcub3Bwb3J0dW5pdHlMb2NhdGlvbi5pbmNsdWRlcygnVmlydHVhbCcpKSB7XG4gICAgICBjb25zdCBwYXJ0cyA9IHJlZy5vcHBvcnR1bml0eUxvY2F0aW9uLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpO1xuICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGNvbnN0IGNpdHkgPSBwYXJ0c1swXTtcbiAgICAgICAgbG9jYXRpb25Db3VudHNbY2l0eV0gPSAobG9jYXRpb25Db3VudHNbY2l0eV0gfHwgMCkgKyAxO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIFxuICBjb25zdCBtb3N0Q29tbW9uQ2l0eSA9IE9iamVjdC5lbnRyaWVzKGxvY2F0aW9uQ291bnRzKVxuICAgIC5zb3J0KChbLCBhXSwgWywgYl0pID0+IGIgLSBhKVswXT8uWzBdO1xuICBcbiAgcmV0dXJuIG1vc3RDb21tb25DaXR5ID8geyBjaXR5OiBtb3N0Q29tbW9uQ2l0eSB9IDoge307XG59XG5cbi8qKlxuICogR2V0IHVzZXIncyBwcmVmZXJyZWQgY2F1c2VzIGZyb20gcmVnaXN0cmF0aW9uc1xuICogUmV0dXJucyBjYXVzZXMgdXNlciBoYXMgcmVnaXN0ZXJlZCBmb3IsIHNvcnRlZCBieSBmcmVxdWVuY3lcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJQcmVmZXJyZWRDYXVzZXMoKTogc3RyaW5nW10ge1xuICBjb25zdCB1c2VyRW1haWwgPSBnZXRVc2VyRW1haWwoKTtcbiAgaWYgKCF1c2VyRW1haWwpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgXG4gIGNvbnN0IHJlZ2lzdHJhdGlvbnMgPSBnZXRSZWdpc3RyYXRpb25zKCk7XG4gIGNvbnN0IHVzZXJSZWdpc3RyYXRpb25zID0gcmVnaXN0cmF0aW9ucy5maWx0ZXIociA9PiBcbiAgICByLmVtYWlsLnRvTG93ZXJDYXNlKCkgPT09IHVzZXJFbWFpbC50b0xvd2VyQ2FzZSgpXG4gICk7XG4gIFxuICBpZiAodXNlclJlZ2lzdHJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIFxuICAvLyBDb21tb24gY2F1c2Ugc2x1Z3MgdG8gbWF0Y2ggYWdhaW5zdFxuICBjb25zdCBjb21tb25DYXVzZXMgPSBbXG4gICAgJ2VkdWNhdGlvbicsXG4gICAgJ2Vudmlyb25tZW50JyxcbiAgICAnaGVhbHRoY2FyZScsXG4gICAgJ2FuaW1hbC13ZWxmYXJlJyxcbiAgICAnY29tbXVuaXR5LWRldmVsb3BtZW50JyxcbiAgICAnaHVuZ2VyLXJlbGllZicsXG4gIF07XG4gIFxuICBjb25zdCBjYXVzZU1hdGNoZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgXG4gIHVzZXJSZWdpc3RyYXRpb25zLmZvckVhY2gocmVnID0+IHtcbiAgICBjb25zdCBzbHVnID0gcmVnLm9wcG9ydHVuaXR5U2x1Zz8udG9Mb3dlckNhc2UoKSB8fCAnJztcbiAgICBjb25zdCB0aXRsZSA9IHJlZy5vcHBvcnR1bml0eVRpdGxlPy50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICAgIGNvbnN0IHRleHQgPSBgJHtzbHVnfSAke3RpdGxlfWA7XG4gICAgXG4gICAgY29tbW9uQ2F1c2VzLmZvckVhY2goY2F1c2UgPT4ge1xuICAgICAgaWYgKHRleHQuaW5jbHVkZXMoY2F1c2UpIHx8IHRleHQuaW5jbHVkZXMoY2F1c2UucmVwbGFjZSgnLScsICcgJykpKSB7XG4gICAgICAgIGNhdXNlTWF0Y2hlc1tjYXVzZV0gPSAoY2F1c2VNYXRjaGVzW2NhdXNlXSB8fCAwKSArIDE7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGNhdXNlTWF0Y2hlcylcbiAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlcbiAgICAubWFwKChbY2F1c2VdKSA9PiBjYXVzZSk7XG59XG4iXSwibmFtZXMiOlsiZ2V0UmVnaXN0cmF0aW9ucyIsImdldFVzZXJFbWFpbCIsImdldFVzZXJQcmVmZXJlbmNlcyIsIk9iamVjdCIsInByZWZlcmVuY2VzIiwidXNlckVtYWlsIiwicmVnaXN0cmF0aW9ucyIsInVzZXJSZWdpc3RyYXRpb25zIiwiZmlsdGVyIiwiciIsImVtYWlsIiwidG9Mb3dlckNhc2UiLCJsZW5ndGgiLCJsb2NhdGlvbkNvdW50cyIsImNhdXNlU2V0IiwiU2V0IiwiZm9yRWFjaCIsInJlZyIsIm9wcG9ydHVuaXR5TG9jYXRpb24iLCJpbmNsdWRlcyIsInBhcnRzIiwic3BsaXQiLCJtYXAiLCJwIiwidHJpbSIsImNpdHkiLCJtb3N0Q29tbW9uQ2l0eSIsImVudHJpZXMiLCJzb3J0IiwiYSIsImIiLCJjb21tb25DYXVzZXMiLCJjYXVzZU1hdGNoZXMiLCJzbHVnIiwib3Bwb3J0dW5pdHlTbHVnIiwidGl0bGUiLCJvcHBvcnR1bml0eVRpdGxlIiwidGV4dCIsImNhdXNlIiwicHJlZmVycmVkQ2F1c2VzIiwic2xpY2UiLCJjYWxjdWxhdGVSZWxldmFuY2VTY29yZSIsIm9wcG9ydHVuaXR5Iiwic2NvcmUiLCJvcHBDaXR5IiwicHJlZkNpdHkiLCJzdGF0ZSIsIm9wcFN0YXRlIiwicHJlZlN0YXRlIiwiY291bnRyeSIsIm9wcENvdW50cnkiLCJwcmVmQ291bnRyeSIsIm9wcENhdXNlcyIsImNhdXNlU2x1Z3MiLCJjIiwicHJlZkNhdXNlcyIsInByZWZDYXVzZSIsImluZGV4Iiwic29ydE9wcG9ydHVuaXRpZXNCeVJlbGV2YW5jZSIsIm9wcG9ydHVuaXRpZXMiLCJvcHBvcnR1bml0aWVzV2l0aFNjb3JlcyIsIm9wcCIsImRhdGVBIiwiRGF0ZSIsInN0YXJ0RGF0ZSIsImdldFRpbWUiLCJkYXRlQiIsIml0ZW0iLCJnZXRVc2VyUHJlZmVycmVkTG9jYXRpb24iLCJnZXRVc2VyUHJlZmVycmVkQ2F1c2VzIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/utils/personalize-sort.ts\n"));

/***/ })

});