"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/opportunities/page",{

/***/ "(app-pages-browser)/./src/components/opportunities/OpportunitiesPageClient.tsx":
/*!******************************************************************!*\
  !*** ./src/components/opportunities/OpportunitiesPageClient.tsx ***!
  \******************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpportunitiesPageClient: function() { return /* binding */ OpportunitiesPageClient; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./src/lib/utils/index.ts\");\n/* harmony import */ var _lib_contentstack_personalize__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/contentstack/personalize */ \"(app-pages-browser)/./src/lib/contentstack/personalize.ts\");\n/* harmony import */ var _OpportunityFilters__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OpportunityFilters */ \"(app-pages-browser)/./src/components/opportunities/OpportunityFilters.tsx\");\n/* harmony import */ var _OpportunityList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./OpportunityList */ \"(app-pages-browser)/./src/components/opportunities/OpportunityList.tsx\");\n/* harmony import */ var _LocationFilter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./LocationFilter */ \"(app-pages-browser)/./src/components/opportunities/LocationFilter.tsx\");\n/* harmony import */ var _OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./OpportunitiesPage.module.css */ \"(app-pages-browser)/./src/components/opportunities/OpportunitiesPage.module.css\");\n/* harmony import */ var _OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8__);\n/* __next_internal_client_entry_do_not_use__ OpportunitiesPageClient,default auto */ \nvar _s = $RefreshSig$();\n/**\n * OpportunitiesPageClient Component\n * Client-side wrapper for the opportunities page with filter state management\n * Shows all opportunities by default, filters are optional\n * Includes smart search bar for filtering by text\n */ \n\n\n\n\n\n\n\nfunction OpportunitiesPageClient(param) {\n    let { initialOpportunities, initialTotal, initialPage, pageSize, initialHasMore, initialStatusFilter = \"active\", causes, locations, initialLocation, initialIsVirtual, hasActiveFilters, content } = param;\n    _s();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [isPending, startTransition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useTransition)();\n    const isInitialMount = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // State\n    const [selectedLocation, setSelectedLocation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialLocation);\n    const [isVirtual, setIsVirtual] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialIsVirtual);\n    const [opportunities, setOpportunities] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialOpportunities);\n    const [total, setTotal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialTotal);\n    const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialPage);\n    const [hasMore, setHasMore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialHasMore);\n    const [statusFilter, setStatusFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialStatusFilter);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Search state\n    const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [debouncedSearch, setDebouncedSearch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const searchInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        contributionTypes: [],\n        causes: [],\n        timeFilter: null\n    });\n    // Debounce search input\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setDebouncedSearch(searchQuery);\n        }, 300);\n        return ()=>clearTimeout(timer);\n    }, [\n        searchQuery\n    ]);\n    // Filter opportunities based on search query (client-side)\n    const filteredOpportunities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!debouncedSearch.trim()) {\n            return opportunities;\n        }\n        const query = debouncedSearch.toLowerCase().trim();\n        const searchTerms = query.split(/\\s+/).filter(Boolean);\n        return opportunities.filter((opp)=>{\n            // Build searchable text from opportunity fields\n            const searchableText = [\n                opp.title,\n                opp.summary,\n                opp.city,\n                opp.state,\n                opp.country,\n                opp.organizerName,\n                ...opp.causeSlugs || [],\n                ...opp.contributionTypes || []\n            ].filter(Boolean).join(\" \").toLowerCase();\n            // Check if all search terms are found\n            return searchTerms.every((term)=>searchableText.includes(term));\n        });\n    }, [\n        opportunities,\n        debouncedSearch\n    ]);\n    // Get filtered total\n    const filteredTotal = debouncedSearch.trim() ? filteredOpportunities.length : total;\n    // Check if any filters are active\n    const hasAnyFilters = !!(selectedLocation || isVirtual || filters.contributionTypes.length > 0 || filters.causes.length > 0 || filters.timeFilter || debouncedSearch.trim());\n    // Update URL when filters change\n    const updateUrl = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newLocation, newIsVirtual, newFilters, newPage, newStatusFilter)=>{\n        const params = new URLSearchParams();\n        if (newLocation) params.set(\"location\", newLocation);\n        if (newIsVirtual) params.set(\"virtual\", \"true\");\n        if (newFilters.contributionTypes.length > 0) {\n            params.set(\"types\", newFilters.contributionTypes.join(\",\"));\n        }\n        if (newFilters.causes.length > 0) {\n            params.set(\"causes\", newFilters.causes.join(\",\"));\n        }\n        if (newFilters.timeFilter) {\n            params.set(\"time\", newFilters.timeFilter);\n        }\n        if (newPage > 1) params.set(\"page\", newPage.toString());\n        if (newStatusFilter !== \"active\") params.set(\"status\", newStatusFilter);\n        const queryString = params.toString();\n        const newUrl = queryString ? \"?\".concat(queryString) : \"/opportunities\";\n        startTransition(()=>{\n            router.push(newUrl, {\n                scroll: false\n            });\n        });\n    }, [\n        router\n    ]);\n    // Fetch opportunities when filters change\n    const fetchOpportunities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        setIsLoading(true);\n        try {\n            // Build query params for API\n            const params = new URLSearchParams();\n            if (selectedLocation) params.set(\"location\", selectedLocation);\n            if (isVirtual) params.set(\"virtual\", \"true\");\n            if (filters.contributionTypes.length > 0) {\n                params.set(\"types\", filters.contributionTypes.join(\",\"));\n            }\n            if (filters.causes.length > 0) {\n                params.set(\"causes\", filters.causes.join(\",\"));\n            }\n            if (filters.timeFilter) {\n                const dateRange = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.getDateRangeForFilter)(filters.timeFilter);\n                params.set(\"startDate\", dateRange.startDate);\n                if (dateRange.endDate) params.set(\"endDate\", dateRange.endDate);\n            }\n            params.set(\"page\", page.toString());\n            params.set(\"pageSize\", pageSize.toString());\n            params.set(\"sort\", \"date_asc\"); // Always sort by date ascending\n            // Set status based on filter\n            if (statusFilter === \"active\") {\n                params.set(\"status\", \"upcoming,ongoing\");\n            } else {\n                params.set(\"status\", \"completed\");\n            }\n            // Add user attributes for personalization (only for active tab)\n            if (statusFilter === \"active\") {\n                try {\n                    const userAttributes = (0,_lib_contentstack_personalize__WEBPACK_IMPORTED_MODULE_4__.getUserAttributesFromRegistrations)();\n                    if (userAttributes && Object.keys(userAttributes).length > 0) {\n                        params.set(\"userAttributes\", encodeURIComponent(JSON.stringify(userAttributes)));\n                    }\n                } catch (error) {\n                    // Ignore errors getting user attributes\n                    console.warn(\"Failed to get user attributes for personalization:\", error);\n                }\n            }\n            const response = await fetch(\"/api/opportunities?\".concat(params.toString()));\n            const data = await response.json();\n            setOpportunities(data.opportunities);\n            setTotal(data.total);\n            setHasMore(data.hasMore);\n        } catch (error) {\n            console.error(\"Failed to fetch opportunities:\", error);\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        page,\n        pageSize,\n        statusFilter,\n        hasAnyFilters\n    ]);\n    // Fetch when dependencies change (but not on initial mount)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Skip initial fetch as we have server-rendered data\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n            // Only skip if all conditions match initial state\n            if (selectedLocation === initialLocation && isVirtual === initialIsVirtual && page === initialPage && statusFilter === initialStatusFilter && filters.contributionTypes.length === 0 && filters.causes.length === 0 && filters.timeFilter === null) {\n                return;\n            }\n        }\n        fetchOpportunities();\n    }, [\n        fetchOpportunities,\n        selectedLocation,\n        isVirtual,\n        initialLocation,\n        initialIsVirtual,\n        initialPage,\n        initialStatusFilter,\n        page,\n        filters,\n        statusFilter\n    ]);\n    // Handle location selection\n    const handleLocationSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(locationSlug) {\n        let virtual = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        setSelectedLocation(locationSlug);\n        setIsVirtual(virtual);\n        setPage(1);\n        updateUrl(locationSlug, virtual, filters, 1, statusFilter);\n    }, [\n        filters,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle filter changes\n    const handleFiltersChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newFilters)=>{\n        setFilters(newFilters);\n        setPage(1);\n        updateUrl(selectedLocation, isVirtual, newFilters, 1, statusFilter);\n    }, [\n        selectedLocation,\n        isVirtual,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle status filter change\n    const handleStatusFilterChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newStatusFilter)=>{\n        setStatusFilter(newStatusFilter);\n        setPage(1);\n        updateUrl(selectedLocation, isVirtual, filters, 1, newStatusFilter);\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        updateUrl\n    ]);\n    // Handle page change\n    const handlePageChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newPage)=>{\n        setPage(newPage);\n        updateUrl(selectedLocation, isVirtual, filters, newPage, statusFilter);\n        // Scroll to top of list\n        window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        });\n    }, [\n        selectedLocation,\n        isVirtual,\n        filters,\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle clear filters\n    const handleClearFilters = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const clearedFilters = {\n            contributionTypes: [],\n            causes: [],\n            timeFilter: null\n        };\n        setFilters(clearedFilters);\n        setSelectedLocation(null);\n        setIsVirtual(false);\n        setSearchQuery(\"\");\n        setDebouncedSearch(\"\");\n        setPage(1);\n        updateUrl(null, false, clearedFilters, 1, statusFilter);\n    }, [\n        statusFilter,\n        updateUrl\n    ]);\n    // Handle search input change\n    const handleSearchChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        setSearchQuery(e.target.value);\n    }, []);\n    // Handle search clear\n    const handleSearchClear = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        var _searchInputRef_current;\n        setSearchQuery(\"\");\n        setDebouncedSearch(\"\");\n        (_searchInputRef_current = searchInputRef.current) === null || _searchInputRef_current === void 0 ? void 0 : _searchInputRef_current.focus();\n    }, []);\n    // Get the title based on active filters\n    const getPageTitle = ()=>{\n        if (isVirtual) return \"Virtual Opportunities\";\n        if (selectedLocation) {\n            var _locations_find;\n            const locationName = ((_locations_find = locations.find((l)=>l.slug === selectedLocation)) === null || _locations_find === void 0 ? void 0 : _locations_find.name) || selectedLocation;\n            return \"Opportunities in \".concat(locationName);\n        }\n        return \"Discover Opportunities\";\n    };\n    // Get selected location name\n    const getSelectedLocationName = ()=>{\n        if (isVirtual) return \"Virtual / Remote\";\n        if (selectedLocation) {\n            const location = locations.find((l)=>l.slug === selectedLocation);\n            return (location === null || location === void 0 ? void 0 : location.name) || selectedLocation;\n        }\n        return null;\n    };\n    // Get subtitle/helper text\n    const getSubtitle = ()=>{\n        if (!hasAnyFilters) {\n            return content.subtitle_all || \"Showing all opportunities. Apply filters to narrow results.\";\n        }\n        const activeFilterCount = [\n            selectedLocation ? 1 : 0,\n            isVirtual ? 1 : 0,\n            filters.contributionTypes.length > 0 ? 1 : 0,\n            filters.causes.length > 0 ? 1 : 0,\n            filters.timeFilter ? 1 : 0\n        ].reduce((a, b)=>a + b, 0);\n        return \"\".concat(total, \" opportunity\").concat(total !== 1 ? \"ies\" : \"\", \" found with \").concat(activeFilterCount, \" filter\").concat(activeFilterCount !== 1 ? \"s\" : \"\", \" applied.\");\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().page),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().container),\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().header),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().headerContent),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().title),\n                                    children: getPageTitle()\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 358,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().subtitle),\n                                    children: getSubtitle()\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 359,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 357,\n                            columnNumber: 11\n                        }, this),\n                        hasAnyFilters && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().clearFiltersButton),\n                            onClick: handleClearFilters,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    width: \"18\",\n                                    height: \"18\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    \"aria-hidden\": \"true\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        d: \"M6 18L18 6M6 6l12 12\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 370,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 369,\n                                    columnNumber: 15\n                                }, this),\n                                content.clear_filters_text || \"Clear All Filters\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 364,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 356,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchSection),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchWrapper),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchIcon),\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    \"aria-hidden\": \"true\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                            cx: \"11\",\n                                            cy: \"11\",\n                                            r: \"8\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 391,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            d: \"m21 21-4.35-4.35\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 392,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 380,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    ref: searchInputRef,\n                                    type: \"search\",\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchInput),\n                                    placeholder: content.search_placeholder || \"Search opportunities...\",\n                                    value: searchQuery,\n                                    onChange: handleSearchChange,\n                                    \"aria-label\": \"Search opportunities\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 394,\n                                    columnNumber: 13\n                                }, this),\n                                searchQuery && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchClear),\n                                    onClick: handleSearchClear,\n                                    \"aria-label\": \"Clear search\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        viewBox: \"0 0 24 24\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"2\",\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M18 6 6 18\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                                lineNumber: 419,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"m6 6 12 12\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                                lineNumber: 420,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 410,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 404,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 379,\n                            columnNumber: 11\n                        }, this),\n                        debouncedSearch && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().searchResults),\n                            children: [\n                                \"Found \",\n                                filteredTotal,\n                                \" result\",\n                                filteredTotal !== 1 ? \"s\" : \"\",\n                                ' for \"',\n                                debouncedSearch,\n                                '\"'\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 426,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 378,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().content),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().sidebar),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().locationSection),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_LocationFilter__WEBPACK_IMPORTED_MODULE_7__.LocationFilter, {\n                                        locations: locations,\n                                        selectedLocation: selectedLocation,\n                                        isVirtual: isVirtual,\n                                        onLocationChange: handleLocationSelect\n                                    }, void 0, false, {\n                                        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                        lineNumber: 437,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 436,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().otherFilters),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().sidebarTitle),\n                                            children: content.filters_title || \"Filters\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 447,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_OpportunityFilters__WEBPACK_IMPORTED_MODULE_5__.OpportunityFilters, {\n                                            causes: causes,\n                                            filters: filters,\n                                            onFiltersChange: handleFiltersChange,\n                                            layout: \"vertical\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                            lineNumber: 448,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                    lineNumber: 446,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 434,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                            className: (_OpportunitiesPage_module_css__WEBPACK_IMPORTED_MODULE_8___default().main),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_OpportunityList__WEBPACK_IMPORTED_MODULE_6__.OpportunityList, {\n                                opportunities: filteredOpportunities,\n                                total: filteredTotal,\n                                page: page,\n                                pageSize: pageSize,\n                                hasMore: hasMore && !debouncedSearch.trim(),\n                                isLoading: isLoading || isPending,\n                                statusFilter: statusFilter,\n                                onStatusFilterChange: handleStatusFilterChange,\n                                onPageChange: handlePageChange,\n                                onClearFilters: handleClearFilters,\n                                showAllMessage: !hasAnyFilters,\n                                selectedLocationName: getSelectedLocationName(),\n                                content: content\n                            }, void 0, false, {\n                                fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                                lineNumber: 459,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                            lineNumber: 458,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n                    lineNumber: 432,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n            lineNumber: 354,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/vaishnavi.kedar/Documents/ImpactConnect/src/components/opportunities/OpportunitiesPageClient.tsx\",\n        lineNumber: 353,\n        columnNumber: 5\n    }, this);\n}\n_s(OpportunitiesPageClient, \"h7XbT5nUHXTEa3cDYbE9j9HTrsY=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        react__WEBPACK_IMPORTED_MODULE_1__.useTransition\n    ];\n});\n_c = OpportunitiesPageClient;\n/* harmony default export */ __webpack_exports__[\"default\"] = (OpportunitiesPageClient);\nvar _c;\n$RefreshReg$(_c, \"OpportunitiesPageClient\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL29wcG9ydHVuaXRpZXMvT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7Ozs7O0NBS0MsR0FFd0Y7QUFDN0M7QUFTUTtBQUNnQztBQUNmO0FBQ2pCO0FBQ0Y7QUFDRTtBQXVCN0MsU0FBU2Msd0JBQXdCLEtBYVQ7UUFiUyxFQUN0Q0Msb0JBQW9CLEVBQ3BCQyxZQUFZLEVBQ1pDLFdBQVcsRUFDWEMsUUFBUSxFQUNSQyxjQUFjLEVBQ2RDLHNCQUFzQixRQUFRLEVBQzlCQyxNQUFNLEVBQ05DLFNBQVMsRUFDVEMsZUFBZSxFQUNmQyxnQkFBZ0IsRUFDaEJDLGdCQUFnQixFQUNoQkMsT0FBTyxFQUNzQixHQWJTOztJQWN0QyxNQUFNQyxTQUFTckIsMERBQVNBO0lBQ3hCLE1BQU0sQ0FBQ3NCLFdBQVdDLGdCQUFnQixHQUFHMUIsb0RBQWFBO0lBQ2xELE1BQU0yQixpQkFBaUJ6Qiw2Q0FBTUEsQ0FBQztJQUU5QixRQUFRO0lBQ1IsTUFBTSxDQUFDMEIsa0JBQWtCQyxvQkFBb0IsR0FBR2hDLCtDQUFRQSxDQUFnQnVCO0lBQ3hFLE1BQU0sQ0FBQ1UsV0FBV0MsYUFBYSxHQUFHbEMsK0NBQVFBLENBQUN3QjtJQUMzQyxNQUFNLENBQUNXLGVBQWVDLGlCQUFpQixHQUFHcEMsK0NBQVFBLENBQUNlO0lBQ25ELE1BQU0sQ0FBQ3NCLE9BQU9DLFNBQVMsR0FBR3RDLCtDQUFRQSxDQUFDZ0I7SUFDbkMsTUFBTSxDQUFDdUIsTUFBTUMsUUFBUSxHQUFHeEMsK0NBQVFBLENBQUNpQjtJQUNqQyxNQUFNLENBQUN3QixTQUFTQyxXQUFXLEdBQUcxQywrQ0FBUUEsQ0FBQ21CO0lBQ3ZDLE1BQU0sQ0FBQ3dCLGNBQWNDLGdCQUFnQixHQUFHNUMsK0NBQVFBLENBQXlCb0I7SUFDekUsTUFBTSxDQUFDeUIsV0FBV0MsYUFBYSxHQUFHOUMsK0NBQVFBLENBQUM7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bXBvbmVudHMvb3Bwb3J0dW5pdGllcy9PcHBvcnR1bml0aWVzUGFnZUNsaWVudC50c3g/Mzk3NyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbi8qKlxuICogT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQgQ29tcG9uZW50XG4gKiBDbGllbnQtc2lkZSB3cmFwcGVyIGZvciB0aGUgb3Bwb3J0dW5pdGllcyBwYWdlIHdpdGggZmlsdGVyIHN0YXRlIG1hbmFnZW1lbnRcbiAqIFNob3dzIGFsbCBvcHBvcnR1bml0aWVzIGJ5IGRlZmF1bHQsIGZpbHRlcnMgYXJlIG9wdGlvbmFsXG4gKiBJbmNsdWRlcyBzbWFydCBzZWFyY2ggYmFyIGZvciBmaWx0ZXJpbmcgYnkgdGV4dFxuICovXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VUcmFuc2l0aW9uLCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHR5cGUge1xuICBPcHBvcnR1bml0eVN1bW1hcnksXG4gIENhdXNlUmVmZXJlbmNlLFxuICBMb2NhdGlvblJlZmVyZW5jZSxcbiAgQ29udHJpYnV0aW9uVHlwZSxcbn0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFRpbWVGaWx0ZXIgfSBmcm9tICdAL2xpYi91dGlscyc7XG5pbXBvcnQgdHlwZSB7IERpc2NvdmVyUGFnZUNvbnRlbnQgfSBmcm9tICdAL2xpYi9jb250ZW50c3RhY2snO1xuaW1wb3J0IHsgZ2V0RGF0ZVJhbmdlRm9yRmlsdGVyIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuaW1wb3J0IHsgZ2V0VXNlckF0dHJpYnV0ZXNGcm9tUmVnaXN0cmF0aW9ucyB9IGZyb20gJ0AvbGliL2NvbnRlbnRzdGFjay9wZXJzb25hbGl6ZSc7XG5pbXBvcnQgeyBPcHBvcnR1bml0eUZpbHRlcnMgYXMgRmlsdGVycyB9IGZyb20gJy4vT3Bwb3J0dW5pdHlGaWx0ZXJzJztcbmltcG9ydCB7IE9wcG9ydHVuaXR5TGlzdCB9IGZyb20gJy4vT3Bwb3J0dW5pdHlMaXN0JztcbmltcG9ydCB7IExvY2F0aW9uRmlsdGVyIH0gZnJvbSAnLi9Mb2NhdGlvbkZpbHRlcic7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vT3Bwb3J0dW5pdGllc1BhZ2UubW9kdWxlLmNzcyc7XG5cbmludGVyZmFjZSBGaWx0ZXJTdGF0ZSB7XG4gIGNvbnRyaWJ1dGlvblR5cGVzOiBDb250cmlidXRpb25UeXBlW107XG4gIGNhdXNlczogc3RyaW5nW107XG4gIHRpbWVGaWx0ZXI6IFRpbWVGaWx0ZXIgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnRQcm9wcyB7XG4gIGluaXRpYWxPcHBvcnR1bml0aWVzOiBPcHBvcnR1bml0eVN1bW1hcnlbXTtcbiAgaW5pdGlhbFRvdGFsOiBudW1iZXI7XG4gIGluaXRpYWxQYWdlOiBudW1iZXI7XG4gIHBhZ2VTaXplOiBudW1iZXI7XG4gIGluaXRpYWxIYXNNb3JlOiBib29sZWFuO1xuICBpbml0aWFsU3RhdHVzRmlsdGVyPzogJ2FjdGl2ZScgfCAnY29tcGxldGVkJztcbiAgY2F1c2VzOiBDYXVzZVJlZmVyZW5jZVtdO1xuICBsb2NhdGlvbnM6IExvY2F0aW9uUmVmZXJlbmNlW107XG4gIGluaXRpYWxMb2NhdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgaW5pdGlhbElzVmlydHVhbDogYm9vbGVhbjtcbiAgaGFzQWN0aXZlRmlsdGVyczogYm9vbGVhbjtcbiAgY29udGVudDogRGlzY292ZXJQYWdlQ29udGVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE9wcG9ydHVuaXRpZXNQYWdlQ2xpZW50KHtcbiAgaW5pdGlhbE9wcG9ydHVuaXRpZXMsXG4gIGluaXRpYWxUb3RhbCxcbiAgaW5pdGlhbFBhZ2UsXG4gIHBhZ2VTaXplLFxuICBpbml0aWFsSGFzTW9yZSxcbiAgaW5pdGlhbFN0YXR1c0ZpbHRlciA9ICdhY3RpdmUnLFxuICBjYXVzZXMsXG4gIGxvY2F0aW9ucyxcbiAgaW5pdGlhbExvY2F0aW9uLFxuICBpbml0aWFsSXNWaXJ0dWFsLFxuICBoYXNBY3RpdmVGaWx0ZXJzLFxuICBjb250ZW50LFxufTogT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnRQcm9wcykge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2lzUGVuZGluZywgc3RhcnRUcmFuc2l0aW9uXSA9IHVzZVRyYW5zaXRpb24oKTtcbiAgY29uc3QgaXNJbml0aWFsTW91bnQgPSB1c2VSZWYodHJ1ZSk7XG5cbiAgLy8gU3RhdGVcbiAgY29uc3QgW3NlbGVjdGVkTG9jYXRpb24sIHNldFNlbGVjdGVkTG9jYXRpb25dID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4oaW5pdGlhbExvY2F0aW9uKTtcbiAgY29uc3QgW2lzVmlydHVhbCwgc2V0SXNWaXJ0dWFsXSA9IHVzZVN0YXRlKGluaXRpYWxJc1ZpcnR1YWwpO1xuICBjb25zdCBbb3Bwb3J0dW5pdGllcywgc2V0T3Bwb3J0dW5pdGllc10gPSB1c2VTdGF0ZShpbml0aWFsT3Bwb3J0dW5pdGllcyk7XG4gIGNvbnN0IFt0b3RhbCwgc2V0VG90YWxdID0gdXNlU3RhdGUoaW5pdGlhbFRvdGFsKTtcbiAgY29uc3QgW3BhZ2UsIHNldFBhZ2VdID0gdXNlU3RhdGUoaW5pdGlhbFBhZ2UpO1xuICBjb25zdCBbaGFzTW9yZSwgc2V0SGFzTW9yZV0gPSB1c2VTdGF0ZShpbml0aWFsSGFzTW9yZSk7XG4gIGNvbnN0IFtzdGF0dXNGaWx0ZXIsIHNldFN0YXR1c0ZpbHRlcl0gPSB1c2VTdGF0ZTwnYWN0aXZlJyB8ICdjb21wbGV0ZWQnPihpbml0aWFsU3RhdHVzRmlsdGVyKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBTZWFyY2ggc3RhdGVcbiAgY29uc3QgW3NlYXJjaFF1ZXJ5LCBzZXRTZWFyY2hRdWVyeV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtkZWJvdW5jZWRTZWFyY2gsIHNldERlYm91bmNlZFNlYXJjaF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IHNlYXJjaElucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuXG4gIGNvbnN0IFtmaWx0ZXJzLCBzZXRGaWx0ZXJzXSA9IHVzZVN0YXRlPEZpbHRlclN0YXRlPih7XG4gICAgY29udHJpYnV0aW9uVHlwZXM6IFtdLFxuICAgIGNhdXNlczogW10sXG4gICAgdGltZUZpbHRlcjogbnVsbCxcbiAgfSk7XG5cbiAgLy8gRGVib3VuY2Ugc2VhcmNoIGlucHV0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldERlYm91bmNlZFNlYXJjaChzZWFyY2hRdWVyeSk7XG4gICAgfSwgMzAwKTtcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgfSwgW3NlYXJjaFF1ZXJ5XSk7XG5cbiAgLy8gRmlsdGVyIG9wcG9ydHVuaXRpZXMgYmFzZWQgb24gc2VhcmNoIHF1ZXJ5IChjbGllbnQtc2lkZSlcbiAgY29uc3QgZmlsdGVyZWRPcHBvcnR1bml0aWVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFkZWJvdW5jZWRTZWFyY2gudHJpbSgpKSB7XG4gICAgICByZXR1cm4gb3Bwb3J0dW5pdGllcztcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeSA9IGRlYm91bmNlZFNlYXJjaC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBjb25zdCBzZWFyY2hUZXJtcyA9IHF1ZXJ5LnNwbGl0KC9cXHMrLykuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgcmV0dXJuIG9wcG9ydHVuaXRpZXMuZmlsdGVyKChvcHApID0+IHtcbiAgICAgIC8vIEJ1aWxkIHNlYXJjaGFibGUgdGV4dCBmcm9tIG9wcG9ydHVuaXR5IGZpZWxkc1xuICAgICAgY29uc3Qgc2VhcmNoYWJsZVRleHQgPSBbXG4gICAgICAgIG9wcC50aXRsZSxcbiAgICAgICAgb3BwLnN1bW1hcnksXG4gICAgICAgIG9wcC5jaXR5LFxuICAgICAgICBvcHAuc3RhdGUsXG4gICAgICAgIG9wcC5jb3VudHJ5LFxuICAgICAgICBvcHAub3JnYW5pemVyTmFtZSxcbiAgICAgICAgLi4uKG9wcC5jYXVzZVNsdWdzIHx8IFtdKSxcbiAgICAgICAgLi4uKG9wcC5jb250cmlidXRpb25UeXBlcyB8fCBbXSksXG4gICAgICBdXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgLmpvaW4oJyAnKVxuICAgICAgICAudG9Mb3dlckNhc2UoKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgYWxsIHNlYXJjaCB0ZXJtcyBhcmUgZm91bmRcbiAgICAgIHJldHVybiBzZWFyY2hUZXJtcy5ldmVyeSgodGVybSkgPT4gc2VhcmNoYWJsZVRleHQuaW5jbHVkZXModGVybSkpO1xuICAgIH0pO1xuICB9LCBbb3Bwb3J0dW5pdGllcywgZGVib3VuY2VkU2VhcmNoXSk7XG5cbiAgLy8gR2V0IGZpbHRlcmVkIHRvdGFsXG4gIGNvbnN0IGZpbHRlcmVkVG90YWwgPSBkZWJvdW5jZWRTZWFyY2gudHJpbSgpID8gZmlsdGVyZWRPcHBvcnR1bml0aWVzLmxlbmd0aCA6IHRvdGFsO1xuXG4gIC8vIENoZWNrIGlmIGFueSBmaWx0ZXJzIGFyZSBhY3RpdmVcbiAgY29uc3QgaGFzQW55RmlsdGVycyA9ICEhKFxuICAgIHNlbGVjdGVkTG9jYXRpb24gfHxcbiAgICBpc1ZpcnR1YWwgfHxcbiAgICBmaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmxlbmd0aCA+IDAgfHxcbiAgICBmaWx0ZXJzLmNhdXNlcy5sZW5ndGggPiAwIHx8XG4gICAgZmlsdGVycy50aW1lRmlsdGVyIHx8XG4gICAgZGVib3VuY2VkU2VhcmNoLnRyaW0oKVxuICApO1xuXG4gIC8vIFVwZGF0ZSBVUkwgd2hlbiBmaWx0ZXJzIGNoYW5nZVxuICBjb25zdCB1cGRhdGVVcmwgPSB1c2VDYWxsYmFjayhcbiAgICAobmV3TG9jYXRpb246IHN0cmluZyB8IG51bGwsIG5ld0lzVmlydHVhbDogYm9vbGVhbiwgbmV3RmlsdGVyczogRmlsdGVyU3RhdGUsIG5ld1BhZ2U6IG51bWJlciwgbmV3U3RhdHVzRmlsdGVyOiAnYWN0aXZlJyB8ICdjb21wbGV0ZWQnKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cbiAgICAgIGlmIChuZXdMb2NhdGlvbikgcGFyYW1zLnNldCgnbG9jYXRpb24nLCBuZXdMb2NhdGlvbik7XG4gICAgICBpZiAobmV3SXNWaXJ0dWFsKSBwYXJhbXMuc2V0KCd2aXJ0dWFsJywgJ3RydWUnKTtcbiAgICAgIGlmIChuZXdGaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgndHlwZXMnLCBuZXdGaWx0ZXJzLmNvbnRyaWJ1dGlvblR5cGVzLmpvaW4oJywnKSk7XG4gICAgICB9XG4gICAgICBpZiAobmV3RmlsdGVycy5jYXVzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdjYXVzZXMnLCBuZXdGaWx0ZXJzLmNhdXNlcy5qb2luKCcsJykpO1xuICAgICAgfVxuICAgICAgaWYgKG5ld0ZpbHRlcnMudGltZUZpbHRlcikge1xuICAgICAgICBwYXJhbXMuc2V0KCd0aW1lJywgbmV3RmlsdGVycy50aW1lRmlsdGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXdQYWdlID4gMSkgcGFyYW1zLnNldCgncGFnZScsIG5ld1BhZ2UudG9TdHJpbmcoKSk7XG4gICAgICBpZiAobmV3U3RhdHVzRmlsdGVyICE9PSAnYWN0aXZlJykgcGFyYW1zLnNldCgnc3RhdHVzJywgbmV3U3RhdHVzRmlsdGVyKTtcblxuICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IG5ld1VybCA9IHF1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiAnL29wcG9ydHVuaXRpZXMnO1xuXG4gICAgICBzdGFydFRyYW5zaXRpb24oKCkgPT4ge1xuICAgICAgICByb3V0ZXIucHVzaChuZXdVcmwsIHsgc2Nyb2xsOiBmYWxzZSB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3JvdXRlcl1cbiAgKTtcblxuICAvLyBGZXRjaCBvcHBvcnR1bml0aWVzIHdoZW4gZmlsdGVycyBjaGFuZ2VcbiAgY29uc3QgZmV0Y2hPcHBvcnR1bml0aWVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHNldElzTG9hZGluZyh0cnVlKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBCdWlsZCBxdWVyeSBwYXJhbXMgZm9yIEFQSVxuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgXG4gICAgICBpZiAoc2VsZWN0ZWRMb2NhdGlvbikgcGFyYW1zLnNldCgnbG9jYXRpb24nLCBzZWxlY3RlZExvY2F0aW9uKTtcbiAgICAgIGlmIChpc1ZpcnR1YWwpIHBhcmFtcy5zZXQoJ3ZpcnR1YWwnLCAndHJ1ZScpO1xuICAgICAgaWYgKGZpbHRlcnMuY29udHJpYnV0aW9uVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCd0eXBlcycsIGZpbHRlcnMuY29udHJpYnV0aW9uVHlwZXMuam9pbignLCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLmNhdXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ2NhdXNlcycsIGZpbHRlcnMuY2F1c2VzLmpvaW4oJywnKSk7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVycy50aW1lRmlsdGVyKSB7XG4gICAgICAgIGNvbnN0IGRhdGVSYW5nZSA9IGdldERhdGVSYW5nZUZvckZpbHRlcihmaWx0ZXJzLnRpbWVGaWx0ZXIpO1xuICAgICAgICBwYXJhbXMuc2V0KCdzdGFydERhdGUnLCBkYXRlUmFuZ2Uuc3RhcnREYXRlKTtcbiAgICAgICAgaWYgKGRhdGVSYW5nZS5lbmREYXRlKSBwYXJhbXMuc2V0KCdlbmREYXRlJywgZGF0ZVJhbmdlLmVuZERhdGUpO1xuICAgICAgfVxuICAgICAgcGFyYW1zLnNldCgncGFnZScsIHBhZ2UudG9TdHJpbmcoKSk7XG4gICAgICBwYXJhbXMuc2V0KCdwYWdlU2l6ZScsIHBhZ2VTaXplLnRvU3RyaW5nKCkpO1xuICAgICAgcGFyYW1zLnNldCgnc29ydCcsICdkYXRlX2FzYycpOyAvLyBBbHdheXMgc29ydCBieSBkYXRlIGFzY2VuZGluZ1xuICAgICAgLy8gU2V0IHN0YXR1cyBiYXNlZCBvbiBmaWx0ZXJcbiAgICAgIGlmIChzdGF0dXNGaWx0ZXIgPT09ICdhY3RpdmUnKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3N0YXR1cycsICd1cGNvbWluZyxvbmdvaW5nJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMuc2V0KCdzdGF0dXMnLCAnY29tcGxldGVkJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB1c2VyIGF0dHJpYnV0ZXMgZm9yIHBlcnNvbmFsaXphdGlvbiAob25seSBmb3IgYWN0aXZlIHRhYilcbiAgICAgIGlmIChzdGF0dXNGaWx0ZXIgPT09ICdhY3RpdmUnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXNlckF0dHJpYnV0ZXMgPSBnZXRVc2VyQXR0cmlidXRlc0Zyb21SZWdpc3RyYXRpb25zKCk7XG4gICAgICAgICAgaWYgKHVzZXJBdHRyaWJ1dGVzICYmIE9iamVjdC5rZXlzKHVzZXJBdHRyaWJ1dGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwYXJhbXMuc2V0KCd1c2VyQXR0cmlidXRlcycsIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh1c2VyQXR0cmlidXRlcykpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9ycyBnZXR0aW5nIHVzZXIgYXR0cmlidXRlc1xuICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGdldCB1c2VyIGF0dHJpYnV0ZXMgZm9yIHBlcnNvbmFsaXphdGlvbjonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9vcHBvcnR1bml0aWVzPyR7cGFyYW1zLnRvU3RyaW5nKCl9YCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBzZXRPcHBvcnR1bml0aWVzKGRhdGEub3Bwb3J0dW5pdGllcyk7XG4gICAgICBzZXRUb3RhbChkYXRhLnRvdGFsKTtcbiAgICAgIHNldEhhc01vcmUoZGF0YS5oYXNNb3JlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIG9wcG9ydHVuaXRpZXM6JywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgZmlsdGVycywgcGFnZSwgcGFnZVNpemUsIHN0YXR1c0ZpbHRlciwgaGFzQW55RmlsdGVyc10pO1xuXG4gIC8vIEZldGNoIHdoZW4gZGVwZW5kZW5jaWVzIGNoYW5nZSAoYnV0IG5vdCBvbiBpbml0aWFsIG1vdW50KVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNraXAgaW5pdGlhbCBmZXRjaCBhcyB3ZSBoYXZlIHNlcnZlci1yZW5kZXJlZCBkYXRhXG4gICAgaWYgKGlzSW5pdGlhbE1vdW50LmN1cnJlbnQpIHtcbiAgICAgIGlzSW5pdGlhbE1vdW50LmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIC8vIE9ubHkgc2tpcCBpZiBhbGwgY29uZGl0aW9ucyBtYXRjaCBpbml0aWFsIHN0YXRlXG4gICAgICBpZiAoXG4gICAgICAgIHNlbGVjdGVkTG9jYXRpb24gPT09IGluaXRpYWxMb2NhdGlvbiAmJlxuICAgICAgICBpc1ZpcnR1YWwgPT09IGluaXRpYWxJc1ZpcnR1YWwgJiZcbiAgICAgICAgcGFnZSA9PT0gaW5pdGlhbFBhZ2UgJiZcbiAgICAgICAgc3RhdHVzRmlsdGVyID09PSBpbml0aWFsU3RhdHVzRmlsdGVyICYmXG4gICAgICAgIGZpbHRlcnMuY29udHJpYnV0aW9uVHlwZXMubGVuZ3RoID09PSAwICYmXG4gICAgICAgIGZpbHRlcnMuY2F1c2VzLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICBmaWx0ZXJzLnRpbWVGaWx0ZXIgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmV0Y2hPcHBvcnR1bml0aWVzKCk7XG4gIH0sIFtmZXRjaE9wcG9ydHVuaXRpZXMsIHNlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgaW5pdGlhbExvY2F0aW9uLCBpbml0aWFsSXNWaXJ0dWFsLCBpbml0aWFsUGFnZSwgaW5pdGlhbFN0YXR1c0ZpbHRlciwgcGFnZSwgZmlsdGVycywgc3RhdHVzRmlsdGVyXSk7XG5cbiAgLy8gSGFuZGxlIGxvY2F0aW9uIHNlbGVjdGlvblxuICBjb25zdCBoYW5kbGVMb2NhdGlvblNlbGVjdCA9IHVzZUNhbGxiYWNrKFxuICAgIChsb2NhdGlvblNsdWc6IHN0cmluZyB8IG51bGwsIHZpcnR1YWw6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuICAgICAgc2V0U2VsZWN0ZWRMb2NhdGlvbihsb2NhdGlvblNsdWcpO1xuICAgICAgc2V0SXNWaXJ0dWFsKHZpcnR1YWwpO1xuICAgICAgc2V0UGFnZSgxKTtcbiAgICAgIHVwZGF0ZVVybChsb2NhdGlvblNsdWcsIHZpcnR1YWwsIGZpbHRlcnMsIDEsIHN0YXR1c0ZpbHRlcik7XG4gICAgfSxcbiAgICBbZmlsdGVycywgc3RhdHVzRmlsdGVyLCB1cGRhdGVVcmxdXG4gICk7XG5cbiAgLy8gSGFuZGxlIGZpbHRlciBjaGFuZ2VzXG4gIGNvbnN0IGhhbmRsZUZpbHRlcnNDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAobmV3RmlsdGVyczogRmlsdGVyU3RhdGUpID0+IHtcbiAgICAgIHNldEZpbHRlcnMobmV3RmlsdGVycyk7XG4gICAgICBzZXRQYWdlKDEpO1xuICAgICAgdXBkYXRlVXJsKHNlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgbmV3RmlsdGVycywgMSwgc3RhdHVzRmlsdGVyKTtcbiAgICB9LFxuICAgIFtzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIHN0YXR1c0ZpbHRlciwgdXBkYXRlVXJsXVxuICApO1xuXG4gIC8vIEhhbmRsZSBzdGF0dXMgZmlsdGVyIGNoYW5nZVxuICBjb25zdCBoYW5kbGVTdGF0dXNGaWx0ZXJDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAobmV3U3RhdHVzRmlsdGVyOiAnYWN0aXZlJyB8ICdjb21wbGV0ZWQnKSA9PiB7XG4gICAgICBzZXRTdGF0dXNGaWx0ZXIobmV3U3RhdHVzRmlsdGVyKTtcbiAgICAgIHNldFBhZ2UoMSk7XG4gICAgICB1cGRhdGVVcmwoc2VsZWN0ZWRMb2NhdGlvbiwgaXNWaXJ0dWFsLCBmaWx0ZXJzLCAxLCBuZXdTdGF0dXNGaWx0ZXIpO1xuICAgIH0sXG4gICAgW3NlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgZmlsdGVycywgdXBkYXRlVXJsXVxuICApO1xuXG4gIC8vIEhhbmRsZSBwYWdlIGNoYW5nZVxuICBjb25zdCBoYW5kbGVQYWdlQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKG5ld1BhZ2U6IG51bWJlcikgPT4ge1xuICAgICAgc2V0UGFnZShuZXdQYWdlKTtcbiAgICAgIHVwZGF0ZVVybChzZWxlY3RlZExvY2F0aW9uLCBpc1ZpcnR1YWwsIGZpbHRlcnMsIG5ld1BhZ2UsIHN0YXR1c0ZpbHRlcik7XG4gICAgICAvLyBTY3JvbGwgdG8gdG9wIG9mIGxpc3RcbiAgICAgIHdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgIH0sXG4gICAgW3NlbGVjdGVkTG9jYXRpb24sIGlzVmlydHVhbCwgZmlsdGVycywgc3RhdHVzRmlsdGVyLCB1cGRhdGVVcmxdXG4gICk7XG5cbiAgLy8gSGFuZGxlIGNsZWFyIGZpbHRlcnNcbiAgY29uc3QgaGFuZGxlQ2xlYXJGaWx0ZXJzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGNsZWFyZWRGaWx0ZXJzOiBGaWx0ZXJTdGF0ZSA9IHtcbiAgICAgIGNvbnRyaWJ1dGlvblR5cGVzOiBbXSxcbiAgICAgIGNhdXNlczogW10sXG4gICAgICB0aW1lRmlsdGVyOiBudWxsLFxuICAgIH07XG4gICAgc2V0RmlsdGVycyhjbGVhcmVkRmlsdGVycyk7XG4gICAgc2V0U2VsZWN0ZWRMb2NhdGlvbihudWxsKTtcbiAgICBzZXRJc1ZpcnR1YWwoZmFsc2UpO1xuICAgIHNldFNlYXJjaFF1ZXJ5KCcnKTtcbiAgICBzZXREZWJvdW5jZWRTZWFyY2goJycpO1xuICAgIHNldFBhZ2UoMSk7XG4gICAgdXBkYXRlVXJsKG51bGwsIGZhbHNlLCBjbGVhcmVkRmlsdGVycywgMSwgc3RhdHVzRmlsdGVyKTtcbiAgfSwgW3N0YXR1c0ZpbHRlciwgdXBkYXRlVXJsXSk7XG5cbiAgLy8gSGFuZGxlIHNlYXJjaCBpbnB1dCBjaGFuZ2VcbiAgY29uc3QgaGFuZGxlU2VhcmNoQ2hhbmdlID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgc2V0U2VhcmNoUXVlcnkoZS50YXJnZXQudmFsdWUpO1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHNlYXJjaCBjbGVhclxuICBjb25zdCBoYW5kbGVTZWFyY2hDbGVhciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTZWFyY2hRdWVyeSgnJyk7XG4gICAgc2V0RGVib3VuY2VkU2VhcmNoKCcnKTtcbiAgICBzZWFyY2hJbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpO1xuICB9LCBbXSk7XG5cbiAgLy8gR2V0IHRoZSB0aXRsZSBiYXNlZCBvbiBhY3RpdmUgZmlsdGVyc1xuICBjb25zdCBnZXRQYWdlVGl0bGUgPSAoKSA9PiB7XG4gICAgaWYgKGlzVmlydHVhbCkgcmV0dXJuICdWaXJ0dWFsIE9wcG9ydHVuaXRpZXMnO1xuICAgIGlmIChzZWxlY3RlZExvY2F0aW9uKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbk5hbWUgPSBsb2NhdGlvbnMuZmluZChsID0+IGwuc2x1ZyA9PT0gc2VsZWN0ZWRMb2NhdGlvbik/Lm5hbWUgfHwgc2VsZWN0ZWRMb2NhdGlvbjtcbiAgICAgIHJldHVybiBgT3Bwb3J0dW5pdGllcyBpbiAke2xvY2F0aW9uTmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gJ0Rpc2NvdmVyIE9wcG9ydHVuaXRpZXMnO1xuICB9O1xuXG4gIC8vIEdldCBzZWxlY3RlZCBsb2NhdGlvbiBuYW1lXG4gIGNvbnN0IGdldFNlbGVjdGVkTG9jYXRpb25OYW1lID0gKCkgPT4ge1xuICAgIGlmIChpc1ZpcnR1YWwpIHJldHVybiAnVmlydHVhbCAvIFJlbW90ZSc7XG4gICAgaWYgKHNlbGVjdGVkTG9jYXRpb24pIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uID0gbG9jYXRpb25zLmZpbmQobCA9PiBsLnNsdWcgPT09IHNlbGVjdGVkTG9jYXRpb24pO1xuICAgICAgcmV0dXJuIGxvY2F0aW9uPy5uYW1lIHx8IHNlbGVjdGVkTG9jYXRpb247XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8vIEdldCBzdWJ0aXRsZS9oZWxwZXIgdGV4dFxuICBjb25zdCBnZXRTdWJ0aXRsZSA9ICgpID0+IHtcbiAgICBpZiAoIWhhc0FueUZpbHRlcnMpIHtcbiAgICAgIHJldHVybiBjb250ZW50LnN1YnRpdGxlX2FsbCB8fCAnU2hvd2luZyBhbGwgb3Bwb3J0dW5pdGllcy4gQXBwbHkgZmlsdGVycyB0byBuYXJyb3cgcmVzdWx0cy4nO1xuICAgIH1cbiAgICBjb25zdCBhY3RpdmVGaWx0ZXJDb3VudCA9IFtcbiAgICAgIHNlbGVjdGVkTG9jYXRpb24gPyAxIDogMCxcbiAgICAgIGlzVmlydHVhbCA/IDEgOiAwLFxuICAgICAgZmlsdGVycy5jb250cmlidXRpb25UeXBlcy5sZW5ndGggPiAwID8gMSA6IDAsXG4gICAgICBmaWx0ZXJzLmNhdXNlcy5sZW5ndGggPiAwID8gMSA6IDAsXG4gICAgICBmaWx0ZXJzLnRpbWVGaWx0ZXIgPyAxIDogMCxcbiAgICBdLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICAgIFxuICAgIHJldHVybiBgJHt0b3RhbH0gb3Bwb3J0dW5pdHkke3RvdGFsICE9PSAxID8gJ2llcycgOiAnJ30gZm91bmQgd2l0aCAke2FjdGl2ZUZpbHRlckNvdW50fSBmaWx0ZXIke2FjdGl2ZUZpbHRlckNvdW50ICE9PSAxID8gJ3MnIDogJyd9IGFwcGxpZWQuYDtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucGFnZX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gICAgICAgIHsvKiBQYWdlIEhlYWRlciAqL31cbiAgICAgICAgPGhlYWRlciBjbGFzc05hbWU9e3N0eWxlcy5oZWFkZXJ9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuaGVhZGVyQ29udGVudH0+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPXtzdHlsZXMudGl0bGV9PntnZXRQYWdlVGl0bGUoKX08L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtzdHlsZXMuc3VidGl0bGV9PntnZXRTdWJ0aXRsZSgpfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBDbGVhciBGaWx0ZXJzIGJ1dHRvbiAob25seSBzaG93IHdoZW4gZmlsdGVycyBhcmUgYWN0aXZlKSAqL31cbiAgICAgICAgICB7aGFzQW55RmlsdGVycyAmJiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5jbGVhckZpbHRlcnNCdXR0b259XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsZWFyRmlsdGVyc31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2VXaWR0aD1cIjJcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAge2NvbnRlbnQuY2xlYXJfZmlsdGVyc190ZXh0IHx8ICdDbGVhciBBbGwgRmlsdGVycyd9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2hlYWRlcj5cblxuICAgICAgICB7LyogU2VhcmNoIEJhciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5zZWFyY2hTZWN0aW9ufT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnNlYXJjaFdyYXBwZXJ9PlxuICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zZWFyY2hJY29ufVxuICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIxMVwiIGN5PVwiMTFcIiByPVwiOFwiIC8+XG4gICAgICAgICAgICAgIDxwYXRoIGQ9XCJtMjEgMjEtNC4zNS00LjM1XCIgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHJlZj17c2VhcmNoSW5wdXRSZWZ9XG4gICAgICAgICAgICAgIHR5cGU9XCJzZWFyY2hcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zZWFyY2hJbnB1dH1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2NvbnRlbnQuc2VhcmNoX3BsYWNlaG9sZGVyIHx8ICdTZWFyY2ggb3Bwb3J0dW5pdGllcy4uLid9XG4gICAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hRdWVyeX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNlYXJjaENoYW5nZX1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlNlYXJjaCBvcHBvcnR1bml0aWVzXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7c2VhcmNoUXVlcnkgJiYgKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VhcmNoQ2xlYXJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VhcmNoQ2xlYXJ9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkNsZWFyIHNlYXJjaFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOCA2IDYgMThcIiAvPlxuICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIm02IDYgMTIgMTJcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge2RlYm91bmNlZFNlYXJjaCAmJiAoXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9e3N0eWxlcy5zZWFyY2hSZXN1bHRzfT5cbiAgICAgICAgICAgICAgRm91bmQge2ZpbHRlcmVkVG90YWx9IHJlc3VsdHtmaWx0ZXJlZFRvdGFsICE9PSAxID8gJ3MnIDogJyd9IGZvciBcIntkZWJvdW5jZWRTZWFyY2h9XCJcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNvbnRlbnR9PlxuICAgICAgICAgIHsvKiBTaWRlYmFyIEZpbHRlcnMgKi99XG4gICAgICAgICAgPGFzaWRlIGNsYXNzTmFtZT17c3R5bGVzLnNpZGViYXJ9PlxuICAgICAgICAgICAgey8qIExvY2F0aW9uIEZpbHRlciAtIFByb21pbmVudCBTZWN0aW9uICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sb2NhdGlvblNlY3Rpb259PlxuICAgICAgICAgICAgICA8TG9jYXRpb25GaWx0ZXJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbnM9e2xvY2F0aW9uc31cbiAgICAgICAgICAgICAgICBzZWxlY3RlZExvY2F0aW9uPXtzZWxlY3RlZExvY2F0aW9ufVxuICAgICAgICAgICAgICAgIGlzVmlydHVhbD17aXNWaXJ0dWFsfVxuICAgICAgICAgICAgICAgIG9uTG9jYXRpb25DaGFuZ2U9e2hhbmRsZUxvY2F0aW9uU2VsZWN0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBPdGhlciBGaWx0ZXJzICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5vdGhlckZpbHRlcnN9PlxuICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPXtzdHlsZXMuc2lkZWJhclRpdGxlfT57Y29udGVudC5maWx0ZXJzX3RpdGxlIHx8ICdGaWx0ZXJzJ308L2gyPlxuICAgICAgICAgICAgICA8RmlsdGVyc1xuICAgICAgICAgICAgICAgIGNhdXNlcz17Y2F1c2VzfVxuICAgICAgICAgICAgICAgIGZpbHRlcnM9e2ZpbHRlcnN9XG4gICAgICAgICAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXtoYW5kbGVGaWx0ZXJzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvYXNpZGU+XG5cbiAgICAgICAgICB7LyogTWFpbiBDb250ZW50ICovfVxuICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT17c3R5bGVzLm1haW59PlxuICAgICAgICAgICAgPE9wcG9ydHVuaXR5TGlzdFxuICAgICAgICAgICAgICBvcHBvcnR1bml0aWVzPXtmaWx0ZXJlZE9wcG9ydHVuaXRpZXN9XG4gICAgICAgICAgICAgIHRvdGFsPXtmaWx0ZXJlZFRvdGFsfVxuICAgICAgICAgICAgICBwYWdlPXtwYWdlfVxuICAgICAgICAgICAgICBwYWdlU2l6ZT17cGFnZVNpemV9XG4gICAgICAgICAgICAgIGhhc01vcmU9e2hhc01vcmUgJiYgIWRlYm91bmNlZFNlYXJjaC50cmltKCl9XG4gICAgICAgICAgICAgIGlzTG9hZGluZz17aXNMb2FkaW5nIHx8IGlzUGVuZGluZ31cbiAgICAgICAgICAgICAgc3RhdHVzRmlsdGVyPXtzdGF0dXNGaWx0ZXJ9XG4gICAgICAgICAgICAgIG9uU3RhdHVzRmlsdGVyQ2hhbmdlPXtoYW5kbGVTdGF0dXNGaWx0ZXJDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uUGFnZUNoYW5nZT17aGFuZGxlUGFnZUNoYW5nZX1cbiAgICAgICAgICAgICAgb25DbGVhckZpbHRlcnM9e2hhbmRsZUNsZWFyRmlsdGVyc31cbiAgICAgICAgICAgICAgc2hvd0FsbE1lc3NhZ2U9eyFoYXNBbnlGaWx0ZXJzfVxuICAgICAgICAgICAgICBzZWxlY3RlZExvY2F0aW9uTmFtZT17Z2V0U2VsZWN0ZWRMb2NhdGlvbk5hbWUoKX1cbiAgICAgICAgICAgICAgY29udGVudD17Y29udGVudH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9tYWluPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBPcHBvcnR1bml0aWVzUGFnZUNsaWVudDtcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlVHJhbnNpdGlvbiIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VSb3V0ZXIiLCJnZXREYXRlUmFuZ2VGb3JGaWx0ZXIiLCJnZXRVc2VyQXR0cmlidXRlc0Zyb21SZWdpc3RyYXRpb25zIiwiT3Bwb3J0dW5pdHlGaWx0ZXJzIiwiRmlsdGVycyIsIk9wcG9ydHVuaXR5TGlzdCIsIkxvY2F0aW9uRmlsdGVyIiwic3R5bGVzIiwiT3Bwb3J0dW5pdGllc1BhZ2VDbGllbnQiLCJpbml0aWFsT3Bwb3J0dW5pdGllcyIsImluaXRpYWxUb3RhbCIsImluaXRpYWxQYWdlIiwicGFnZVNpemUiLCJpbml0aWFsSGFzTW9yZSIsImluaXRpYWxTdGF0dXNGaWx0ZXIiLCJjYXVzZXMiLCJsb2NhdGlvbnMiLCJpbml0aWFsTG9jYXRpb24iLCJpbml0aWFsSXNWaXJ0dWFsIiwiaGFzQWN0aXZlRmlsdGVycyIsImNvbnRlbnQiLCJyb3V0ZXIiLCJpc1BlbmRpbmciLCJzdGFydFRyYW5zaXRpb24iLCJpc0luaXRpYWxNb3VudCIsInNlbGVjdGVkTG9jYXRpb24iLCJzZXRTZWxlY3RlZExvY2F0aW9uIiwiaXNWaXJ0dWFsIiwic2V0SXNWaXJ0dWFsIiwib3Bwb3J0dW5pdGllcyIsInNldE9wcG9ydHVuaXRpZXMiLCJ0b3RhbCIsInNldFRvdGFsIiwicGFnZSIsInNldFBhZ2UiLCJoYXNNb3JlIiwic2V0SGFzTW9yZSIsInN0YXR1c0ZpbHRlciIsInNldFN0YXR1c0ZpbHRlciIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInNlYXJjaFF1ZXJ5Iiwic2V0U2VhcmNoUXVlcnkiLCJkZWJvdW5jZWRTZWFyY2giLCJzZXREZWJvdW5jZWRTZWFyY2giLCJzZWFyY2hJbnB1dFJlZiIsImZpbHRlcnMiLCJzZXRGaWx0ZXJzIiwiY29udHJpYnV0aW9uVHlwZXMiLCJ0aW1lRmlsdGVyIiwidGltZXIiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiZmlsdGVyZWRPcHBvcnR1bml0aWVzIiwidHJpbSIsInF1ZXJ5IiwidG9Mb3dlckNhc2UiLCJzZWFyY2hUZXJtcyIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsIm9wcCIsInNlYXJjaGFibGVUZXh0IiwidGl0bGUiLCJzdW1tYXJ5IiwiY2l0eSIsInN0YXRlIiwiY291bnRyeSIsIm9yZ2FuaXplck5hbWUiLCJjYXVzZVNsdWdzIiwiam9pbiIsImV2ZXJ5IiwidGVybSIsImluY2x1ZGVzIiwiZmlsdGVyZWRUb3RhbCIsImxlbmd0aCIsImhhc0FueUZpbHRlcnMiLCJ1cGRhdGVVcmwiLCJuZXdMb2NhdGlvbiIsIm5ld0lzVmlydHVhbCIsIm5ld0ZpbHRlcnMiLCJuZXdQYWdlIiwibmV3U3RhdHVzRmlsdGVyIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwic2V0IiwidG9TdHJpbmciLCJxdWVyeVN0cmluZyIsIm5ld1VybCIsInB1c2giLCJzY3JvbGwiLCJmZXRjaE9wcG9ydHVuaXRpZXMiLCJkYXRlUmFuZ2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwidXNlckF0dHJpYnV0ZXMiLCJPYmplY3QiLCJrZXlzIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJjdXJyZW50IiwiaGFuZGxlTG9jYXRpb25TZWxlY3QiLCJsb2NhdGlvblNsdWciLCJ2aXJ0dWFsIiwiaGFuZGxlRmlsdGVyc0NoYW5nZSIsImhhbmRsZVN0YXR1c0ZpbHRlckNoYW5nZSIsImhhbmRsZVBhZ2VDaGFuZ2UiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsInRvcCIsImJlaGF2aW9yIiwiaGFuZGxlQ2xlYXJGaWx0ZXJzIiwiY2xlYXJlZEZpbHRlcnMiLCJoYW5kbGVTZWFyY2hDaGFuZ2UiLCJlIiwidGFyZ2V0IiwidmFsdWUiLCJoYW5kbGVTZWFyY2hDbGVhciIsImZvY3VzIiwiZ2V0UGFnZVRpdGxlIiwibG9jYXRpb25OYW1lIiwiZmluZCIsImwiLCJzbHVnIiwibmFtZSIsImdldFNlbGVjdGVkTG9jYXRpb25OYW1lIiwibG9jYXRpb24iLCJnZXRTdWJ0aXRsZSIsInN1YnRpdGxlX2FsbCIsImFjdGl2ZUZpbHRlckNvdW50IiwicmVkdWNlIiwiYSIsImIiLCJkaXYiLCJjbGFzc05hbWUiLCJjb250YWluZXIiLCJoZWFkZXIiLCJoZWFkZXJDb250ZW50IiwiaDEiLCJwIiwic3VidGl0bGUiLCJidXR0b24iLCJ0eXBlIiwiY2xlYXJGaWx0ZXJzQnV0dG9uIiwib25DbGljayIsInN2ZyIsIndpZHRoIiwiaGVpZ2h0Iiwidmlld0JveCIsImZpbGwiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsImFyaWEtaGlkZGVuIiwicGF0aCIsImQiLCJjbGVhcl9maWx0ZXJzX3RleHQiLCJzZWFyY2hTZWN0aW9uIiwic2VhcmNoV3JhcHBlciIsInNlYXJjaEljb24iLCJ4bWxucyIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsImNpcmNsZSIsImN4IiwiY3kiLCJyIiwiaW5wdXQiLCJyZWYiLCJzZWFyY2hJbnB1dCIsInBsYWNlaG9sZGVyIiwic2VhcmNoX3BsYWNlaG9sZGVyIiwib25DaGFuZ2UiLCJhcmlhLWxhYmVsIiwic2VhcmNoQ2xlYXIiLCJzZWFyY2hSZXN1bHRzIiwiYXNpZGUiLCJzaWRlYmFyIiwibG9jYXRpb25TZWN0aW9uIiwib25Mb2NhdGlvbkNoYW5nZSIsIm90aGVyRmlsdGVycyIsImgyIiwic2lkZWJhclRpdGxlIiwiZmlsdGVyc190aXRsZSIsIm9uRmlsdGVyc0NoYW5nZSIsImxheW91dCIsIm1haW4iLCJvblN0YXR1c0ZpbHRlckNoYW5nZSIsIm9uUGFnZUNoYW5nZSIsIm9uQ2xlYXJGaWx0ZXJzIiwic2hvd0FsbE1lc3NhZ2UiLCJzZWxlY3RlZExvY2F0aW9uTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/opportunities/OpportunitiesPageClient.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/contentstack/config.ts":
/*!****************************************!*\
  !*** ./src/lib/contentstack/config.ts ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContentTypes: function() { return /* binding */ ContentTypes; },\n/* harmony export */   getApiBaseUrl: function() { return /* binding */ getApiBaseUrl; },\n/* harmony export */   getContentstackConfig: function() { return /* binding */ getContentstackConfig; }\n/* harmony export */ });\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/**\n * Contentstack Configuration\n * Reads environment variables and provides typed configuration\n */ /**\n * Get the base URL for Contentstack API based on region\n */ function getBaseUrl(region) {\n    const regionUrls = {\n        \"na\": \"https://cdn.contentstack.io\",\n        \"eu\": \"https://eu-cdn.contentstack.io\",\n        \"azure-na\": \"https://azure-na-cdn.contentstack.io\",\n        \"azure-eu\": \"https://azure-eu-cdn.contentstack.io\"\n    };\n    return regionUrls[region];\n}\n/**\n * Validate and retrieve Contentstack configuration from environment\n */ function getContentstackConfig() {\n    const apiKey = process.env.CONTENTSTACK_API_KEY;\n    const deliveryToken = process.env.CONTENTSTACK_DELIVERY_TOKEN;\n    const environment = process.env.CONTENTSTACK_ENVIRONMENT;\n    const region = process.env.CONTENTSTACK_REGION || \"na\";\n    const branch = process.env.CONTENTSTACK_BRANCH;\n    if (!apiKey) {\n        throw new Error(\"CONTENTSTACK_API_KEY environment variable is required\");\n    }\n    if (!deliveryToken) {\n        throw new Error(\"CONTENTSTACK_DELIVERY_TOKEN environment variable is required\");\n    }\n    if (!environment) {\n        throw new Error(\"CONTENTSTACK_ENVIRONMENT environment variable is required\");\n    }\n    return {\n        apiKey,\n        deliveryToken,\n        environment,\n        region,\n        branch\n    };\n}\n/**\n * Get the full API base URL for the configured region\n */ function getApiBaseUrl() {\n    const config = getContentstackConfig();\n    return getBaseUrl(config.region);\n}\n/**\n * Content type UIDs in Contentstack\n * These should match your Contentstack content type definitions\n */ const ContentTypes = {\n    OPPORTUNITY: \"opportunity\",\n    ORGANIZER: \"organizer\",\n    CAUSE: \"cause\",\n    LOCATION: \"location\"\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY29udGVudHN0YWNrL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7OztDQUdDLEdBWUQ7O0NBRUMsR0FDRCxTQUFTQSxXQUFXQyxNQUEwQjtJQUM1QyxNQUFNQyxhQUFpRDtRQUNyRCxNQUFNO1FBQ04sTUFBTTtRQUNOLFlBQVk7UUFDWixZQUFZO0lBQ2Q7SUFDQSxPQUFPQSxVQUFVLENBQUNELE9BQU87QUFDM0I7QUFFQTs7Q0FFQyxHQUNNLFNBQVNFO0lBQ2QsTUFBTUMsU0FBU0MsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxvQkFBb0I7SUFDL0MsTUFBTUMsZ0JBQWdCSCxPQUFPQSxDQUFDQyxHQUFHLENBQUNHLDJCQUEyQjtJQUM3RCxNQUFNQyxjQUFjTCxPQUFPQSxDQUFDQyxHQUFHLENBQUNLLHdCQUF3QjtJQUN4RCxNQUFNVixTQUFVSSxPQUFPQSxDQUFDQyxHQUFHLENBQUNNLG1CQUFtQixJQUFJO0lBQ25ELE1BQU1DLFNBQVNSLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ1EsbUJBQW1CO0lBRTlDLElBQUksQ0FBQ1YsUUFBUTtRQUNYLE1BQU0sSUFBSVcsTUFBTTtJQUNsQjtJQUVBLElBQUksQ0FBQ1AsZUFBZTtRQUNsQixNQUFNLElBQUlPLE1BQU07SUFDbEI7SUFFQSxJQUFJLENBQUNMLGFBQWE7UUFDaEIsTUFBTSxJQUFJSyxNQUFNO0lBQ2xCO0lBRUEsT0FBTztRQUNMWDtRQUNBSTtRQUNBRTtRQUNBVDtRQUNBWTtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNHO0lBQ2QsTUFBTUMsU0FBU2Q7SUFDZixPQUFPSCxXQUFXaUIsT0FBT2hCLE1BQU07QUFDakM7QUFFQTs7O0NBR0MsR0FDTSxNQUFNaUIsZUFBZTtJQUMxQkMsYUFBYTtJQUNiQyxXQUFXO0lBQ1hDLE9BQU87SUFDUEMsVUFBVTtBQUNaLEVBQVciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9jb250ZW50c3RhY2svY29uZmlnLnRzPzUzOGEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb250ZW50c3RhY2sgQ29uZmlndXJhdGlvblxuICogUmVhZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFuZCBwcm92aWRlcyB0eXBlZCBjb25maWd1cmF0aW9uXG4gKi9cblxuZXhwb3J0IHR5cGUgQ29udGVudHN0YWNrUmVnaW9uID0gJ25hJyB8ICdldScgfCAnYXp1cmUtbmEnIHwgJ2F6dXJlLWV1JztcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50c3RhY2tDb25maWcge1xuICBhcGlLZXk6IHN0cmluZztcbiAgZGVsaXZlcnlUb2tlbjogc3RyaW5nO1xuICBlbnZpcm9ubWVudDogc3RyaW5nO1xuICByZWdpb246IENvbnRlbnRzdGFja1JlZ2lvbjtcbiAgYnJhbmNoPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYmFzZSBVUkwgZm9yIENvbnRlbnRzdGFjayBBUEkgYmFzZWQgb24gcmVnaW9uXG4gKi9cbmZ1bmN0aW9uIGdldEJhc2VVcmwocmVnaW9uOiBDb250ZW50c3RhY2tSZWdpb24pOiBzdHJpbmcge1xuICBjb25zdCByZWdpb25VcmxzOiBSZWNvcmQ8Q29udGVudHN0YWNrUmVnaW9uLCBzdHJpbmc+ID0ge1xuICAgICduYSc6ICdodHRwczovL2Nkbi5jb250ZW50c3RhY2suaW8nLFxuICAgICdldSc6ICdodHRwczovL2V1LWNkbi5jb250ZW50c3RhY2suaW8nLFxuICAgICdhenVyZS1uYSc6ICdodHRwczovL2F6dXJlLW5hLWNkbi5jb250ZW50c3RhY2suaW8nLFxuICAgICdhenVyZS1ldSc6ICdodHRwczovL2F6dXJlLWV1LWNkbi5jb250ZW50c3RhY2suaW8nLFxuICB9O1xuICByZXR1cm4gcmVnaW9uVXJsc1tyZWdpb25dO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGFuZCByZXRyaWV2ZSBDb250ZW50c3RhY2sgY29uZmlndXJhdGlvbiBmcm9tIGVudmlyb25tZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50c3RhY2tDb25maWcoKTogQ29udGVudHN0YWNrQ29uZmlnIHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQ09OVEVOVFNUQUNLX0FQSV9LRVk7XG4gIGNvbnN0IGRlbGl2ZXJ5VG9rZW4gPSBwcm9jZXNzLmVudi5DT05URU5UU1RBQ0tfREVMSVZFUllfVE9LRU47XG4gIGNvbnN0IGVudmlyb25tZW50ID0gcHJvY2Vzcy5lbnYuQ09OVEVOVFNUQUNLX0VOVklST05NRU5UO1xuICBjb25zdCByZWdpb24gPSAocHJvY2Vzcy5lbnYuQ09OVEVOVFNUQUNLX1JFR0lPTiB8fCAnbmEnKSBhcyBDb250ZW50c3RhY2tSZWdpb247XG4gIGNvbnN0IGJyYW5jaCA9IHByb2Nlc3MuZW52LkNPTlRFTlRTVEFDS19CUkFOQ0g7XG5cbiAgaWYgKCFhcGlLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NPTlRFTlRTVEFDS19BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XG4gIH1cblxuICBpZiAoIWRlbGl2ZXJ5VG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NPTlRFTlRTVEFDS19ERUxJVkVSWV9UT0tFTiBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xuICB9XG5cbiAgaWYgKCFlbnZpcm9ubWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ09OVEVOVFNUQUNLX0VOVklST05NRU5UIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFwaUtleSxcbiAgICBkZWxpdmVyeVRva2VuLFxuICAgIGVudmlyb25tZW50LFxuICAgIHJlZ2lvbixcbiAgICBicmFuY2gsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IHRoZSBmdWxsIEFQSSBiYXNlIFVSTCBmb3IgdGhlIGNvbmZpZ3VyZWQgcmVnaW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcGlCYXNlVXJsKCk6IHN0cmluZyB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldENvbnRlbnRzdGFja0NvbmZpZygpO1xuICByZXR1cm4gZ2V0QmFzZVVybChjb25maWcucmVnaW9uKTtcbn1cblxuLyoqXG4gKiBDb250ZW50IHR5cGUgVUlEcyBpbiBDb250ZW50c3RhY2tcbiAqIFRoZXNlIHNob3VsZCBtYXRjaCB5b3VyIENvbnRlbnRzdGFjayBjb250ZW50IHR5cGUgZGVmaW5pdGlvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbnRlbnRUeXBlcyA9IHtcbiAgT1BQT1JUVU5JVFk6ICdvcHBvcnR1bml0eScsXG4gIE9SR0FOSVpFUjogJ29yZ2FuaXplcicsXG4gIENBVVNFOiAnY2F1c2UnLFxuICBMT0NBVElPTjogJ2xvY2F0aW9uJyxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRUeXBlVWlkID0gKHR5cGVvZiBDb250ZW50VHlwZXMpW2tleW9mIHR5cGVvZiBDb250ZW50VHlwZXNdO1xuIl0sIm5hbWVzIjpbImdldEJhc2VVcmwiLCJyZWdpb24iLCJyZWdpb25VcmxzIiwiZ2V0Q29udGVudHN0YWNrQ29uZmlnIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkNPTlRFTlRTVEFDS19BUElfS0VZIiwiZGVsaXZlcnlUb2tlbiIsIkNPTlRFTlRTVEFDS19ERUxJVkVSWV9UT0tFTiIsImVudmlyb25tZW50IiwiQ09OVEVOVFNUQUNLX0VOVklST05NRU5UIiwiQ09OVEVOVFNUQUNLX1JFR0lPTiIsImJyYW5jaCIsIkNPTlRFTlRTVEFDS19CUkFOQ0giLCJFcnJvciIsImdldEFwaUJhc2VVcmwiLCJjb25maWciLCJDb250ZW50VHlwZXMiLCJPUFBPUlRVTklUWSIsIk9SR0FOSVpFUiIsIkNBVVNFIiwiTE9DQVRJT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/contentstack/config.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/contentstack/personalize.ts":
/*!*********************************************!*\
  !*** ./src/lib/contentstack/personalize.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPersonalizedContent: function() { return /* binding */ getPersonalizedContent; },\n/* harmony export */   getUserAttributesFromClient: function() { return /* binding */ getUserAttributesFromClient; },\n/* harmony export */   getUserAttributesFromRegistrations: function() { return /* binding */ getUserAttributesFromRegistrations; },\n/* harmony export */   personalizeOpportunityOrder: function() { return /* binding */ personalizeOpportunityOrder; },\n/* harmony export */   storeUserAttributes: function() { return /* binding */ storeUserAttributes; }\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(app-pages-browser)/./src/lib/contentstack/config.ts\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/**\n * Contentstack Personalize Integration\n * \n * Provides utilities for fetching personalized content based on user attributes\n * \n * Setup:\n * 1. Enable Personalize in your Contentstack stack\n * 2. Add CONTENTSTACK_PERSONALIZE_API_KEY to .env.local\n * 3. Create user segments in Contentstack Personalize\n * 4. Add Personalize fields to your content types\n */ \n/**\n * Get personalized content from Contentstack\n * \n * @param contentTypeUid - Content type UID (e.g., 'landing_page')\n * @param userAttributes - User attributes for personalization\n * @param options - Additional options\n * @returns Personalized content entry\n */ async function getPersonalizedContent(contentTypeUid, userAttributes) {\n    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n    const config = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getContentstackConfig)();\n    const baseUrl = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getApiBaseUrl)();\n    const environment = options.environment || config.environment;\n    const locale = options.locale || \"en-us\";\n    // Build Personalize API URL\n    const personalizeApiKey = process.env.CONTENTSTACK_PERSONALIZE_API_KEY;\n    if (!personalizeApiKey) {\n        console.warn(\"CONTENTSTACK_PERSONALIZE_API_KEY not set. Returning default content.\");\n        // Fallback to regular content fetch\n        return getDefaultContent(contentTypeUid, options.entryUid, environment, locale);\n    }\n    const endpoint = options.entryUid ? \"/content_types/\".concat(contentTypeUid, \"/entries/\").concat(options.entryUid) : \"/content_types/\".concat(contentTypeUid, \"/entries\");\n    const url = \"\".concat(baseUrl, \"/v3\").concat(endpoint, \"?environment=\").concat(environment, \"&locale=\").concat(locale);\n    // Build headers with Personalize API key\n    const headers = {\n        \"api_key\": config.apiKey,\n        \"access_token\": config.deliveryToken,\n        \"personalization_api_key\": personalizeApiKey,\n        \"Content-Type\": \"application/json\"\n    };\n    // Add user attributes as query parameters or headers\n    // Contentstack Personalize accepts user attributes in the request\n    const searchParams = new URLSearchParams();\n    if (userAttributes) {\n        // Add user attributes as query parameters\n        Object.entries(userAttributes).forEach((param)=>{\n            let [key, value] = param;\n            if (value !== undefined) {\n                if (Array.isArray(value)) {\n                    value.forEach((v)=>searchParams.append(\"user_attributes[\".concat(key, \"][]\"), String(v)));\n                } else {\n                    searchParams.append(\"user_attributes[\".concat(key, \"]\"), String(value));\n                }\n            }\n        });\n    }\n    const fullUrl = searchParams.toString() ? \"\".concat(url, \"&\").concat(searchParams.toString()) : url;\n    try {\n        var _data_entries;\n        const response = await fetch(fullUrl, {\n            headers,\n            next: {\n                revalidate: 60\n            }\n        });\n        if (!response.ok) {\n            console.warn(\"Personalize API error: \".concat(response.status, \". Falling back to default content.\"));\n            return getDefaultContent(contentTypeUid, options.entryUid, environment, locale);\n        }\n        const data = await response.json();\n        return (options.entryUid ? data.entry : (_data_entries = data.entries) === null || _data_entries === void 0 ? void 0 : _data_entries[0]) || data;\n    } catch (error) {\n        console.error(\"Error fetching personalized content:\", error);\n        // Fallback to default content\n        return getDefaultContent(contentTypeUid, options.entryUid, environment, locale);\n    }\n}\n/**\n * Fallback: Get default (non-personalized) content\n */ async function getDefaultContent(contentTypeUid, entryUid, environment, locale) {\n    var _data_entries;\n    const config = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getContentstackConfig)();\n    const baseUrl = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getApiBaseUrl)();\n    const endpoint = entryUid ? \"/content_types/\".concat(contentTypeUid, \"/entries/\").concat(entryUid) : \"/content_types/\".concat(contentTypeUid, \"/entries\");\n    const url = \"\".concat(baseUrl, \"/v3\").concat(endpoint, \"?environment=\").concat(environment, \"&locale=\").concat(locale);\n    const response = await fetch(url, {\n        headers: {\n            \"api_key\": config.apiKey,\n            \"access_token\": config.deliveryToken\n        },\n        next: {\n            revalidate: 60\n        }\n    });\n    if (!response.ok) {\n        throw new Error(\"Failed to fetch default content: \".concat(response.status));\n    }\n    const data = await response.json();\n    return (entryUid ? data.entry : (_data_entries = data.entries) === null || _data_entries === void 0 ? void 0 : _data_entries[0]) || data;\n}\n/**\n * Get user attributes from client-side storage (localStorage, cookies, etc.)\n * This is a helper function for client components\n */ function getUserAttributesFromClient() {\n    if (false) {}\n    const attributes = {};\n    // Get from localStorage\n    const storedCity = localStorage.getItem(\"userCity\");\n    const storedInterests = localStorage.getItem(\"userInterests\");\n    const storedUserType = localStorage.getItem(\"userType\");\n    if (storedCity) attributes.city = storedCity;\n    if (storedInterests) {\n        try {\n            attributes.interests = JSON.parse(storedInterests);\n        } catch (e) {\n        // Ignore parse errors\n        }\n    }\n    if (storedUserType) {\n        attributes.userType = storedUserType;\n    }\n    // Get from cookies (if using a cookie library)\n    // You can add cookie parsing here if needed\n    return attributes;\n}\n/**\n * Store user attributes in client-side storage\n */ function storeUserAttributes(attributes) {\n    if (false) {}\n    if (attributes.city) {\n        localStorage.setItem(\"userCity\", attributes.city);\n    }\n    if (attributes.interests) {\n        localStorage.setItem(\"userInterests\", JSON.stringify(attributes.interests));\n    }\n    if (attributes.userType) {\n        localStorage.setItem(\"userType\", attributes.userType);\n    }\n}\n/**\n * Extract user attributes from registrations stored in localStorage\n * Gets location and preferred causes from user's registration history\n */ function getUserAttributesFromRegistrations() {\n    if (false) {}\n    try {\n        // Import dynamically to avoid SSR issues\n        const { getRegistrations } = __webpack_require__(/*! @/lib/user/storage */ \"(app-pages-browser)/./src/lib/user/storage.ts\");\n        const registrations = getRegistrations();\n        if (registrations.length === 0) {\n            return {};\n        }\n        const attributes = {};\n        // Extract location from registrations\n        // Get the most common location from registrations\n        const locations = registrations.map((r)=>r.opportunityLocation).filter(Boolean);\n        if (locations.length > 0) {\n            // Parse location string (format: \"City, State, Country\" or \"Virtual / Online\")\n            const mostCommonLocation = locations[0];\n            if (mostCommonLocation !== \"Virtual / Online\") {\n                const parts = mostCommonLocation.split(\",\").map((p)=>p.trim());\n                if (parts.length >= 1) attributes.city = parts[0];\n                if (parts.length >= 2) attributes.state = parts[1];\n                if (parts.length >= 3) attributes.country = parts[2];\n            }\n        }\n        // Extract preferred causes from opportunity titles/slugs\n        // We'll need to fetch opportunity details to get cause slugs\n        // For now, we'll store opportunity slugs and let the API handle cause extraction\n        const opportunitySlugs = registrations.map((r)=>r.opportunitySlug);\n        if (opportunitySlugs.length > 0) {\n            attributes.preferredCauses = opportunitySlugs;\n        }\n        // Set user type based on registration count\n        if (registrations.length >= 5) {\n            attributes.userType = \"active\";\n        } else if (registrations.length >= 1) {\n            attributes.userType = \"returning\";\n        }\n        attributes.registrationCount = registrations.length;\n        return attributes;\n    } catch (error) {\n        console.error(\"Error extracting user attributes from registrations:\", error);\n        return {};\n    }\n}\n/**\n * Get personalized opportunity ordering using Contentstack Personalize API\n * \n * Priority:\n * 1. Location match (city, state, country)\n * 2. Cause match (causes user has registered for)\n * 3. Default order (date ascending)\n * \n * @param opportunities - List of opportunities to personalize\n * @param userAttributes - User attributes for personalization\n * @returns Personalized and sorted opportunities\n */ async function personalizeOpportunityOrder(opportunities, userAttributes) {\n    if (!userAttributes || Object.keys(userAttributes).length === 0 || opportunities.length === 0) {\n        return opportunities;\n    }\n    const personalizeApiKey = process.env.CONTENTSTACK_PERSONALIZE_API_KEY;\n    // If Personalize API is not configured, use client-side scoring\n    if (!personalizeApiKey) {\n        return scoreAndSortOpportunities(opportunities, userAttributes);\n    }\n    try {\n        // Use Contentstack Personalize API to get personalized ordering\n        // The API will return opportunities in personalized order based on user attributes\n        const config = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getContentstackConfig)();\n        const baseUrl = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getApiBaseUrl)();\n        const environment = config.environment;\n        // Build Personalize API request\n        // Contentstack Personalize can return personalized entry lists\n        const opportunityUids = opportunities.map((opp)=>opp.uid);\n        const searchParams = new URLSearchParams();\n        searchParams.set(\"environment\", environment);\n        searchParams.set(\"locale\", \"en-us\");\n        searchParams.set(\"query\", JSON.stringify({\n            uid: {\n                $in: opportunityUids\n            }\n        }));\n        // Add user attributes for personalization\n        Object.entries(userAttributes).forEach((param)=>{\n            let [key, value] = param;\n            if (value !== undefined) {\n                if (Array.isArray(value)) {\n                    value.forEach((v)=>searchParams.append(\"user_attributes[\".concat(key, \"][]\"), String(v)));\n                } else {\n                    searchParams.append(\"user_attributes[\".concat(key, \"]\"), String(value));\n                }\n            }\n        });\n        const url = \"\".concat(baseUrl, \"/v3/content_types/opportunity/entries?\").concat(searchParams.toString());\n        const headers = {\n            \"api_key\": config.apiKey,\n            \"access_token\": config.deliveryToken,\n            \"personalization_api_key\": personalizeApiKey,\n            \"Content-Type\": \"application/json\"\n        };\n        const response = await fetch(url, {\n            headers,\n            next: {\n                revalidate: 60\n            }\n        });\n        if (response.ok) {\n            const data = await response.json();\n            const personalizedEntries = data.entries || [];\n            const personalizedUids = personalizedEntries.map((entry)=>entry.uid);\n            // Reorder opportunities based on Personalize API response\n            const opportunityMap = new Map(opportunities.map((opp)=>[\n                    opp.uid,\n                    opp\n                ]));\n            const personalizedOrder = [];\n            const remaining = [];\n            // Add opportunities in personalized order\n            personalizedUids.forEach((uid)=>{\n                const opp = opportunityMap.get(uid);\n                if (opp) {\n                    personalizedOrder.push(opp);\n                    opportunityMap.delete(uid);\n                }\n            });\n            // Add remaining opportunities (not in personalized response)\n            opportunityMap.forEach((opp)=>remaining.push(opp));\n            // Sort remaining by date\n            remaining.sort((a, b)=>new Date(a.startDate).getTime() - new Date(b.startDate).getTime());\n            return [\n                ...personalizedOrder,\n                ...remaining\n            ];\n        } else {\n            // Fallback to client-side scoring if API fails\n            console.warn(\"Personalize API request failed, using client-side scoring\");\n            return scoreAndSortOpportunities(opportunities, userAttributes);\n        }\n    } catch (error) {\n        console.error(\"Error fetching personalized ordering:\", error);\n        // Fallback to client-side scoring\n        return scoreAndSortOpportunities(opportunities, userAttributes);\n    }\n}\n/**\n * Client-side scoring fallback when Personalize API is not available\n * Scores opportunities based on location and cause matches\n */ function scoreAndSortOpportunities(opportunities, userAttributes) {\n    var _userAttributes_city, _userAttributes_state, _userAttributes_country;\n    const userCity = (_userAttributes_city = userAttributes.city) === null || _userAttributes_city === void 0 ? void 0 : _userAttributes_city.toLowerCase();\n    const userState = (_userAttributes_state = userAttributes.state) === null || _userAttributes_state === void 0 ? void 0 : _userAttributes_state.toLowerCase();\n    const userCountry = (_userAttributes_country = userAttributes.country) === null || _userAttributes_country === void 0 ? void 0 : _userAttributes_country.toLowerCase();\n    const userPreferredCauses = (userAttributes.preferredCauses || userAttributes.interests || []).map((c)=>c.toLowerCase());\n    // Score each opportunity based on relevance\n    const scoredOpportunities = opportunities.map((opp)=>{\n        var _opp_city, _opp_state, _opp_country;\n        let score = 0;\n        // Location scoring (higher priority)\n        if (userCity && ((_opp_city = opp.city) === null || _opp_city === void 0 ? void 0 : _opp_city.toLowerCase()) === userCity) {\n            score += 100; // Exact city match\n        } else if (userState && ((_opp_state = opp.state) === null || _opp_state === void 0 ? void 0 : _opp_state.toLowerCase()) === userState) {\n            score += 50; // State match\n        } else if (userCountry && ((_opp_country = opp.country) === null || _opp_country === void 0 ? void 0 : _opp_country.toLowerCase()) === userCountry) {\n            score += 25; // Country match\n        }\n        // Cause scoring (secondary priority)\n        if (opp.causeSlugs && opp.causeSlugs.length > 0 && userPreferredCauses.length > 0) {\n            const matchingCauses = opp.causeSlugs.filter((causeSlug)=>userPreferredCauses.some((pref)=>causeSlug.toLowerCase().includes(pref) || pref.includes(causeSlug.toLowerCase())));\n            score += matchingCauses.length * 10; // 10 points per matching cause\n        }\n        return {\n            opportunity: opp,\n            score\n        };\n    });\n    // Sort by score (descending), then by date (ascending)\n    scoredOpportunities.sort((a, b)=>{\n        if (b.score !== a.score) {\n            return b.score - a.score; // Higher score first\n        }\n        // If scores are equal, sort by date (earlier dates first)\n        return new Date(a.opportunity.startDate).getTime() - new Date(b.opportunity.startDate).getTime();\n    });\n    return scoredOpportunities.map((item)=>item.opportunity);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY29udGVudHN0YWNrL3BlcnNvbmFsaXplLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7OztDQVVDLEdBRStEO0FBdUNoRTs7Ozs7OztDQU9DLEdBQ00sZUFBZUUsdUJBQ3BCQyxjQUFzQixFQUN0QkMsY0FBK0I7UUFDL0JDLFVBQUFBLGlFQUF5RSxDQUFDO0lBRTFFLE1BQU1DLFNBQVNOLDhEQUFxQkE7SUFDcEMsTUFBTU8sVUFBVU4sc0RBQWFBO0lBQzdCLE1BQU1PLGNBQWNILFFBQVFHLFdBQVcsSUFBSUYsT0FBT0UsV0FBVztJQUM3RCxNQUFNQyxTQUFTSixRQUFRSSxNQUFNLElBQUk7SUFFakMsNEJBQTRCO0lBQzVCLE1BQU1DLG9CQUFvQkMsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxnQ0FBZ0M7SUFFdEUsSUFBSSxDQUFDSCxtQkFBbUI7UUFDdEJJLFFBQVFDLElBQUksQ0FBQztRQUNiLG9DQUFvQztRQUNwQyxPQUFPQyxrQkFBcUJiLGdCQUFnQkUsUUFBUVksUUFBUSxFQUFFVCxhQUFhQztJQUM3RTtJQUVBLE1BQU1TLFdBQVdiLFFBQVFZLFFBQVEsR0FDN0Isa0JBQTRDWixPQUExQkYsZ0JBQWUsYUFBNEIsT0FBakJFLFFBQVFZLFFBQVEsSUFDNUQsa0JBQWlDLE9BQWZkLGdCQUFlO0lBRXJDLE1BQU1nQixNQUFNLEdBQWdCRCxPQUFiWCxTQUFRLE9BQTZCQyxPQUF4QlUsVUFBUyxpQkFBcUNULE9BQXRCRCxhQUFZLFlBQWlCLE9BQVBDO0lBRTFFLHlDQUF5QztJQUN6QyxNQUFNVyxVQUF1QjtRQUMzQixXQUFXZCxPQUFPZSxNQUFNO1FBQ3hCLGdCQUFnQmYsT0FBT2dCLGFBQWE7UUFDcEMsMkJBQTJCWjtRQUMzQixnQkFBZ0I7SUFDbEI7SUFFQSxxREFBcUQ7SUFDckQsa0VBQWtFO0lBQ2xFLE1BQU1hLGVBQWUsSUFBSUM7SUFFekIsSUFBSXBCLGdCQUFnQjtRQUNsQiwwQ0FB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YW9CLFdBQVcsUUFBT0UsYUFBYTtZQUNwRUksU0FBUyxJQUFJLGdCQUFnQjtRQUMvQjtRQUVBLHFDQUFxQztRQUNyQyxJQUFJMUIsSUFBSTJCLFVBQVUsSUFBSTNCLElBQUkyQixVQUFVLENBQUNsRCxNQUFNLEdBQUcsS0FBSzhDLG9CQUFvQjlDLE1BQU0sR0FBRyxHQUFHO1lBQ2pGLE1BQU1tRCxpQkFBaUI1QixJQUFJMkIsVUFBVSxDQUFDN0MsTUFBTSxDQUFDK0MsQ0FBQUEsWUFDM0NOLG9CQUFvQk8sSUFBSSxDQUFDQyxDQUFBQSxPQUN2QkYsVUFBVVQsV0FBVyxHQUFHWSxRQUFRLENBQUNELFNBQ2pDQSxLQUFLQyxRQUFRLENBQUNILFVBQVVULFdBQVc7WUFHdkNNLFNBQVNFLGVBQWVuRCxNQUFNLEdBQUcsSUFBSSwrQkFBK0I7UUFDdEU7UUFFQSxPQUFPO1lBQUV3RCxhQUFhakM7WUFBSzBCO1FBQU07SUFDbkM7SUFFQSx1REFBdUQ7SUFDdkRELG9CQUFvQlosSUFBSSxDQUFDLENBQUNDLEdBQUdDO1FBQzNCLElBQUlBLEVBQUVXLEtBQUssS0FBS1osRUFBRVksS0FBSyxFQUFFO1lBQ3ZCLE9BQU9YLEVBQUVXLEtBQUssR0FBR1osRUFBRVksS0FBSyxFQUFFLHFCQUFxQjtRQUNqRDtRQUNBLDBEQUEwRDtRQUMxRCxPQUFPLElBQUlWLEtBQUtGLEVBQUVtQixXQUFXLENBQUNoQixTQUFTLEVBQUVDLE9BQU8sS0FDekMsSUFBSUYsS0FBS0QsRUFBRWtCLFdBQVcsQ0FBQ2hCLFNBQVMsRUFBRUMsT0FBTztJQUNsRDtJQUVBLE9BQU9PLG9CQUFvQjlDLEdBQUcsQ0FBQ3VELENBQUFBLE9BQVFBLEtBQUtELFdBQVc7QUFDekQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9jb250ZW50c3RhY2svcGVyc29uYWxpemUudHM/ZmM0YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnRlbnRzdGFjayBQZXJzb25hbGl6ZSBJbnRlZ3JhdGlvblxuICogXG4gKiBQcm92aWRlcyB1dGlsaXRpZXMgZm9yIGZldGNoaW5nIHBlcnNvbmFsaXplZCBjb250ZW50IGJhc2VkIG9uIHVzZXIgYXR0cmlidXRlc1xuICogXG4gKiBTZXR1cDpcbiAqIDEuIEVuYWJsZSBQZXJzb25hbGl6ZSBpbiB5b3VyIENvbnRlbnRzdGFjayBzdGFja1xuICogMi4gQWRkIENPTlRFTlRTVEFDS19QRVJTT05BTElaRV9BUElfS0VZIHRvIC5lbnYubG9jYWxcbiAqIDMuIENyZWF0ZSB1c2VyIHNlZ21lbnRzIGluIENvbnRlbnRzdGFjayBQZXJzb25hbGl6ZVxuICogNC4gQWRkIFBlcnNvbmFsaXplIGZpZWxkcyB0byB5b3VyIGNvbnRlbnQgdHlwZXNcbiAqL1xuXG5pbXBvcnQgeyBnZXRDb250ZW50c3RhY2tDb25maWcsIGdldEFwaUJhc2VVcmwgfSBmcm9tICcuL2NvbmZpZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckF0dHJpYnV0ZXMge1xuICAvLyBMb2NhdGlvblxuICBjaXR5Pzogc3RyaW5nO1xuICBzdGF0ZT86IHN0cmluZztcbiAgY291bnRyeT86IHN0cmluZztcbiAgXG4gIC8vIEludGVyZXN0cyAmIFByZWZlcmVuY2VzXG4gIGludGVyZXN0cz86IHN0cmluZ1tdO1xuICBwcmVmZXJyZWRDYXVzZXM/OiBzdHJpbmdbXTtcbiAgY29udHJpYnV0aW9uVHlwZXM/OiBzdHJpbmdbXTtcbiAgXG4gIC8vIFVzZXIgQmVoYXZpb3JcbiAgdXNlclR5cGU/OiAnbmV3JyB8ICdyZXR1cm5pbmcnIHwgJ2FjdGl2ZSc7XG4gIHJlZ2lzdHJhdGlvbkNvdW50PzogbnVtYmVyO1xuICBsYXN0VmlzaXREYXRlPzogc3RyaW5nO1xuICBcbiAgLy8gRGVtb2dyYXBoaWNzIChvcHRpb25hbClcbiAgYWdlPzogbnVtYmVyO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgXG4gIC8vIEN1c3RvbSBhdHRyaWJ1dGVzXG4gIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcnNvbmFsaXplT3B0aW9ucyB7XG4gIC8qKiBVc2VyIGF0dHJpYnV0ZXMgZm9yIHBlcnNvbmFsaXphdGlvbiAqL1xuICB1c2VyQXR0cmlidXRlcz86IFVzZXJBdHRyaWJ1dGVzO1xuICAvKiogQ29udGVudCB0eXBlIFVJRCAqL1xuICBjb250ZW50VHlwZVVpZDogc3RyaW5nO1xuICAvKiogRW50cnkgVUlEIChvcHRpb25hbCwgZm9yIHNwZWNpZmljIGVudHJ5KSAqL1xuICBlbnRyeVVpZD86IHN0cmluZztcbiAgLyoqIEVudmlyb25tZW50IChkZWZhdWx0cyB0byBjb25maWd1cmVkIGVudmlyb25tZW50KSAqL1xuICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgLyoqIExvY2FsZSAoZGVmYXVsdHMgdG8gJ2VuLXVzJykgKi9cbiAgbG9jYWxlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldCBwZXJzb25hbGl6ZWQgY29udGVudCBmcm9tIENvbnRlbnRzdGFja1xuICogXG4gKiBAcGFyYW0gY29udGVudFR5cGVVaWQgLSBDb250ZW50IHR5cGUgVUlEIChlLmcuLCAnbGFuZGluZ19wYWdlJylcbiAqIEBwYXJhbSB1c2VyQXR0cmlidXRlcyAtIFVzZXIgYXR0cmlidXRlcyBmb3IgcGVyc29uYWxpemF0aW9uXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9uc1xuICogQHJldHVybnMgUGVyc29uYWxpemVkIGNvbnRlbnQgZW50cnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBlcnNvbmFsaXplZENvbnRlbnQ8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgY29udGVudFR5cGVVaWQ6IHN0cmluZyxcbiAgdXNlckF0dHJpYnV0ZXM/OiBVc2VyQXR0cmlidXRlcyxcbiAgb3B0aW9uczogT21pdDxQZXJzb25hbGl6ZU9wdGlvbnMsICdjb250ZW50VHlwZVVpZCcgfCAndXNlckF0dHJpYnV0ZXMnPiA9IHt9XG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29udGVudHN0YWNrQ29uZmlnKCk7XG4gIGNvbnN0IGJhc2VVcmwgPSBnZXRBcGlCYXNlVXJsKCk7XG4gIGNvbnN0IGVudmlyb25tZW50ID0gb3B0aW9ucy5lbnZpcm9ubWVudCB8fCBjb25maWcuZW52aXJvbm1lbnQ7XG4gIGNvbnN0IGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlIHx8ICdlbi11cyc7XG4gIFxuICAvLyBCdWlsZCBQZXJzb25hbGl6ZSBBUEkgVVJMXG4gIGNvbnN0IHBlcnNvbmFsaXplQXBpS2V5ID0gcHJvY2Vzcy5lbnYuQ09OVEVOVFNUQUNLX1BFUlNPTkFMSVpFX0FQSV9LRVk7XG4gIFxuICBpZiAoIXBlcnNvbmFsaXplQXBpS2V5KSB7XG4gICAgY29uc29sZS53YXJuKCdDT05URU5UU1RBQ0tfUEVSU09OQUxJWkVfQVBJX0tFWSBub3Qgc2V0LiBSZXR1cm5pbmcgZGVmYXVsdCBjb250ZW50LicpO1xuICAgIC8vIEZhbGxiYWNrIHRvIHJlZ3VsYXIgY29udGVudCBmZXRjaFxuICAgIHJldHVybiBnZXREZWZhdWx0Q29udGVudDxUPihjb250ZW50VHlwZVVpZCwgb3B0aW9ucy5lbnRyeVVpZCwgZW52aXJvbm1lbnQsIGxvY2FsZSk7XG4gIH1cbiAgXG4gIGNvbnN0IGVuZHBvaW50ID0gb3B0aW9ucy5lbnRyeVVpZFxuICAgID8gYC9jb250ZW50X3R5cGVzLyR7Y29udGVudFR5cGVVaWR9L2VudHJpZXMvJHtvcHRpb25zLmVudHJ5VWlkfWBcbiAgICA6IGAvY29udGVudF90eXBlcy8ke2NvbnRlbnRUeXBlVWlkfS9lbnRyaWVzYDtcbiAgXG4gIGNvbnN0IHVybCA9IGAke2Jhc2VVcmx9L3YzJHtlbmRwb2ludH0/ZW52aXJvbm1lbnQ9JHtlbnZpcm9ubWVudH0mbG9jYWxlPSR7bG9jYWxlfWA7XG4gIFxuICAvLyBCdWlsZCBoZWFkZXJzIHdpdGggUGVyc29uYWxpemUgQVBJIGtleVxuICBjb25zdCBoZWFkZXJzOiBIZWFkZXJzSW5pdCA9IHtcbiAgICAnYXBpX2tleSc6IGNvbmZpZy5hcGlLZXksXG4gICAgJ2FjY2Vzc190b2tlbic6IGNvbmZpZy5kZWxpdmVyeVRva2VuLFxuICAgICdwZXJzb25hbGl6YXRpb25fYXBpX2tleSc6IHBlcnNvbmFsaXplQXBpS2V5LFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH07XG4gIFxuICAvLyBBZGQgdXNlciBhdHRyaWJ1dGVzIGFzIHF1ZXJ5IHBhcmFtZXRlcnMgb3IgaGVhZGVyc1xuICAvLyBDb250ZW50c3RhY2sgUGVyc29uYWxpemUgYWNjZXB0cyB1c2VyIGF0dHJpYnV0ZXMgaW4gdGhlIHJlcXVlc3RcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBcbiAgaWYgKHVzZXJBdHRyaWJ1dGVzKSB7XG4gICAgLy8gQWRkIHVzZXIgYXR0cmlidXRlcyBhcyBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgT2JqZWN0LmVudHJpZXModXNlckF0dHJpYnV0ZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUuZm9yRWFjaCh2ID0+IHNlYXJjaFBhcmFtcy5hcHBlbmQoYHVzZXJfYXR0cmlidXRlc1ske2tleX1dW11gLCBTdHJpbmcodikpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKGB1c2VyX2F0dHJpYnV0ZXNbJHtrZXl9XWAsIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIGNvbnN0IGZ1bGxVcmwgPSBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKSA/IGAke3VybH0mJHtzZWFyY2hQYXJhbXMudG9TdHJpbmcoKX1gIDogdXJsO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZ1bGxVcmwsIHtcbiAgICAgIGhlYWRlcnMsXG4gICAgICBuZXh0OiB7IHJldmFsaWRhdGU6IDYwIH0sIC8vIENhY2hlIGZvciA2MCBzZWNvbmRzXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc29sZS53YXJuKGBQZXJzb25hbGl6ZSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfS4gRmFsbGluZyBiYWNrIHRvIGRlZmF1bHQgY29udGVudC5gKTtcbiAgICAgIHJldHVybiBnZXREZWZhdWx0Q29udGVudDxUPihjb250ZW50VHlwZVVpZCwgb3B0aW9ucy5lbnRyeVVpZCwgZW52aXJvbm1lbnQsIGxvY2FsZSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIChvcHRpb25zLmVudHJ5VWlkID8gZGF0YS5lbnRyeSA6IGRhdGEuZW50cmllcz8uWzBdKSB8fCBkYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBlcnNvbmFsaXplZCBjb250ZW50OicsIGVycm9yKTtcbiAgICAvLyBGYWxsYmFjayB0byBkZWZhdWx0IGNvbnRlbnRcbiAgICByZXR1cm4gZ2V0RGVmYXVsdENvbnRlbnQ8VD4oY29udGVudFR5cGVVaWQsIG9wdGlvbnMuZW50cnlVaWQsIGVudmlyb25tZW50LCBsb2NhbGUpO1xuICB9XG59XG5cbi8qKlxuICogRmFsbGJhY2s6IEdldCBkZWZhdWx0IChub24tcGVyc29uYWxpemVkKSBjb250ZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldERlZmF1bHRDb250ZW50PFQ+KFxuICBjb250ZW50VHlwZVVpZDogc3RyaW5nLFxuICBlbnRyeVVpZDogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBlbnZpcm9ubWVudDogc3RyaW5nLFxuICBsb2NhbGU6IHN0cmluZ1xuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldENvbnRlbnRzdGFja0NvbmZpZygpO1xuICBjb25zdCBiYXNlVXJsID0gZ2V0QXBpQmFzZVVybCgpO1xuICBcbiAgY29uc3QgZW5kcG9pbnQgPSBlbnRyeVVpZFxuICAgID8gYC9jb250ZW50X3R5cGVzLyR7Y29udGVudFR5cGVVaWR9L2VudHJpZXMvJHtlbnRyeVVpZH1gXG4gICAgOiBgL2NvbnRlbnRfdHlwZXMvJHtjb250ZW50VHlwZVVpZH0vZW50cmllc2A7XG4gIFxuICBjb25zdCB1cmwgPSBgJHtiYXNlVXJsfS92MyR7ZW5kcG9pbnR9P2Vudmlyb25tZW50PSR7ZW52aXJvbm1lbnR9JmxvY2FsZT0ke2xvY2FsZX1gO1xuICBcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnYXBpX2tleSc6IGNvbmZpZy5hcGlLZXksXG4gICAgICAnYWNjZXNzX3Rva2VuJzogY29uZmlnLmRlbGl2ZXJ5VG9rZW4sXG4gICAgfSxcbiAgICBuZXh0OiB7IHJldmFsaWRhdGU6IDYwIH0sXG4gIH0pO1xuICBcbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGRlZmF1bHQgY29udGVudDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gIH1cbiAgXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIHJldHVybiAoZW50cnlVaWQgPyBkYXRhLmVudHJ5IDogZGF0YS5lbnRyaWVzPy5bMF0pIHx8IGRhdGE7XG59XG5cbi8qKlxuICogR2V0IHVzZXIgYXR0cmlidXRlcyBmcm9tIGNsaWVudC1zaWRlIHN0b3JhZ2UgKGxvY2FsU3RvcmFnZSwgY29va2llcywgZXRjLilcbiAqIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gZm9yIGNsaWVudCBjb21wb25lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyQXR0cmlidXRlc0Zyb21DbGllbnQoKTogVXNlckF0dHJpYnV0ZXMge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgXG4gIGNvbnN0IGF0dHJpYnV0ZXM6IFVzZXJBdHRyaWJ1dGVzID0ge307XG4gIFxuICAvLyBHZXQgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgY29uc3Qgc3RvcmVkQ2l0eSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyQ2l0eScpO1xuICBjb25zdCBzdG9yZWRJbnRlcmVzdHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckludGVyZXN0cycpO1xuICBjb25zdCBzdG9yZWRVc2VyVHlwZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyVHlwZScpO1xuICBcbiAgaWYgKHN0b3JlZENpdHkpIGF0dHJpYnV0ZXMuY2l0eSA9IHN0b3JlZENpdHk7XG4gIGlmIChzdG9yZWRJbnRlcmVzdHMpIHtcbiAgICB0cnkge1xuICAgICAgYXR0cmlidXRlcy5pbnRlcmVzdHMgPSBKU09OLnBhcnNlKHN0b3JlZEludGVyZXN0cyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBJZ25vcmUgcGFyc2UgZXJyb3JzXG4gICAgfVxuICB9XG4gIGlmIChzdG9yZWRVc2VyVHlwZSkge1xuICAgIGF0dHJpYnV0ZXMudXNlclR5cGUgPSBzdG9yZWRVc2VyVHlwZSBhcyAnbmV3JyB8ICdyZXR1cm5pbmcnIHwgJ2FjdGl2ZSc7XG4gIH1cbiAgXG4gIC8vIEdldCBmcm9tIGNvb2tpZXMgKGlmIHVzaW5nIGEgY29va2llIGxpYnJhcnkpXG4gIC8vIFlvdSBjYW4gYWRkIGNvb2tpZSBwYXJzaW5nIGhlcmUgaWYgbmVlZGVkXG4gIFxuICByZXR1cm4gYXR0cmlidXRlcztcbn1cblxuLyoqXG4gKiBTdG9yZSB1c2VyIGF0dHJpYnV0ZXMgaW4gY2xpZW50LXNpZGUgc3RvcmFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVVc2VyQXR0cmlidXRlcyhhdHRyaWJ1dGVzOiBQYXJ0aWFsPFVzZXJBdHRyaWJ1dGVzPik6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgXG4gIGlmIChhdHRyaWJ1dGVzLmNpdHkpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckNpdHknLCBhdHRyaWJ1dGVzLmNpdHkpO1xuICB9XG4gIFxuICBpZiAoYXR0cmlidXRlcy5pbnRlcmVzdHMpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckludGVyZXN0cycsIEpTT04uc3RyaW5naWZ5KGF0dHJpYnV0ZXMuaW50ZXJlc3RzKSk7XG4gIH1cbiAgXG4gIGlmIChhdHRyaWJ1dGVzLnVzZXJUeXBlKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJUeXBlJywgYXR0cmlidXRlcy51c2VyVHlwZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHVzZXIgYXR0cmlidXRlcyBmcm9tIHJlZ2lzdHJhdGlvbnMgc3RvcmVkIGluIGxvY2FsU3RvcmFnZVxuICogR2V0cyBsb2NhdGlvbiBhbmQgcHJlZmVycmVkIGNhdXNlcyBmcm9tIHVzZXIncyByZWdpc3RyYXRpb24gaGlzdG9yeVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckF0dHJpYnV0ZXNGcm9tUmVnaXN0cmF0aW9ucygpOiBVc2VyQXR0cmlidXRlcyB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gSW1wb3J0IGR5bmFtaWNhbGx5IHRvIGF2b2lkIFNTUiBpc3N1ZXNcbiAgICBjb25zdCB7IGdldFJlZ2lzdHJhdGlvbnMgfSA9IHJlcXVpcmUoJ0AvbGliL3VzZXIvc3RvcmFnZScpO1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnMgPSBnZXRSZWdpc3RyYXRpb25zKCk7XG5cbiAgICBpZiAocmVnaXN0cmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBhdHRyaWJ1dGVzOiBVc2VyQXR0cmlidXRlcyA9IHt9O1xuXG4gICAgLy8gRXh0cmFjdCBsb2NhdGlvbiBmcm9tIHJlZ2lzdHJhdGlvbnNcbiAgICAvLyBHZXQgdGhlIG1vc3QgY29tbW9uIGxvY2F0aW9uIGZyb20gcmVnaXN0cmF0aW9uc1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHJlZ2lzdHJhdGlvbnNcbiAgICAgIC5tYXAociA9PiByLm9wcG9ydHVuaXR5TG9jYXRpb24pXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIFxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gUGFyc2UgbG9jYXRpb24gc3RyaW5nIChmb3JtYXQ6IFwiQ2l0eSwgU3RhdGUsIENvdW50cnlcIiBvciBcIlZpcnR1YWwgLyBPbmxpbmVcIilcbiAgICAgIGNvbnN0IG1vc3RDb21tb25Mb2NhdGlvbiA9IGxvY2F0aW9uc1swXTtcbiAgICAgIFxuICAgICAgaWYgKG1vc3RDb21tb25Mb2NhdGlvbiAhPT0gJ1ZpcnR1YWwgLyBPbmxpbmUnKSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gbW9zdENvbW1vbkxvY2F0aW9uLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoID49IDEpIGF0dHJpYnV0ZXMuY2l0eSA9IHBhcnRzWzBdO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoID49IDIpIGF0dHJpYnV0ZXMuc3RhdGUgPSBwYXJ0c1sxXTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSBhdHRyaWJ1dGVzLmNvdW50cnkgPSBwYXJ0c1syXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IHByZWZlcnJlZCBjYXVzZXMgZnJvbSBvcHBvcnR1bml0eSB0aXRsZXMvc2x1Z3NcbiAgICAvLyBXZSdsbCBuZWVkIHRvIGZldGNoIG9wcG9ydHVuaXR5IGRldGFpbHMgdG8gZ2V0IGNhdXNlIHNsdWdzXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgc3RvcmUgb3Bwb3J0dW5pdHkgc2x1Z3MgYW5kIGxldCB0aGUgQVBJIGhhbmRsZSBjYXVzZSBleHRyYWN0aW9uXG4gICAgY29uc3Qgb3Bwb3J0dW5pdHlTbHVncyA9IHJlZ2lzdHJhdGlvbnMubWFwKHIgPT4gci5vcHBvcnR1bml0eVNsdWcpO1xuICAgIGlmIChvcHBvcnR1bml0eVNsdWdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF0dHJpYnV0ZXMucHJlZmVycmVkQ2F1c2VzID0gb3Bwb3J0dW5pdHlTbHVncztcbiAgICB9XG5cbiAgICAvLyBTZXQgdXNlciB0eXBlIGJhc2VkIG9uIHJlZ2lzdHJhdGlvbiBjb3VudFxuICAgIGlmIChyZWdpc3RyYXRpb25zLmxlbmd0aCA+PSA1KSB7XG4gICAgICBhdHRyaWJ1dGVzLnVzZXJUeXBlID0gJ2FjdGl2ZSc7XG4gICAgfSBlbHNlIGlmIChyZWdpc3RyYXRpb25zLmxlbmd0aCA+PSAxKSB7XG4gICAgICBhdHRyaWJ1dGVzLnVzZXJUeXBlID0gJ3JldHVybmluZyc7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlcy5yZWdpc3RyYXRpb25Db3VudCA9IHJlZ2lzdHJhdGlvbnMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyB1c2VyIGF0dHJpYnV0ZXMgZnJvbSByZWdpc3RyYXRpb25zOicsIGVycm9yKTtcbiAgICByZXR1cm4ge307XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgcGVyc29uYWxpemVkIG9wcG9ydHVuaXR5IG9yZGVyaW5nIHVzaW5nIENvbnRlbnRzdGFjayBQZXJzb25hbGl6ZSBBUElcbiAqIFxuICogUHJpb3JpdHk6XG4gKiAxLiBMb2NhdGlvbiBtYXRjaCAoY2l0eSwgc3RhdGUsIGNvdW50cnkpXG4gKiAyLiBDYXVzZSBtYXRjaCAoY2F1c2VzIHVzZXIgaGFzIHJlZ2lzdGVyZWQgZm9yKVxuICogMy4gRGVmYXVsdCBvcmRlciAoZGF0ZSBhc2NlbmRpbmcpXG4gKiBcbiAqIEBwYXJhbSBvcHBvcnR1bml0aWVzIC0gTGlzdCBvZiBvcHBvcnR1bml0aWVzIHRvIHBlcnNvbmFsaXplXG4gKiBAcGFyYW0gdXNlckF0dHJpYnV0ZXMgLSBVc2VyIGF0dHJpYnV0ZXMgZm9yIHBlcnNvbmFsaXphdGlvblxuICogQHJldHVybnMgUGVyc29uYWxpemVkIGFuZCBzb3J0ZWQgb3Bwb3J0dW5pdGllc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGVyc29uYWxpemVPcHBvcnR1bml0eU9yZGVyPFQgZXh0ZW5kcyB7XG4gIHVpZDogc3RyaW5nO1xuICBjaXR5Pzogc3RyaW5nO1xuICBzdGF0ZT86IHN0cmluZztcbiAgY291bnRyeT86IHN0cmluZztcbiAgY2F1c2VTbHVncz86IHN0cmluZ1tdO1xuICBzdGFydERhdGU6IHN0cmluZztcbn0+KFxuICBvcHBvcnR1bml0aWVzOiBUW10sXG4gIHVzZXJBdHRyaWJ1dGVzPzogVXNlckF0dHJpYnV0ZXNcbik6IFByb21pc2U8VFtdPiB7XG4gIGlmICghdXNlckF0dHJpYnV0ZXMgfHwgT2JqZWN0LmtleXModXNlckF0dHJpYnV0ZXMpLmxlbmd0aCA9PT0gMCB8fCBvcHBvcnR1bml0aWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBvcHBvcnR1bml0aWVzO1xuICB9XG5cbiAgY29uc3QgcGVyc29uYWxpemVBcGlLZXkgPSBwcm9jZXNzLmVudi5DT05URU5UU1RBQ0tfUEVSU09OQUxJWkVfQVBJX0tFWTtcbiAgXG4gIC8vIElmIFBlcnNvbmFsaXplIEFQSSBpcyBub3QgY29uZmlndXJlZCwgdXNlIGNsaWVudC1zaWRlIHNjb3JpbmdcbiAgaWYgKCFwZXJzb25hbGl6ZUFwaUtleSkge1xuICAgIHJldHVybiBzY29yZUFuZFNvcnRPcHBvcnR1bml0aWVzKG9wcG9ydHVuaXRpZXMsIHVzZXJBdHRyaWJ1dGVzKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gVXNlIENvbnRlbnRzdGFjayBQZXJzb25hbGl6ZSBBUEkgdG8gZ2V0IHBlcnNvbmFsaXplZCBvcmRlcmluZ1xuICAgIC8vIFRoZSBBUEkgd2lsbCByZXR1cm4gb3Bwb3J0dW5pdGllcyBpbiBwZXJzb25hbGl6ZWQgb3JkZXIgYmFzZWQgb24gdXNlciBhdHRyaWJ1dGVzXG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGVudHN0YWNrQ29uZmlnKCk7XG4gICAgY29uc3QgYmFzZVVybCA9IGdldEFwaUJhc2VVcmwoKTtcbiAgICBjb25zdCBlbnZpcm9ubWVudCA9IGNvbmZpZy5lbnZpcm9ubWVudDtcbiAgICBcbiAgICAvLyBCdWlsZCBQZXJzb25hbGl6ZSBBUEkgcmVxdWVzdFxuICAgIC8vIENvbnRlbnRzdGFjayBQZXJzb25hbGl6ZSBjYW4gcmV0dXJuIHBlcnNvbmFsaXplZCBlbnRyeSBsaXN0c1xuICAgIGNvbnN0IG9wcG9ydHVuaXR5VWlkcyA9IG9wcG9ydHVuaXRpZXMubWFwKG9wcCA9PiBvcHAudWlkKTtcbiAgICBcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgc2VhcmNoUGFyYW1zLnNldCgnZW52aXJvbm1lbnQnLCBlbnZpcm9ubWVudCk7XG4gICAgc2VhcmNoUGFyYW1zLnNldCgnbG9jYWxlJywgJ2VuLXVzJyk7XG4gICAgc2VhcmNoUGFyYW1zLnNldCgncXVlcnknLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICB1aWQ6IHsgJGluOiBvcHBvcnR1bml0eVVpZHMgfVxuICAgIH0pKTtcbiAgICBcbiAgICAvLyBBZGQgdXNlciBhdHRyaWJ1dGVzIGZvciBwZXJzb25hbGl6YXRpb25cbiAgICBPYmplY3QuZW50cmllcyh1c2VyQXR0cmlidXRlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZS5mb3JFYWNoKHYgPT4gc2VhcmNoUGFyYW1zLmFwcGVuZChgdXNlcl9hdHRyaWJ1dGVzWyR7a2V5fV1bXWAsIFN0cmluZyh2KSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoYHVzZXJfYXR0cmlidXRlc1ske2tleX1dYCwgU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCB1cmwgPSBgJHtiYXNlVXJsfS92My9jb250ZW50X3R5cGVzL29wcG9ydHVuaXR5L2VudHJpZXM/JHtzZWFyY2hQYXJhbXMudG9TdHJpbmcoKX1gO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlcnM6IEhlYWRlcnNJbml0ID0ge1xuICAgICAgJ2FwaV9rZXknOiBjb25maWcuYXBpS2V5LFxuICAgICAgJ2FjY2Vzc190b2tlbic6IGNvbmZpZy5kZWxpdmVyeVRva2VuLFxuICAgICAgJ3BlcnNvbmFsaXphdGlvbl9hcGlfa2V5JzogcGVyc29uYWxpemVBcGlLZXksXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH07XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIGhlYWRlcnMsXG4gICAgICBuZXh0OiB7IHJldmFsaWRhdGU6IDYwIH0sXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc3QgcGVyc29uYWxpemVkRW50cmllcyA9IGRhdGEuZW50cmllcyB8fCBbXTtcbiAgICAgIGNvbnN0IHBlcnNvbmFsaXplZFVpZHMgPSBwZXJzb25hbGl6ZWRFbnRyaWVzLm1hcCgoZW50cnk6IHsgdWlkOiBzdHJpbmcgfSkgPT4gZW50cnkudWlkKTtcbiAgICAgIFxuICAgICAgLy8gUmVvcmRlciBvcHBvcnR1bml0aWVzIGJhc2VkIG9uIFBlcnNvbmFsaXplIEFQSSByZXNwb25zZVxuICAgICAgY29uc3Qgb3Bwb3J0dW5pdHlNYXAgPSBuZXcgTWFwKG9wcG9ydHVuaXRpZXMubWFwKG9wcCA9PiBbb3BwLnVpZCwgb3BwXSkpO1xuICAgICAgY29uc3QgcGVyc29uYWxpemVkT3JkZXI6IFRbXSA9IFtdO1xuICAgICAgY29uc3QgcmVtYWluaW5nOiBUW10gPSBbXTtcbiAgICAgIFxuICAgICAgLy8gQWRkIG9wcG9ydHVuaXRpZXMgaW4gcGVyc29uYWxpemVkIG9yZGVyXG4gICAgICBwZXJzb25hbGl6ZWRVaWRzLmZvckVhY2goKHVpZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wcCA9IG9wcG9ydHVuaXR5TWFwLmdldCh1aWQpO1xuICAgICAgICBpZiAob3BwKSB7XG4gICAgICAgICAgcGVyc29uYWxpemVkT3JkZXIucHVzaChvcHApO1xuICAgICAgICAgIG9wcG9ydHVuaXR5TWFwLmRlbGV0ZSh1aWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWRkIHJlbWFpbmluZyBvcHBvcnR1bml0aWVzIChub3QgaW4gcGVyc29uYWxpemVkIHJlc3BvbnNlKVxuICAgICAgb3Bwb3J0dW5pdHlNYXAuZm9yRWFjaChvcHAgPT4gcmVtYWluaW5nLnB1c2gob3BwKSk7XG4gICAgICBcbiAgICAgIC8vIFNvcnQgcmVtYWluaW5nIGJ5IGRhdGVcbiAgICAgIHJlbWFpbmluZy5zb3J0KChhLCBiKSA9PiBcbiAgICAgICAgbmV3IERhdGUoYS5zdGFydERhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuc3RhcnREYXRlKS5nZXRUaW1lKClcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHJldHVybiBbLi4ucGVyc29uYWxpemVkT3JkZXIsIC4uLnJlbWFpbmluZ107XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIGNsaWVudC1zaWRlIHNjb3JpbmcgaWYgQVBJIGZhaWxzXG4gICAgICBjb25zb2xlLndhcm4oJ1BlcnNvbmFsaXplIEFQSSByZXF1ZXN0IGZhaWxlZCwgdXNpbmcgY2xpZW50LXNpZGUgc2NvcmluZycpO1xuICAgICAgcmV0dXJuIHNjb3JlQW5kU29ydE9wcG9ydHVuaXRpZXMob3Bwb3J0dW5pdGllcywgdXNlckF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwZXJzb25hbGl6ZWQgb3JkZXJpbmc6JywgZXJyb3IpO1xuICAgIC8vIEZhbGxiYWNrIHRvIGNsaWVudC1zaWRlIHNjb3JpbmdcbiAgICByZXR1cm4gc2NvcmVBbmRTb3J0T3Bwb3J0dW5pdGllcyhvcHBvcnR1bml0aWVzLCB1c2VyQXR0cmlidXRlcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGllbnQtc2lkZSBzY29yaW5nIGZhbGxiYWNrIHdoZW4gUGVyc29uYWxpemUgQVBJIGlzIG5vdCBhdmFpbGFibGVcbiAqIFNjb3JlcyBvcHBvcnR1bml0aWVzIGJhc2VkIG9uIGxvY2F0aW9uIGFuZCBjYXVzZSBtYXRjaGVzXG4gKi9cbmZ1bmN0aW9uIHNjb3JlQW5kU29ydE9wcG9ydHVuaXRpZXM8VCBleHRlbmRzIHtcbiAgY2l0eT86IHN0cmluZztcbiAgc3RhdGU/OiBzdHJpbmc7XG4gIGNvdW50cnk/OiBzdHJpbmc7XG4gIGNhdXNlU2x1Z3M/OiBzdHJpbmdbXTtcbiAgc3RhcnREYXRlOiBzdHJpbmc7XG59PihcbiAgb3Bwb3J0dW5pdGllczogVFtdLFxuICB1c2VyQXR0cmlidXRlczogVXNlckF0dHJpYnV0ZXNcbik6IFRbXSB7XG4gIGNvbnN0IHVzZXJDaXR5ID0gdXNlckF0dHJpYnV0ZXMuY2l0eT8udG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgdXNlclN0YXRlID0gdXNlckF0dHJpYnV0ZXMuc3RhdGU/LnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHVzZXJDb3VudHJ5ID0gdXNlckF0dHJpYnV0ZXMuY291bnRyeT8udG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgdXNlclByZWZlcnJlZENhdXNlcyA9ICh1c2VyQXR0cmlidXRlcy5wcmVmZXJyZWRDYXVzZXMgfHwgdXNlckF0dHJpYnV0ZXMuaW50ZXJlc3RzIHx8IFtdKVxuICAgIC5tYXAoYyA9PiBjLnRvTG93ZXJDYXNlKCkpO1xuXG4gIC8vIFNjb3JlIGVhY2ggb3Bwb3J0dW5pdHkgYmFzZWQgb24gcmVsZXZhbmNlXG4gIGNvbnN0IHNjb3JlZE9wcG9ydHVuaXRpZXMgPSBvcHBvcnR1bml0aWVzLm1hcChvcHAgPT4ge1xuICAgIGxldCBzY29yZSA9IDA7XG5cbiAgICAvLyBMb2NhdGlvbiBzY29yaW5nIChoaWdoZXIgcHJpb3JpdHkpXG4gICAgaWYgKHVzZXJDaXR5ICYmIG9wcC5jaXR5Py50b0xvd2VyQ2FzZSgpID09PSB1c2VyQ2l0eSkge1xuICAgICAgc2NvcmUgKz0gMTAwOyAvLyBFeGFjdCBjaXR5IG1hdGNoXG4gICAgfSBlbHNlIGlmICh1c2VyU3RhdGUgJiYgb3BwLnN0YXRlPy50b0xvd2VyQ2FzZSgpID09PSB1c2VyU3RhdGUpIHtcbiAgICAgIHNjb3JlICs9IDUwOyAvLyBTdGF0ZSBtYXRjaFxuICAgIH0gZWxzZSBpZiAodXNlckNvdW50cnkgJiYgb3BwLmNvdW50cnk/LnRvTG93ZXJDYXNlKCkgPT09IHVzZXJDb3VudHJ5KSB7XG4gICAgICBzY29yZSArPSAyNTsgLy8gQ291bnRyeSBtYXRjaFxuICAgIH1cblxuICAgIC8vIENhdXNlIHNjb3JpbmcgKHNlY29uZGFyeSBwcmlvcml0eSlcbiAgICBpZiAob3BwLmNhdXNlU2x1Z3MgJiYgb3BwLmNhdXNlU2x1Z3MubGVuZ3RoID4gMCAmJiB1c2VyUHJlZmVycmVkQ2F1c2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG1hdGNoaW5nQ2F1c2VzID0gb3BwLmNhdXNlU2x1Z3MuZmlsdGVyKGNhdXNlU2x1ZyA9PlxuICAgICAgICB1c2VyUHJlZmVycmVkQ2F1c2VzLnNvbWUocHJlZiA9PiBcbiAgICAgICAgICBjYXVzZVNsdWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwcmVmKSB8fCBcbiAgICAgICAgICBwcmVmLmluY2x1ZGVzKGNhdXNlU2x1Zy50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgc2NvcmUgKz0gbWF0Y2hpbmdDYXVzZXMubGVuZ3RoICogMTA7IC8vIDEwIHBvaW50cyBwZXIgbWF0Y2hpbmcgY2F1c2VcbiAgICB9XG5cbiAgICByZXR1cm4geyBvcHBvcnR1bml0eTogb3BwLCBzY29yZSB9O1xuICB9KTtcblxuICAvLyBTb3J0IGJ5IHNjb3JlIChkZXNjZW5kaW5nKSwgdGhlbiBieSBkYXRlIChhc2NlbmRpbmcpXG4gIHNjb3JlZE9wcG9ydHVuaXRpZXMuc29ydCgoYSwgYikgPT4ge1xuICAgIGlmIChiLnNjb3JlICE9PSBhLnNjb3JlKSB7XG4gICAgICByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7IC8vIEhpZ2hlciBzY29yZSBmaXJzdFxuICAgIH1cbiAgICAvLyBJZiBzY29yZXMgYXJlIGVxdWFsLCBzb3J0IGJ5IGRhdGUgKGVhcmxpZXIgZGF0ZXMgZmlyc3QpXG4gICAgcmV0dXJuIG5ldyBEYXRlKGEub3Bwb3J0dW5pdHkuc3RhcnREYXRlKS5nZXRUaW1lKCkgLSBcbiAgICAgICAgICAgbmV3IERhdGUoYi5vcHBvcnR1bml0eS5zdGFydERhdGUpLmdldFRpbWUoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHNjb3JlZE9wcG9ydHVuaXRpZXMubWFwKGl0ZW0gPT4gaXRlbS5vcHBvcnR1bml0eSk7XG59XG4iXSwibmFtZXMiOlsiZ2V0Q29udGVudHN0YWNrQ29uZmlnIiwiZ2V0QXBpQmFzZVVybCIsImdldFBlcnNvbmFsaXplZENvbnRlbnQiLCJjb250ZW50VHlwZVVpZCIsInVzZXJBdHRyaWJ1dGVzIiwib3B0aW9ucyIsImNvbmZpZyIsImJhc2VVcmwiLCJlbnZpcm9ubWVudCIsImxvY2FsZSIsInBlcnNvbmFsaXplQXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkNPTlRFTlRTVEFDS19QRVJTT05BTElaRV9BUElfS0VZIiwiY29uc29sZSIsIndhcm4iLCJnZXREZWZhdWx0Q29udGVudCIsImVudHJ5VWlkIiwiZW5kcG9pbnQiLCJ1cmwiLCJoZWFkZXJzIiwiYXBpS2V5IiwiZGVsaXZlcnlUb2tlbiIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJ2IiwiYXBwZW5kIiwiU3RyaW5nIiwiZnVsbFVybCIsInRvU3RyaW5nIiwiZGF0YSIsInJlc3BvbnNlIiwiZmV0Y2giLCJuZXh0IiwicmV2YWxpZGF0ZSIsIm9rIiwic3RhdHVzIiwianNvbiIsImVudHJ5IiwiZXJyb3IiLCJFcnJvciIsImdldFVzZXJBdHRyaWJ1dGVzRnJvbUNsaWVudCIsImF0dHJpYnV0ZXMiLCJzdG9yZWRDaXR5IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0b3JlZEludGVyZXN0cyIsInN0b3JlZFVzZXJUeXBlIiwiY2l0eSIsImludGVyZXN0cyIsIkpTT04iLCJwYXJzZSIsInVzZXJUeXBlIiwic3RvcmVVc2VyQXR0cmlidXRlcyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJnZXRVc2VyQXR0cmlidXRlc0Zyb21SZWdpc3RyYXRpb25zIiwiZ2V0UmVnaXN0cmF0aW9ucyIsInJlcXVpcmUiLCJyZWdpc3RyYXRpb25zIiwibGVuZ3RoIiwibG9jYXRpb25zIiwibWFwIiwiciIsIm9wcG9ydHVuaXR5TG9jYXRpb24iLCJmaWx0ZXIiLCJCb29sZWFuIiwibW9zdENvbW1vbkxvY2F0aW9uIiwicGFydHMiLCJzcGxpdCIsInAiLCJ0cmltIiwic3RhdGUiLCJjb3VudHJ5Iiwib3Bwb3J0dW5pdHlTbHVncyIsIm9wcG9ydHVuaXR5U2x1ZyIsInByZWZlcnJlZENhdXNlcyIsInJlZ2lzdHJhdGlvbkNvdW50IiwicGVyc29uYWxpemVPcHBvcnR1bml0eU9yZGVyIiwib3Bwb3J0dW5pdGllcyIsImtleXMiLCJzY29yZUFuZFNvcnRPcHBvcnR1bml0aWVzIiwib3Bwb3J0dW5pdHlVaWRzIiwib3BwIiwidWlkIiwic2V0IiwiJGluIiwicGVyc29uYWxpemVkRW50cmllcyIsInBlcnNvbmFsaXplZFVpZHMiLCJvcHBvcnR1bml0eU1hcCIsIk1hcCIsInBlcnNvbmFsaXplZE9yZGVyIiwicmVtYWluaW5nIiwiZ2V0IiwicHVzaCIsImRlbGV0ZSIsInNvcnQiLCJhIiwiYiIsIkRhdGUiLCJzdGFydERhdGUiLCJnZXRUaW1lIiwidXNlckNpdHkiLCJ0b0xvd2VyQ2FzZSIsInVzZXJTdGF0ZSIsInVzZXJDb3VudHJ5IiwidXNlclByZWZlcnJlZENhdXNlcyIsImMiLCJzY29yZWRPcHBvcnR1bml0aWVzIiwic2NvcmUiLCJjYXVzZVNsdWdzIiwibWF0Y2hpbmdDYXVzZXMiLCJjYXVzZVNsdWciLCJzb21lIiwicHJlZiIsImluY2x1ZGVzIiwib3Bwb3J0dW5pdHkiLCJpdGVtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/contentstack/personalize.ts\n"));

/***/ })

});